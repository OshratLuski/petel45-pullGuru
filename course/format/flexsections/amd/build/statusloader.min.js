/**
 * Javascript for lazy load of statuses.
 *
 * @package
 * @copyright  2020 Devlion <info@devlion.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("format_flexsections/statusloader",["jquery","core/ajax","local_petel/inview","core/notification"],(function($,Ajax,inView,Notification){var courseid=null;return{inview:function(){let stackcmids=[],sectionid=0;inView(".inviewgrade").on("enter",(function(e){if(!$(e).hasClass("inview-done")){courseid=$(e).attr("data-courseid");let area=$(e).closest(".section-area");sectionid=area.attr("data-cmlistid"),area.find(".inviewgrade").addClass("inview-done")}})),setInterval((function(){if(stackcmids.length>0||sectionid>0){!function(cmids,sectionid){courseid&&Ajax.call([{methodname:"format_flexsections_get_activity_grade_status",args:{cmids:cmids,sectionid:sectionid,courseid:courseid},done:function(resp){JSON.parse(resp).result.forEach((function(item){$("#activity-row-grade-"+item.cmid).html(item.gradestatus),$("#activity-oer-version-"+item.cmid).html(item.oerversion)}))},fail:Notification.exception}])}(JSON.stringify(stackcmids),sectionid),stackcmids=[],sectionid=0}}),500)}}}));

//# sourceMappingURL=statusloader.min.js.map