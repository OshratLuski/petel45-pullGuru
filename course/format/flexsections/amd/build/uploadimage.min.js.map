{"version":3,"file":"uploadimage.min.js","sources":["../src/uploadimage.js"],"sourcesContent":["define(['jquery',\r\n        'core/ajax',\r\n        'core/str',\r\n        'core/modal_factory',\r\n        'core/modal_events',\r\n        'core/templates',\r\n        'core/notification',\r\n        'core/fragment'],\r\n    function($, Ajax, Str, ModalFactory, ModalEvents, Templates, Notification, Fragment) {\r\n        return {\r\n            course: function() {\r\n                $(document).on('click', '#uploadcourseimage', (e) => {\r\n                    let courseid = $(e.target).data('courseid');\r\n                    let coursecontextid = $(e.target).data('contextid');\r\n\r\n                    const getBody = function() {\r\n                        var params = {courseid: courseid, type: 'course'};\r\n                        return Fragment.loadFragment('format_flexsections', 'upload_image', coursecontextid, params);\r\n                    };\r\n\r\n                    Str.get_strings([\r\n                        {key: 'uploadimage', component: 'format_flexsections'},\r\n                    ]).done(function(strings) {\r\n                        var modalPromise = ModalFactory.create({\r\n                            type: ModalFactory.types.DEFAULT,\r\n                            title: strings[0],\r\n                            body: getBody(),\r\n                            removeOnClose: true\r\n                        });\r\n\r\n                        $.when(modalPromise).then(function(fmodal) {\r\n                            fmodal.setLarge();\r\n                            return fmodal;\r\n                        }).done(function(modal) {\r\n                            modal.show();\r\n                        }).fail(Notification.exception);\r\n                    });\r\n                });\r\n            },\r\n\r\n            singleSection: function() {\r\n                $(document).on('click', '#uploadsectionimage', (e) => {\r\n                    let sectionid = $(e.target).data('sectionid');\r\n                    let coursecontextid = $(e.target).data('contextid');\r\n\r\n                    const getBody = function() {\r\n                        var params = {sectionid: sectionid, type: 'singlesection'};\r\n                        return Fragment.loadFragment('format_flexsections', 'upload_image', coursecontextid, params);\r\n                    };\r\n\r\n                    Str.get_strings([\r\n                        {key: 'uploadimage', component: 'format_flexsections'},\r\n                    ]).done(function(strings) {\r\n                        var modalPromise = ModalFactory.create({\r\n                            type: ModalFactory.types.DEFAULT,\r\n                            title: strings[0],\r\n                            body: getBody(),\r\n                            removeOnClose: true\r\n                        });\r\n\r\n                        $.when(modalPromise).then(function(fmodal) {\r\n                            fmodal.setLarge();\r\n                            return fmodal;\r\n                        }).done(function(modal) {\r\n                            modal.show();\r\n                        }).fail(Notification.exception);\r\n                    });\r\n                });\r\n            },\r\n\r\n            multiSections: function() {\r\n                $('.uploadsectionimage').find('input').each(function() {\r\n\r\n                    $(this).on('click', (e) => {\r\n                        let sectionid = $(e.target).data('sectionid');\r\n                        let coursecontextid = $(e.target).data('contextid');\r\n\r\n                        const getBody = function() {\r\n                            var params = {sectionid: sectionid, type: 'multisection'};\r\n                            return Fragment.loadFragment('format_flexsections', 'upload_image', coursecontextid, params);\r\n                        };\r\n\r\n                        Str.get_strings([\r\n                            {key: 'uploadimage', component: 'format_flexsections'},\r\n                        ]).done(function(strings) {\r\n                            var modalPromise = ModalFactory.create({\r\n                                type: ModalFactory.types.DEFAULT,\r\n                                title: strings[0],\r\n                                body: getBody(),\r\n                                removeOnClose: true\r\n                            });\r\n\r\n                            $.when(modalPromise).then(function(fmodal) {\r\n                                fmodal.setLarge();\r\n                                return fmodal;\r\n                            }).done(function(modal) {\r\n                                modal.show();\r\n                            }).fail(Notification.exception);\r\n                        });\r\n                    });\r\n                });\r\n            },\r\n        };\r\n    });\r\n"],"names":["define","$","Ajax","Str","ModalFactory","ModalEvents","Templates","Notification","Fragment","course","document","on","e","courseid","target","data","coursecontextid","get_strings","key","component","done","strings","params","modalPromise","create","type","types","DEFAULT","title","body","loadFragment","removeOnClose","when","then","fmodal","setLarge","modal","show","fail","exception","singleSection","sectionid","multiSections","find","each","this"],"mappings":"AAAAA,OAAO,kCAAA,CAAC,SACA,YACA,WACA,qBACA,oBACA,iBACA,oBACA,kBACJ,SAASC,EAAGC,KAAMC,IAAKC,aAAcC,YAAaC,UAAWC,aAAcC,UACvE,MAAO,CACHC,OAAQ,WACJR,EAAES,UAAUC,GAAG,QAAS,sBAAuBC,IAC3C,IAAIC,SAAWZ,EAAEW,EAAEE,QAAQC,KAAK,YAC5BC,gBAAkBf,EAAEW,EAAEE,QAAQC,KAAK,aAOvCZ,IAAIc,YAAY,CACZ,CAACC,IAAK,cAAeC,UAAW,yBACjCC,MAAK,SAASC,SACb,IAPIC,OAOAC,aAAenB,aAAaoB,OAAO,CACnCC,KAAMrB,aAAasB,MAAMC,QACzBC,MAAOP,QAAQ,GACfQ,MAVAP,OAAS,CAACT,SAAUA,SAAUY,KAAM,UACjCjB,SAASsB,aAAa,sBAAuB,eAAgBd,gBAAiBM,SAUjFS,eAAe,IAGnB9B,EAAE+B,KAAKT,cAAcU,MAAK,SAASC,QAE/B,OADAA,OAAOC,WACAD,MACX,IAAGd,MAAK,SAASgB,OACbA,MAAMC,MACT,IAAEC,KAAK/B,aAAagC,UACzB,GAAE,GAET,EAEDC,cAAe,WACXvC,EAAES,UAAUC,GAAG,QAAS,uBAAwBC,IAC5C,IAAI6B,UAAYxC,EAAEW,EAAEE,QAAQC,KAAK,aAC7BC,gBAAkBf,EAAEW,EAAEE,QAAQC,KAAK,aAOvCZ,IAAIc,YAAY,CACZ,CAACC,IAAK,cAAeC,UAAW,yBACjCC,MAAK,SAASC,SACb,IAPIC,OAOAC,aAAenB,aAAaoB,OAAO,CACnCC,KAAMrB,aAAasB,MAAMC,QACzBC,MAAOP,QAAQ,GACfQ,MAVAP,OAAS,CAACmB,UAAWA,UAAWhB,KAAM,iBACnCjB,SAASsB,aAAa,sBAAuB,eAAgBd,gBAAiBM,SAUjFS,eAAe,IAGnB9B,EAAE+B,KAAKT,cAAcU,MAAK,SAASC,QAE/B,OADAA,OAAOC,WACAD,MACX,IAAGd,MAAK,SAASgB,OACbA,MAAMC,MACT,IAAEC,KAAK/B,aAAagC,UACzB,GAAE,GAET,EAEDG,cAAe,WACXzC,EAAE,uBAAuB0C,KAAK,SAASC,MAAK,WAExC3C,EAAE4C,MAAMlC,GAAG,SAAUC,IACjB,IAAI6B,UAAYxC,EAAEW,EAAEE,QAAQC,KAAK,aAC7BC,gBAAkBf,EAAEW,EAAEE,QAAQC,KAAK,aAOvCZ,IAAIc,YAAY,CACZ,CAACC,IAAK,cAAeC,UAAW,yBACjCC,MAAK,SAASC,SACb,IAPIC,OAOAC,aAAenB,aAAaoB,OAAO,CACnCC,KAAMrB,aAAasB,MAAMC,QACzBC,MAAOP,QAAQ,GACfQ,MAVAP,OAAS,CAACmB,UAAWA,UAAWhB,KAAM,gBACnCjB,SAASsB,aAAa,sBAAuB,eAAgBd,gBAAiBM,SAUjFS,eAAe,IAGnB9B,EAAE+B,KAAKT,cAAcU,MAAK,SAASC,QAE/B,OADAA,OAAOC,WACAD,MACX,IAAGd,MAAK,SAASgB,OACbA,MAAMC,MACT,IAAEC,KAAK/B,aAAagC,UACzB,GAAE,GAEV,GACJ,EAER"}