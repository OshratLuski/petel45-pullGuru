{"version":3,"file":"feedback.min.js","sources":["../src/feedback.js"],"sourcesContent":["/* eslint-disable no-console */\nimport ajax from \"core/ajax\";\nimport $ from \"jquery\";\n\nconst params = {};\n\nconst getData = (qaid) => {\n    let newParams = params[qaid];\n    ajax.call([{\n        methodname: \"qtype_mlnlpessay_get_feedback\", args: {\n            questionid: newParams.qid,\n            questionattemptid: newParams.qaid\n        }\n    }])[0].done(function(response) {\n        if (response['status']) {\n            let data = response['response'];\n            data = JSON.parse(data);\n            draw(data, newParams);\n            clearInterval(newParams.int);\n        }\n    }).fail(Notification.exception);\n};\n\nconst draw = (data, params) => {\n    let place = $('.' + params.selector + '-' + params.qid);\n    place.html(data);\n};\n\nconst timer = (qaid) => {\n    params[qaid].int = setInterval(function() {\n        getData(qaid);\n    }, 5000);\n};\n\nexport const init = (qid, qaid, selector) => {\n    let newObj = {\n        qid: qid,\n        qaid: qaid,\n        selector: selector,\n        int: null,\n\n    };\n    params[qaid] = newObj;\n    getData(newObj.qaid);\n    timer(newObj.qaid);\n};\n"],"names":["_interopRequireDefault","e","__esModule","default","_ajax","_jquery","params","getData","qaid","newParams","ajax","call","methodname","args","questionid","qid","questionattemptid","done","response","data","JSON","parse","draw","clearInterval","int","fail","Notification","exception","$","selector","html","_exports","init","newObj","setInterval","timer"],"mappings":"qGAEuB,SAAAA,uBAAAC,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,EAAA,8EADvBG,MAAAJ,uBAAAI,OACAC,QAAAL,uBAAAK,SAEA,MAAMC,OAAS,CAAA,EAETC,QAAWC,OACb,IAAIC,UAAYH,OAAOE,MACvBE,MAAIP,QAACQ,KAAK,CAAC,CACPC,WAAY,gCAAiCC,KAAM,CAC/CC,WAAYL,UAAUM,IACtBC,kBAAmBP,UAAUD,SAEjC,GAAGS,KAAK,SAASC,UACjB,GAAIA,SAAiB,OAAG,CACpB,IAAIC,KAAOD,SAAmB,SAC9BC,KAAOC,KAAKC,MAAMF,MAClBG,KAAKH,KAAMV,WACXc,cAAcd,UAAUe,IAC5B,CACH,GAAEC,KAAKC,aAAaC,YAGnBL,KAAOA,CAACH,KAAMb,WACJ,EAAAsB,QAACzB,SAAC,IAAMG,OAAOuB,SAAW,IAAMvB,OAAOS,KAC7Ce,KAAKX,OAoBbY,SAAAC,KAXkBA,CAACjB,IAAKP,KAAMqB,YAC5B,IAAII,OAAS,CACTlB,IAAKA,IACLP,KAAMA,KACNqB,SAAUA,SACVL,IAAK,MAGTlB,OAAOE,MAAQyB,OACf1B,QAAQ0B,OAAOzB,MAfJA,QACXF,OAAOE,MAAMgB,IAAMU,YAAY,WAC3B3B,QAAQC,KACX,EAAE,MAaH2B,CAAMF,OAAOzB,MACf"}