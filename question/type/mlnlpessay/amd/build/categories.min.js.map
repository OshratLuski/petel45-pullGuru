{"version":3,"file":"categories.min.js","sources":["../src/categories.js"],"sourcesContent":["\ndefine(['jquery', 'https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js'], function ($, Tabulator) {\n\n    return {\n\n        init: function (input, params, hascapedit) {\n\n            tabledata = [];\n            tabledata = Object.keys(input).map(function (key) {\n                return input[key];\n            });\n            tabledata.sort((a, b) => a.sortorder - b.sortorder);\n\n            var lang = $('html')[0].lang;\n            if (lang === \"he\") {\n                var table = new Tabulator(\"#rubiccategoryfulltable-table\", {\n                    movableRows: hascapedit,\n                    height: 540,\n                    data: tabledata,\n                    textDirection: \"rtl\",\n                    layout: \"fitColumns\",\n                    columns: [\n                        {\n                            rowHandle: hascapedit,\n                            formatter: \"handle\",\n                            headerSort: false,\n                            // frozen: true,\n                            width: 30,\n                            minWidth: 30\n                        },\n                        {\n                            field: \"iscategoryselected\",\n                            hozAlign: \"center\",\n                            headerHozAlign: \"center\",\n                            headerSort: false,\n                            formatter: (cell) => {\n                                catid = cell.getRow()._row.data.id;\n                                const value = cell.getValue();\n                                return `\n                                    <input class=\"n_catch n_catch2\" ${hascapedit ? \"\" : 'disabled=disabled'} type=\"checkbox\" ${value ? 'checked=\"checked\"' : ''} name=\"n_categories_${catid}[]\" id=\"n_categories_${catid}\"/>\n                                    `;\n                            },\n                            title: hascapedit ? `\n                        <span>Select all</span>\n                        <br>\n                        <input class=\"n_catch_all\" type=\"checkbox\" name=\"n_catch_all\" id=\"n_catch_all\"/>\n                        ` : `<span>Select all</span>`,\n                        },\n                        {\n                            title: \"Name\",\n                            field: \"name\",\n                            width: '40%',\n                            // hozAlign: \"right\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                        {\n                            title: \"Type\",\n                            field: \"type\",\n                            editor: hascapedit ? \"list\" : false,\n                            editorParams: {\n                                values: params.types,\n                                allowEmpty: true,\n                                listOnEmpty: true,\n                                clearable: true,\n                                itemFormatter: (label,\n                                    value,\n                                    item,\n                                    element) => {\n                                    return `\n                                <strong>${label}</strong><br/>\n                                `;\n                                },\n                            },\n                            formatter: function (cell, formatterParams, onRendered) {\n                                return params.types[cell.getValue()] == '—' ? '' : params.types[cell.getValue()];\n                            },\n                            headerSort: false,\n                            cssClass: hascapedit ? \"editablecol\" : false,\n                        },\n                        {\n                            title: \"Weight\",\n                            field: \"weight\",\n                            // hozAlign: \"left\",\n                            editor: hascapedit ? true : false,\n                            cssClass: hascapedit ? \"editablecol\" : false,\n                            validator: [\"min:0\",\n                                \"max:100\",\n                                \"integer\"],\n                            headerSort: false,\n                        },\n                        {\n                            title: \"Tag\",\n                            field: \"tag\",\n                            // hozAlign: \"left\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                        {\n                            title: \"Topics\",\n                            field: \"topics\",\n                            // hozAlign: \"left\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                        {\n                            title: \"Subtopics\",\n                            field: \"subtopics\",\n                            // hozAlign: \"left\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                        {\n                            title: \"Lang\",\n                            field: \"lang\",\n                            // hozAlign: \"left\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                    ],\n                });\n            }\n            else {\n                var table = new Tabulator(\"#rubiccategoryfulltable-table\", {\n                    movableRows: hascapedit,\n                    height: 540,\n                    data: tabledata,\n                    textDirection: \"ltr\",\n                    layout: \"fitColumns\",\n                    columns: [\n                        {\n                            rowHandle: hascapedit,\n                            formatter: \"handle\",\n                            headerSort: false,\n                            frozen: true,\n                            width: 30,\n                            minWidth: 30\n                        },\n                        {\n                            field: \"iscategoryselected\",\n                            hozAlign: \"center\",\n                            headerHozAlign: \"center\",\n                            headerSort: false,\n                            formatter: (cell) => {\n                                catid = cell.getRow()._row.data.id;\n                                const value = cell.getValue();\n                                return `\n                                    <input class=\"n_catch n_catch2\" ${hascapedit ? \"\" : 'disabled=disabled'} type=\"checkbox\" ${value ? 'checked=\"checked\"' : ''} name=\"n_categories_${catid}[]\" id=\"n_categories_${catid}\"/>\n                                    `;\n                            },\n                            title: hascapedit ? `\n                        <span>Select all</span>\n                        <br>\n                        <input class=\"n_catch_all\" type=\"checkbox\" name=\"n_catch_all\" id=\"n_catch_all\"/>\n                        ` : `<span>Select all</span>`,\n                        },\n                        {\n                            title: \"Name\",\n                            field: \"name\",\n                            width: '40%',\n                            // hozAlign: \"right\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                        {\n                            title: \"Type\",\n                            field: \"type\",\n                            editor: hascapedit ? \"list\" : false,\n                            editorParams: {\n                                values: params.types,\n                                allowEmpty: true,\n                                listOnEmpty: true,\n                                clearable: true,\n                                itemFormatter: (label,\n                                    value,\n                                    item,\n                                    element) => {\n                                    return `\n                                <strong>${label}</strong><br/>\n                                `;\n                                },\n                            },\n                            formatter: function (cell, formatterParams, onRendered) {\n                                return params.types[cell.getValue()] == '—' ? '' : params.types[cell.getValue()];\n                            },\n                            headerSort: false,\n                            cssClass: hascapedit ? \"editablecol\" : false,\n                        },\n                        {\n                            title: \"Weight\",\n                            field: \"weight\",\n                            // hozAlign: \"left\",\n                            editor: hascapedit ? true : false,\n                            cssClass: hascapedit ? \"editablecol\" : false,\n                            validator: [\"min:0\",\n                                \"max:100\",\n                                \"integer\"],\n                            headerSort: false,\n                        },\n                        {\n                            title: \"Tag\",\n                            field: \"tag\",\n                            // hozAlign: \"left\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                        {\n                            title: \"Topics\",\n                            field: \"topics\",\n                            // hozAlign: \"left\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                        {\n                            title: \"Subtopics\",\n                            field: \"subtopics\",\n                            // hozAlign: \"left\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                        {\n                            title: \"Lang\",\n                            field: \"lang\",\n                            // hozAlign: \"left\",\n                            headerFilter: \"input\",\n                            headerFilterLiveFilter: true,\n                            headerSort: false\n                        },\n                    ],\n                });\n            }\n\n            // Listeners.\n            if (hascapedit) {\n\n                table.on(\"tableBuilt\", function () {\n                    $(\"#n_catch_all\").change(function () {\n                        cells = table.getColumn('iscategoryselected').getCells();\n                        cells.forEach(element => {\n                            element.setValue(this.checked);\n                        });\n                    });\n                    $(\"form\").submit((e) => {\n                        $('#rubiccategoryfulltable').attr('value', JSON.stringify(table.getData()));\n                        return true;\n                    });\n                });\n\n                table.on(\"cellClick\", function (e, cell) {\n                    if ($(e.target).hasClass('n_catch')) {\n                        cell.setValue($(e.target).is(\":checked\"));\n                    }\n                });\n            }\n\n        },\n\n    };\n});\n"],"names":["define","$","Tabulator","init","input","params","hascapedit","tabledata","Object","keys","map","key","sort","a","b","sortorder","lang","table","movableRows","height","data","textDirection","layout","columns","rowHandle","formatter","headerSort","width","minWidth","field","hozAlign","headerHozAlign","cell","catid","getRow","_row","id","value","getValue","title","headerFilter","headerFilterLiveFilter","editor","editorParams","values","types","allowEmpty","listOnEmpty","clearable","itemFormatter","label","item","element","formatterParams","onRendered","cssClass","validator","frozen","on","change","cells","getColumn","getCells","forEach","setValue","this","checked","submit","e","attr","JSON","stringify","getData","target","hasClass","is"],"mappings":"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"}