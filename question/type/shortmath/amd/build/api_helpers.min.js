define("qtype_shortmath/api_helpers",["exports","core/ajax","core/notification"],(function(_exports,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.saveShortmathTemplate=_exports.getShortmathTemplate=_exports.getShortmathEditorconfig=_exports.deleteShortmathTemplate=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);var _ref,getShortmathTemplate=(_ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(templateId){var template;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,new Promise((function(resolve){_ajax.default.call([{methodname:"qtype_shortmath_get_template",args:{id:templateId},done:function(foundTemplate){resolve(JSON.parse(foundTemplate.template))},fail:_notification.default.exception||defaultFailCallback("Couldn't get template with id ".concat(templateId))}])}));case 2:return template=_context.sent,_context.abrupt("return",template);case 4:case"end":return _context.stop()}}),_callee)}))),function(_x){return _ref.apply(this,arguments)});_exports.getShortmathTemplate=getShortmathTemplate;var _ref2,getShortmathEditorconfig=(_ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(questionId){var editorconfig;return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,new Promise((function(resolve){_ajax.default.call([{methodname:"qtype_shortmath_get_editor_config",args:{id:questionId},done:function(foundTemplate){resolve(JSON.parse(foundTemplate.editorconfig))},fail:_notification.default.exception||defaultFailCallback("Couldn't get editor configuration for question with id ".concat(questionId))}])}));case 2:return editorconfig=_context2.sent,_context2.abrupt("return",editorconfig);case 4:case"end":return _context2.stop()}}),_callee2)}))),function(_x2){return _ref2.apply(this,arguments)});_exports.getShortmathEditorconfig=getShortmathEditorconfig;var _ref3,saveShortmathTemplate=(_ref3=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(name,template,templateId){var succeeded;return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,new Promise((function(resolve){_ajax.default.call([{methodname:"qtype_shortmath_save_template",args:{name:name,template:template,templateId:templateId},done:resolve,fail:_notification.default.exception||_notification.default.addNotification({message:"Couldn't save template ".concat(name),type:"error"})}])}));case 2:return succeeded=_context3.sent,_context3.abrupt("return",succeeded);case 4:case"end":return _context3.stop()}}),_callee3)}))),function(_x3,_x4,_x5){return _ref3.apply(this,arguments)});_exports.saveShortmathTemplate=saveShortmathTemplate;var _ref4,deleteShortmathTemplate=(_ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(templateId){var succeeded;return regeneratorRuntime.wrap((function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,new Promise((function(resolve){_ajax.default.call([{methodname:"qtype_shortmath_delete_template",args:{id:templateId},done:resolve,fail:_notification.default.exception}])}));case 2:return succeeded=_context4.sent,_context4.abrupt("return",succeeded);case 4:case"end":return _context4.stop()}}),_callee4)}))),function(_x6){return _ref4.apply(this,arguments)});_exports.deleteShortmathTemplate=deleteShortmathTemplate;var defaultFailCallback=function(message){return function(){_notification.default.addNotification({message:message,type:"error"})}}}));

//# sourceMappingURL=api_helpers.min.js.map