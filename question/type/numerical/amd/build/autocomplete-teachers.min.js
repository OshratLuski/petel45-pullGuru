define("qtype_numerical/autocomplete-teachers",[""],(function(){var btnToggle;function KeySelect(){var currentItem=-1,items="",forms=Array.from(document.querySelectorAll("form"));this.init=function(container){items=Array.from(container.childNodes),forms.forEach((function(form){form.contains(container)&&(form.onkeydown=function(event){13===event.keyCode&&event.preventDefault()})})),container.onmouseover=function(e){items.forEach((function(item,index){item.classList.remove("aut-hover"),e.target===item&&(currentItem=index)})),e.target.classList.add("aut-hover")}};var makeHover=function(){items.forEach((function(item){item.classList.remove("aut-hover")})),items[currentItem].classList.add("aut-hover")};this.checkKeyCode=function(event){switch(event.keyCode){case 38:currentItem<=0||(currentItem--,makeHover());break;case 40:currentItem>=items.length-1||(currentItem++,makeHover());break;case 13:!function(){var event=new Event("click",{bubbles:!0});items[currentItem]&&(items[currentItem].dispatchEvent(event),currentItem=-1),currentItem=-1}();break;case 27:container.innerHTML="",container.style.display="none",currentItem=-1}}}return{init:function(inputSelectorsJson,searchWordsJson){var keySelect=new KeySelect;document.addEventListener("keydown",keySelect.checkKeyCode);var style,searchWords=JSON.parse(searchWordsJson),inputSelectorsName=JSON.parse(inputSelectorsJson);Array.isArray(searchWords)&&Array.isArray(inputSelectorsName)&&(inputSelectorsName.forEach((function(item){var inputSelectors=Array.from(document.querySelectorAll(item));inputSelectors.forEach((function(inputSelector){if(inputSelectors){var outerBlock=document.createElement("ul");outerBlock.classList.add("compl__outer");var outerBlockPrevStep,outerItem=document.createElement("li");outerItem.classList.add("compl__outer-item"),inputSelector.autocomplete="off",inputSelector.parentNode.appendChild(outerBlock),inputSelector.addEventListener("input",(function(e){for(var fieldset=inputSelector;"FIELDSET"!==fieldset.tagName;)fieldset=fieldset.parentNode;if(!(btnToggle=fieldset.querySelectorAll('input[name^="autocomplete"]')).length||btnToggle[0].checked){outerBlock.style.top=inputSelector.offsetTop+inputSelector.offsetHeight+10+"px",outerBlock.style.left=inputSelector.offsetLeft+"px",outerBlock.style.width=inputSelector.clientWidth+"px",outerBlock.innerHTML="";var tempval=this.value.replaceAll("\\",""),value=new RegExp("".concat(tempval),"i"),valuecelcius=new RegExp("Â°"+"".concat(tempval),"i");searchWords.sort().forEach((function(item){if(tempval&&(0===item.search(value)||0===item.search(valuecelcius))){var el=outerItem.cloneNode();el.innerHTML=item,outerBlock.appendChild(el)}})),outerBlock.innerHTML?(outerBlockPrevStep=outerBlock.innerHTML,outerBlock.style.display="block",keySelect.init(outerBlock),outerBlock.addEventListener("click",(function(e){for(var targetEl=e.target;"UL"!==targetEl.tagName;)"LI"===targetEl.tagName&&(inputSelector.value=targetEl.innerHTML,outerBlock.style.display="none"),targetEl=targetEl.parentNode}))):(setTimeout((function(){inputSelector.value=inputSelector.value.substr(0,inputSelector.value.length-1)}),500),outerBlockPrevStep&&inputSelector.value?(outerBlock.innerHTML=outerBlockPrevStep,keySelect.init(outerBlock)):(outerBlock.innerHTML="",outerBlock.style.display="none"))}})),inputSelector.addEventListener("blur",(function(e){setTimeout((function(){outerBlock.style.display="none",outerBlock.innerHTML=""}),300)}))}}))})),(style=document.createElement("style")).innerHTML="\n          .compl__outer {\n            min-width: 150px;\n            background-color: #fff;\n            box-sizing: content-box;\n            border-radius: 5px;\n            overflow: hidden;\n            display: none;\n            margin: 2px 0 0 0;\n            border: 1px solid #ddd;\n            padding: 0;\n            position: absolute;\n            left: 0;\n            list-style-type: none;\n            z-index: 1000;\n          }\n          .compl__outer > li {\n            padding: 10px;\n            cursor: pointer;\n            border-bottom: 1px solid #ddd;\n          }\n          .compl__outer > li.aut-hover {\n            background-color: #bbb;\n          }\n        ",document.querySelector("body").appendChild(style))}}}));

//# sourceMappingURL=autocomplete-teachers.min.js.map