define("qtype_numerical/autocomplete-student",[],(function(){function KeySelect(){var currentItem=-1,items="",forms=Array.from(document.querySelectorAll("form"));this.init=function(container){items=Array.from(container.childNodes),forms.forEach((function(form){form.contains(container)&&(form.onkeydown=function(event){13===event.keyCode&&event.preventDefault()})})),container.onmouseover=function(e){items.forEach((function(item,index){item.classList.remove("aut-hover"),e.target===item&&(currentItem=index)})),e.target.classList.add("aut-hover")}};var makeHover=function(){items.forEach((function(item){item.classList.remove("aut-hover")})),items[currentItem].classList.add("aut-hover")};this.checkKeyCode=function(event){switch(event.keyCode){case 38:currentItem<=0||(currentItem--,makeHover());break;case 40:currentItem>=items.length-1||(currentItem++,makeHover());break;case 13:!function(){var event=new Event("click",{bubbles:!0});items[currentItem]&&(items[currentItem].dispatchEvent(event),currentItem=-1),currentItem=-1}();break;case 27:container.innerHTML="",container.style.display="none",currentItem=-1}}}return{init:function(inputSelectorsJson,searchWordsJson){var targetArray=JSON.parse(searchWordsJson),inputSelectorsName=JSON.parse(inputSelectorsJson);if(Array.isArray(targetArray)&&Array.isArray(inputSelectorsName)){var keySelect=new KeySelect;document.addEventListener("keydown",keySelect.checkKeyCode);var style,allSelectors=inputSelectorsName.join(", ");Array.from(document.querySelectorAll(allSelectors)).forEach((function(inputSelector){if(inputSelector){inputSelector.autocomplete="off";var outputBlock=function(inputSelector){var outputBlock=document.createElement("ul");return outputBlock.classList.add("compl__outer"),inputSelector.parentNode.style.position="relative",inputSelector.parentNode.appendChild(outputBlock),outputBlock}(inputSelector),outerItem=document.createElement("li");outerItem.classList.add("compl__outer-item"),inputSelector.addEventListener("input",(function(e){var input;(input=inputSelector).style.borderColor="",input.style.outlineColor="",input.style.color="",outputBlock.innerHTML="",outputBlock.style.display="none";var string=this.value;string=(string=(string=(string=string.replaceAll(" ","")).replaceAll("E+","E")).replaceAll("e+","e")).replaceAll("\\","");var ch,count,flagerrordigit=!1,flag=!0,digitInputValue="",notDigitInputValue="",degree=["E","e","^"],specific=[".","-","+"],operand=["-","+"],numbers=["0","1","2","3","4","5","6","7","8","9"],numberchars=[];numberchars=numberchars.concat(numbers,degree,specific);for(var i=0;i<=string.length-1;i++){var char=string.charAt(i);numberchars.includes(char)?(flag&&degree.includes(char)&&(numbers.includes(string.charAt(i+1))||operand.includes(string.charAt(i+1))||(flag=!1)),flag?digitInputValue+=char:notDigitInputValue+=char):(flag=!1,notDigitInputValue+=char)}for(var counts={},_i=0,len=digitInputValue.length;_i<len;++_i)0===_i&&"-"===digitInputValue.charAt(0)||(ch=digitInputValue.charAt(_i),count=counts[ch],counts[ch]=count?count+1:1);specific.forEach((function(char,index){counts[char]>1&&(flagerrordigit=!0)}));var inputValue=this.value.replaceAll("\\","");if(digitInputValue.length&&notDigitInputValue.length&&!flagerrordigit){notDigitInputValue=(notDigitInputValue=notDigitInputValue.replaceAll("*","\\*")).replaceAll("^","\\^");var unit=new RegExp("".concat(notDigitInputValue),"i"),unitcelcius=new RegExp("Â°"+"".concat(notDigitInputValue),"i");outputBlock.style.display="block",targetArray.sort().forEach((function(item){var itemParts=item.toString().split("(");if(0===itemParts[0].search(unit)||0===itemParts[0].search(unitcelcius)){var el=outerItem.cloneNode();el.innerHTML='<span class = "compl__outer-data">'.concat(itemParts[0],'</span>\n                                    <span class = "compl__outer-placeholder">').concat(itemParts[1]?"("+itemParts[1]:"","</span>"),outputBlock.appendChild(el)}})),outputBlock.innerHTML?(outputBlock.innerHTML,outputBlock.style.display="block",keySelect.init(outputBlock)):(!function(input){input.style.borderColor="red",input.style.outlineColor="red",input.style.color="red"}(inputSelector),outputBlock.innerHTML="",outputBlock.style.display="none"),outputBlock.addEventListener("click",(function(e){for(var targetEl=e.target;"UL"!==targetEl.tagName;){if("LI"===targetEl.tagName)return inputSelector.value=(digitInputValue+targetEl.firstChild.innerHTML).trim(),void(outputBlock.style.display="none");targetEl=targetEl.parentNode}}))}else(0!==inputValue.search(/[+-\d]+/)||flagerrordigit)&&setTimeout((function(){inputSelector.value=inputSelector.value.substr(0,inputSelector.value.length-1)}),300)})),inputSelector.addEventListener("blur",(function(e){setTimeout((function(e){outputBlock.style.display="none",outputBlock.innerHTML=""}),500)}))}})),(style=document.createElement("style")).classList.add("autocomplete_style"),style.innerHTML="\n            .compl__outer {\n              top: 34px;\n              left: 0;\n              width: 60%;\n              background-color: #fff;\n              box-sizing: content-box;\n              border-radius: 5px;\n              overflow: hidden;\n              display: none;\n              border: 1px solid #ddd;\n              padding: 0;\n              position: absolute;\n              list-style-type: none;\n              z-index: 1000;\n            }\n            .compl__outer > li {\n              padding: 10px;\n              cursor: pointer;\n              border-bottom: 1px solid #ddd;\n            }\n            .compl__outer > li.aut-hover {\n        \n              background-color: #bbb;\n            }\n            .compl__outer-placeholder {\n              color: #9e9e9e;\n            }\n            .formulaspart .compl__outer {\n                right: 0;\n                width: 20%;\n            }\n        ",document.querySelector(".autocomplete_style")||document.querySelector("body").appendChild(style)}}}}));

//# sourceMappingURL=autocomplete-student.min.js.map