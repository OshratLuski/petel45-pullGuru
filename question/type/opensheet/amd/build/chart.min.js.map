{"version":3,"file":"chart.min.js","sources":["../src/chart.js"],"sourcesContent":["define([\n    'jquery',\n    'core/str',\n    'core/notification',\n    'core/chartjs-lazy'\n], function($, Str, Notification, ChartJS) {\n    `use strict`;\n\n    return {\n        init: function(id) {\n\n            let refresh = $('#' + id + '_refreshChart');\n\n            // Event input change title.\n            $('#' + id + '_titleChart').keyup(function(e) {\n                if (e.keyCode === 13) {\n                    refresh.val('1');\n                }\n            });\n\n            // Event select change chart type.\n            var select = $('#' + id + '_selectChart');\n            select.change(function() {\n                $('#' + id).find('.class_' + $(this).val()).click();\n            });\n\n            // Set default select.\n            var typeChart = $('#' + id + '_typeChart').val();\n            select.val(typeChart);\n\n            setInterval(function() {\n\n                if (refresh.val() === '1') {\n\n                    refresh.val(0);\n                    $('#' + id + '_defaultImage').hide();\n                    $('#' + id + '_externalChart').parent().show();\n\n                    let data = JSON.parse($('#' + id + '_dataChart').val());\n\n                    var barColors = [\"red\", \"green\", \"blue\", \"orange\", \"brown\", \"#b91d47\", \"#00aba9\", \"#2b5797\", \"#e8c3b9\", \"#1e7145\"];\n\n                    let type = $('#' + id + '_typeChart').val();\n                    let charttype = \"bar\";\n                    let backgroundColor = barColors;\n                    let borderColor = \"rgba(0,0,0,0)\";\n\n                    // Check labels axis and data.\n                    var xValues = [];\n                    let labelXenable = false;\n                    let labelX = '';\n                    $(data.labels).each(function(index) {\n                        if (index === 0 && (type === 'LINECHART' || type === 'SCATTERCHART' || type === 'BARCHART')) {\n                            if (data.labels[index].length > 0) {\n                                labelXenable = true;\n                                labelX = data.labels[index];\n                            }\n                        } else {\n                            xValues.push(data.labels[index]);\n                        }\n                    });\n\n                    var yValues = [];\n                    let labelYenable = false;\n                    let labelY = '';\n                    $(data.values).each(function(index) {\n                        if (index === 0 && (type === 'LINECHART' || type === 'SCATTERCHART' || type === 'BARCHART')) {\n                            if (data.values[index].length > 0) {\n                                labelYenable = true;\n                                labelY = data.values[index];\n                            }\n                        } else {\n                            yValues.push(data.values[index]);\n                        }\n                    });\n\n                    // Build options.\n                    let options = {\n                        legend: {display: false},\n                    };\n\n                    // Build title.\n                    var title = $('#' + id + '_titleChart').val();\n                    let titledisplay;\n\n                    if (title.length > 0) {\n                        titledisplay = true;\n                    } else {\n                        titledisplay = false;\n                        title = '';\n                    }\n\n                    options.plugins = {\n                            title: {\n                                display: titledisplay,\n                                text: title\n                            }\n                        };\n\n\n                    // Build scales.\n                    let scales = {\n                        x: {\n                            beginAtZero: true,\n                            title: {\n                                display: labelXenable,\n                                text: labelX\n                            }\n                        },\n\n                        y: {\n                            beginAtZero: true,\n                            title: {\n                                display: labelYenable,\n                                text: labelY\n                            }\n                        }\n                    };\n\n                    switch (type) {\n                        case 'BARCHART':\n                            charttype = \"bar\";\n                            options.scales = scales;\n                            break;\n                        case 'PIECHART':\n                            charttype = \"pie\";\n                            break;\n                        case 'DOUGHNUTCHART':\n                            charttype = \"doughnut\";\n                            break;\n                        case 'LINECHART':\n                            charttype = \"line\";\n                            backgroundColor = \"rgba(0,0,0,0)\";\n                            borderColor = \"rgba(0,0,0,1)\";\n                            options.scales = scales;\n                            break;\n                        case 'SCATTERCHART':\n                            charttype = \"scatter\";\n                            backgroundColor = \"rgba(0,0,0,1)\";\n                            borderColor = \"rgba(0,0,0,1)\";\n                            options.scales = scales;\n                            break;\n                    }\n\n                    let dataChart = {\n                        labels: xValues,\n                        datasets: [{\n                            borderColor: borderColor,\n                            backgroundColor: backgroundColor,\n                            data: yValues,\n                        }]\n                    };\n\n                    if (type === 'SCATTERCHART') {\n\n                        var xyValues = [];\n\n                        $(xValues).each(function(index) {\n                            xyValues.push({'x': xValues[index], 'y': yValues[index]});\n                        });\n\n                        dataChart = {\n                            datasets: [{\n                                pointRadius: 4,\n                                pointBackgroundColor: \"rgba(0, 0, 0, 1)\",\n                                showLine: true,\n                                backgroundColor: 'rgb(0,0,0,0)',\n                                data: xyValues\n                            }]\n                        };\n                    }\n\n                    let classname = 'myChart' + id;\n\n                    if (window[classname] !== undefined) {\n                        window[classname].destroy();\n                    }\n\n                    window[classname] = new ChartJS(id + \"_externalChart\", {\n                        type: charttype,\n                        data: dataChart,\n                        options: options\n                    });\n                }\n\n            }, 500);\n\n        },\n\n    };\n});\n"],"names":["define","$","Str","Notification","ChartJS","init","id","refresh","keyup","e","keyCode","val","select","change","find","this","click","typeChart","setInterval","hide","parent","show","data","JSON","parse","type","charttype","backgroundColor","borderColor","xValues","labelXenable","labelX","labels","each","index","push","length","yValues","labelYenable","labelY","values","options","legend","display","title","titledisplay","plugins","text","scales","x","beginAtZero","y","dataChart","datasets","xyValues","pointRadius","pointBackgroundColor","showLine","classname","undefined","window","destroy"],"mappings":"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"}