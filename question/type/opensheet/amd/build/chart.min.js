define("qtype_opensheet/chart",["jquery","core/str","core/notification","core/chartjs-lazy"],(function($,Str,Notification,ChartJS){return{init:function(id){let refresh=$("#"+id+"_refreshChart");$("#"+id+"_titleChart").keyup((function(e){13===e.keyCode&&refresh.val("1")}));var select=$("#"+id+"_selectChart");select.change((function(){$("#"+id).find(".class_"+$(this).val()).click()}));var typeChart=$("#"+id+"_typeChart").val();select.val(typeChart),setInterval((function(){if("1"===refresh.val()){refresh.val(0),$("#"+id+"_defaultImage").hide(),$("#"+id+"_externalChart").parent().show();let data=JSON.parse($("#"+id+"_dataChart").val());let type=$("#"+id+"_typeChart").val(),charttype="bar",backgroundColor=["red","green","blue","orange","brown","#b91d47","#00aba9","#2b5797","#e8c3b9","#1e7145"],borderColor="rgba(0,0,0,0)";var xValues=[];let labelXenable=!1,labelX="";$(data.labels).each((function(index){0!==index||"LINECHART"!==type&&"SCATTERCHART"!==type&&"BARCHART"!==type?xValues.push(data.labels[index]):data.labels[index].length>0&&(labelXenable=!0,labelX=data.labels[index])}));var yValues=[];let labelYenable=!1,labelY="";$(data.values).each((function(index){0!==index||"LINECHART"!==type&&"SCATTERCHART"!==type&&"BARCHART"!==type?yValues.push(data.values[index]):data.values[index].length>0&&(labelYenable=!0,labelY=data.values[index])}));let options={legend:{display:!1}};var title=$("#"+id+"_titleChart").val();let titledisplay;title.length>0?titledisplay=!0:(titledisplay=!1,title=""),options.plugins={title:{display:titledisplay,text:title}};let scales={x:{beginAtZero:!0,title:{display:labelXenable,text:labelX}},y:{beginAtZero:!0,title:{display:labelYenable,text:labelY}}};switch(type){case"BARCHART":charttype="bar",options.scales=scales;break;case"PIECHART":charttype="pie";break;case"DOUGHNUTCHART":charttype="doughnut";break;case"LINECHART":charttype="line",backgroundColor="rgba(0,0,0,0)",borderColor="rgba(0,0,0,1)",options.scales=scales;break;case"SCATTERCHART":charttype="scatter",backgroundColor="rgba(0,0,0,1)",borderColor="rgba(0,0,0,1)",options.scales=scales}let dataChart={labels:xValues,datasets:[{borderColor:borderColor,backgroundColor:backgroundColor,data:yValues}]};if("SCATTERCHART"===type){var xyValues=[];$(xValues).each((function(index){xyValues.push({x:xValues[index],y:yValues[index]})})),dataChart={datasets:[{pointRadius:4,pointBackgroundColor:"rgba(0, 0, 0, 1)",showLine:!0,backgroundColor:"rgb(0,0,0,0)",data:xyValues}]}}let classname="myChart"+id;void 0!==window[classname]&&window[classname].destroy(),window[classname]=new ChartJS(id+"_externalChart",{type:charttype,data:dataChart,options:options})}}),500)}}}));

//# sourceMappingURL=chart.min.js.map