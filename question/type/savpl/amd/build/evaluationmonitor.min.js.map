{"version":3,"file":"evaluationmonitor.min.js","sources":["../src/evaluationmonitor.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\r\n//\r\n// VPL for Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// VPL for Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Evaluation monitoring\r\n *\r\n * @copyright 2013 onward Juan Carlos Rodríguez-del-Pino\r\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\r\n */\r\n\r\ndefine(['qtype_savpl/vplui'], function(VPLUI) {\r\n    return {\r\n        init: function(options) {\r\n            options.next = function() {\r\n                window.location = options.nexturl;\r\n            };\r\n            /**\r\n             * Show a error message in a modal dialog.\r\n             * Allows to go next evaluation.\r\n             *\r\n             * @param {string} message Message to shohw in dialog.\r\n             */\r\n            function showErrorMessage(message) {\r\n                VPLUI.showErrorMessage(message, {\r\n                    next: options.next\r\n                });\r\n            }\r\n            var action;\r\n            var executionActions = {\r\n                'ajaxurl': options.ajaxurl,\r\n                'run': showErrorMessage,\r\n                'getLastAction': function() {\r\n                    action();\r\n                },\r\n            };\r\n            action = function() {\r\n                VPLUI.requestAction('evaluate', 'evaluating', {}, options.ajaxurl)\r\n                .done(\r\n                        function(response) {\r\n                            VPLUI.webSocketMonitor(response, 'evaluate', 'evaluating', executionActions)\r\n                            .done(options.next)\r\n                            .fail(showErrorMessage);\r\n                        }\r\n                )\r\n                .fail(showErrorMessage);\r\n            };\r\n            action();\r\n        }\r\n    };\r\n});\r\n"],"names":["define","VPLUI","init","options","showErrorMessage","message","next","action","window","location","nexturl","executionActions","ajaxurl","run","getLastAction","requestAction","done","response","webSocketMonitor","fail"],"mappings":";;;;;;;AAuBAA,uCAAO,CAAC,sBAAsB,SAASC,OACnC,MAAO,CACHC,KAAM,SAASC,SAUX,SAASC,iBAAiBC,SACtBJ,MAAMG,iBAAiBC,QAAS,CAC5BC,KAAMH,QAAQG,OAGtB,IAAIC,OAdJJ,QAAQG,KAAO,WACXE,OAAOC,SAAWN,QAAQO,SAc9B,IAAIC,iBAAmB,CACnBC,QAAWT,QAAQS,QACnBC,IAAOT,iBACPU,cAAiB,WACbP,YAGRA,OAAS,WACLN,MAAMc,cAAc,WAAY,aAAc,GAAIZ,QAAQS,SACzDI,MACO,SAASC,UACLhB,MAAMiB,iBAAiBD,SAAU,WAAY,aAAcN,kBAC1DK,KAAKb,QAAQG,MACba,KAAKf,qBAGjBe,KAAKf,uBAKtB"}