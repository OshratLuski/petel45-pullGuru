define("qtype_gapfill/dragdrop",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=singleuse=>{Window.singleuse=singleuse;var draggables=document.querySelectorAll('span[class*="draggable"]');function dragShow(that){var targetVal=(that.classList.contains("droptarget")?that:that.closest(".droptarget")).nextElementSibling.value;draggables.forEach((function(e){e.innerText.trim()===targetVal.trim()&&e.classList.remove("hide")}))}function drop(e){dragShow(this),e.stopPropagation(),e.preventDefault();const dropTarget=e.currentTarget.classList.contains("droptarget")?e.currentTarget:e.currentTarget.closest(".droptarget"),parent=dropTarget.closest(".droptarget-wrapper");parent.querySelector("input").setAttribute("value",e.dataTransfer.getData("text/plain")),dropTarget.dataset.contentValue=e.dataTransfer.getData("content"),dropTarget.innerHTML=e.dataTransfer.getData("content");var sourceId=e.dataTransfer.getData("sourceId"),sourceEl=document.getElementById(sourceId);sourceEl.offsetWidth>parent.offsetWidth&&(parent.style.width=sourceEl.offsetWidth+10+"px"),Window.singleuse&&(sourceEl.classList.add("hide"),e.preventDefault()),e.preventDefault()}function dragStart(e){e.dataTransfer.setData("text/plain",e.target.innerText),e.dataTransfer.setData("content",e.target.innerHTML),e.dataTransfer.setData("sourceId",this.id),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"}draggables.forEach((function(e){e.addEventListener("dragstart",dragStart)})),document.querySelectorAll("span.droptarget").forEach((function(el){if(el.addEventListener("dblclick",(function(){Window.singleuse&&dragShow(this);const dropTarget=this.classList.contains("droptarget")?this:this.closest(".droptarget");dropTarget.closest(".droptarget-wrapper").querySelector("input").setAttribute("value",""),dropTarget.dataset.contentValue="",dropTarget.innerHTML=""})),el.addEventListener("drop",drop),el.innerHTML.length>0){const width=parseInt(el.offsetWidth);width>parseInt(el.closest(".droptarget-wrapper").offsetWidth)&&(el.closest(".droptarget-wrapper").style.width=width+"px")}})),document.addEventListener("dragover",(function(e){e.preventDefault()}));let temp={};if(/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){const dragableAnswers=document.querySelectorAll(".draggable.answers"),droptargets=document.querySelectorAll(".droptarget-wrapper");dragableAnswers.forEach((function(el){el.addEventListener("click",(e=>{return target=e.currentTarget,temp.innerText=target.innerText,temp.content=target.innerHTML,temp.sourceId=target.id,temp.elWidth=target.offsetWidth,void target.classList.add("bg-info");var target}))})),droptargets.forEach((function(el){el.addEventListener("click",(e=>function(target){if(Object.keys(temp).length>0){const dropTargetInput=target.querySelector("input"),droptarget=target.querySelector(".droptarget"),sourceEl=document.getElementById(temp.sourceId);dropTargetInput.value=temp.innerText,dropTargetInput.dataset.contentValue=temp.content,droptarget.innerHTML=temp.content,sourceEl.classList.remove("bg-info"),temp.elWidth>dropTargetInput.offsetWidth&&(dropTargetInput.style.width=temp.elWidth+10+"px"),Window.singleuse&&sourceEl.classList.add("hide")}temp={}}(e.currentTarget)))}))}}}));

//# sourceMappingURL=dragdrop.min.js.map