/**
 * Javascript for lazy load of statuses.
 *
 * @package
 * @copyright  2020 Devlion <info@devlion.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("quiz_assessmentdiscussion/preview",["jquery","core/ajax","quiz_assessmentdiscussion/inview","core/notification"],(function($,Ajax,inView,Notification){return{inview:function(){let attempts=[];inView(".inview_preview").on("enter",(function(e){if(!$(e).hasClass("inview-done")){let tmp={attemptid:$(e).attr("data-attemptid"),qid:$(e).attr("data-qid"),cmid:$(e).attr("data-cmid"),slot:$(e).attr("data-slot")};attempts.push(tmp),$(e).addClass("inview-done");let spinner='<div class="spinner-border" style="display: block; margin-left: auto; margin-right: auto;" role="status"><span class="sr-only"></span></div>';$(e).html(spinner)}})),setInterval((function(){attempts.length>0&&(!function(attempts){attempts.length>0&&Ajax.call([{methodname:"quiz_assessmentdiscussion_preview",args:{attempts:JSON.stringify(attempts)},done:function(resp){JSON.parse(resp.data).forEach((function(item){$("#preview_answer_block_"+item.attemptid).html(item.html),$("#preview_overlay_block_"+item.attemptid).html(item.html)}))},fail:Notification.exception}])}(attempts),attempts=[])}),500)}}}));

//# sourceMappingURL=preview.min.js.map