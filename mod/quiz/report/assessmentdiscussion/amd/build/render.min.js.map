{"version":3,"file":"render.min.js","sources":["../src/render.js"],"sourcesContent":["define([\r\n        'jquery',\r\n        'core/str',\r\n        'core/templates',\r\n        'core/notification',\r\n        'core/ajax',\r\n        'quiz_assessmentdiscussion/preset',\r\n        'quiz_assessmentdiscussion/loading',\r\n    ],\r\n    function ($, Str, Templates, Notification, Ajax, Preset, Loading) {\r\n\r\n        let DASHBOARD = {\r\n            main: '.block_assessmentdiscussion_report',\r\n            mainTabs: '.block_assessmentdiscussion_report #questionsTabs',\r\n\r\n        };\r\n\r\n        let ASIDE = {\r\n            questionlist: '.block_assessmentdiscussion_report .question-block-wrapper',\r\n        };\r\n\r\n        let ANSWERSAREA = {\r\n            main: '.block_assessmentdiscussion_report .answer-block-wrapper',\r\n            tabs: '.block_assessmentdiscussion_report .answers-tabs-wrapper',\r\n            attempts: '.block_assessmentdiscussion_report .attepts-area-wrapper',\r\n        };\r\n\r\n        return {\r\n\r\n            'dashboard': function (callback) {\r\n\r\n                let preset = Preset.get();\r\n\r\n                Ajax.call([{\r\n                    methodname: 'quiz_assessmentdiscussion_render_main_block',\r\n                    args: {\r\n                        'cmid' : preset.cmid,\r\n                        'groupid' : preset.groupid,\r\n                        'tabid' : preset.dashboard_tab,\r\n                        'anonymousmode' : preset.anonymous_mode,\r\n                    },\r\n                    done: function (response) {\r\n\r\n                        let data = JSON.parse(response.data);\r\n\r\n                        Templates.render('quiz_assessmentdiscussion/dashboard/main', data)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents(DASHBOARD.main, html, js);\r\n\r\n                                callback(data);\r\n                            })\r\n                            .fail(function (response) {\r\n                                Loading.remove();\r\n                                Notification.exception(response);\r\n                            });\r\n                    },\r\n                    fail: function (response) {\r\n                        Loading.remove();\r\n                        Notification.exception(response);\r\n                    },\r\n                }]);\r\n\r\n                return true;\r\n            },\r\n\r\n            'dashboard_tabs': function (callback) {\r\n\r\n                let preset = Preset.get();\r\n\r\n                Ajax.call([{\r\n                    methodname: 'quiz_assessmentdiscussion_render_main_block',\r\n                    args: {\r\n                        'cmid' : preset.cmid,\r\n                        'groupid' : preset.groupid,\r\n                        'tabid' : preset.dashboard_tab,\r\n                        'anonymousmode' : preset.anonymous_mode,\r\n                    },\r\n                    done: function (response) {\r\n\r\n                        let data = JSON.parse(response.data);\r\n\r\n                        Templates.render('quiz_assessmentdiscussion/dashboard/tabs', data)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents(DASHBOARD.mainTabs, html, js);\r\n\r\n                                callback(data);\r\n                            })\r\n                            .fail(function (response) {\r\n                                Loading.remove();\r\n                                Notification.exception(response);\r\n                            });\r\n                    },\r\n                    fail: function (response) {\r\n                        Loading.remove();\r\n                        Notification.exception(response);\r\n                    },\r\n                }]);\r\n\r\n                return true;\r\n            },\r\n\r\n            'aside_questions': function (callback) {\r\n\r\n                let preset = Preset.get();\r\n\r\n                Ajax.call([{\r\n                    methodname: 'quiz_assessmentdiscussion_render_main_block',\r\n                    args: {\r\n                        'cmid' : preset.cmid,\r\n                        'groupid' : preset.groupid,\r\n                        'tabid' : preset.dashboard_tab,\r\n                        'anonymousmode' : preset.anonymous_mode,\r\n                        'sort' : preset.sort_question,\r\n                    },\r\n                    done: function (response) {\r\n\r\n                        let data = JSON.parse(response.data);\r\n\r\n                        Templates.render('quiz_assessmentdiscussion/aside/questionlist', data)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents(ASIDE.questionlist, html, js);\r\n\r\n                                callback(data);\r\n                            })\r\n                            .fail(function (response) {\r\n                                Loading.remove();\r\n                                Notification.exception(response);\r\n                            });\r\n                    },\r\n                    fail: function (response) {\r\n                        Loading.remove();\r\n                        Notification.exception(response);\r\n                    },\r\n                }]);\r\n\r\n                return true;\r\n            },\r\n\r\n            'answers_area': function (defstate, callback) {\r\n\r\n                $(ANSWERSAREA.main).hide();\r\n\r\n                let preset = Preset.get();\r\n\r\n                if (defstate) {\r\n                    Preset.set('answers_tab', preset.answers_tab_default);\r\n                    Preset.set('sort_answers', preset.sort_answers_default);\r\n\r\n                    preset = Preset.get();\r\n                }\r\n\r\n                Ajax.call([{\r\n                    methodname: 'quiz_assessmentdiscussion_render_answer_area_block',\r\n                    args: {\r\n                        'cmid' : preset.cmid,\r\n                        'groupid' : preset.groupid,\r\n                        'qid' : preset.qid,\r\n                        'anonymousmode' : preset.anonymous_mode,\r\n                        'sort' : preset.sort_answers,\r\n                        'tabid' : preset.answers_tab,\r\n                    },\r\n                    done: function (response) {\r\n\r\n                        let data = JSON.parse(response.data);\r\n\r\n                        Templates.render('quiz_assessmentdiscussion/answersarea/main', data)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents(ANSWERSAREA.main, html, js);\r\n                                $(ANSWERSAREA.main).show();\r\n\r\n                                callback(data);\r\n                            })\r\n                            .fail(function (response) {\r\n                                Loading.remove();\r\n                                $(ANSWERSAREA.main).show();\r\n                                Notification.exception(response);\r\n                            });\r\n                    },\r\n                    fail: function (response) {\r\n                        Loading.remove();\r\n                        $(ANSWERSAREA.main).show();\r\n                        Notification.exception(response);\r\n                    },\r\n                }]);\r\n\r\n                return true;\r\n            },\r\n\r\n            'answers_tabs': function (callback) {\r\n\r\n                let preset = Preset.get();\r\n\r\n                Ajax.call([{\r\n                    methodname: 'quiz_assessmentdiscussion_render_answer_area_block',\r\n                    args: {\r\n                        'cmid' : preset.cmid,\r\n                        'groupid' : preset.groupid,\r\n                        'qid' : preset.qid,\r\n                        'anonymousmode' : preset.anonymous_mode,\r\n                        'sort' : preset.sort_answers,\r\n                        'tabid' : preset.answers_tab,\r\n                    },\r\n                    done: function (response) {\r\n\r\n                        let data = JSON.parse(response.data);\r\n\r\n                        Templates.render('quiz_assessmentdiscussion/answersarea/tabs', data)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents(ANSWERSAREA.tabs, html, js);\r\n\r\n                                callback(data);\r\n                            })\r\n                            .fail(function (response) {\r\n                                Loading.remove();\r\n                                $(ANSWERSAREA.main).show();\r\n                                Notification.exception(response);\r\n                            });\r\n                    },\r\n                    fail: function (response) {\r\n                        Loading.remove();\r\n                        $(ANSWERSAREA.main).show();\r\n                        Notification.exception(response);\r\n                    },\r\n                }]);\r\n\r\n                return true;\r\n            },\r\n\r\n            'attempts_area': function (callback) {\r\n\r\n                let preset = Preset.get();\r\n\r\n                Ajax.call([{\r\n                    methodname: 'quiz_assessmentdiscussion_render_answer_area_block',\r\n                    args: {\r\n                        'cmid' : preset.cmid,\r\n                        'groupid' : preset.groupid,\r\n                        'qid' : preset.qid,\r\n                        'anonymousmode' : preset.anonymous_mode,\r\n                        'sort' : preset.sort_answers,\r\n                        'tabid' : preset.answers_tab,\r\n                    },\r\n                    done: function (response) {\r\n\r\n                        let data = JSON.parse(response.data);\r\n\r\n                        Templates.render('quiz_assessmentdiscussion/answersarea/attempts', data)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents(ANSWERSAREA.attempts, html, js);\r\n\r\n                                callback(data);\r\n                            })\r\n                            .fail(function (response) {\r\n                                Loading.remove();\r\n                                $(ANSWERSAREA.main).show();\r\n                                Notification.exception(response);\r\n                            });\r\n                    },\r\n                    fail: function (response) {\r\n                        Loading.remove();\r\n                        $(ANSWERSAREA.main).show();\r\n                        Notification.exception(response);\r\n                    },\r\n                }]);\r\n\r\n                return true;\r\n            },\r\n\r\n            'overlay_dashboard': function (callback) {\r\n\r\n                let preset = Preset.get();\r\n\r\n                Ajax.call([{\r\n                    methodname: 'quiz_assessmentdiscussion_render_overlay_block',\r\n                    args: {\r\n                        'cmid' : preset.cmid,\r\n                        'qid' : preset.overlay_qid,\r\n                        'groupid' : preset.groupid,\r\n                        'tabid' : preset.overlay_tab,\r\n                        'anonymousmode' : preset.anonymous_mode,\r\n                        'viewlist' : preset.overlay_view_list,\r\n                        'showanswers' : preset.overlay_show_answers,\r\n                    },\r\n                    done: function (response) {\r\n\r\n                        let data = JSON.parse(response.data);\r\n\r\n                        Templates.render('quiz_assessmentdiscussion/overlay/main', data)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents('.answeroverlay-parent', html, js);\r\n\r\n                                callback(data);\r\n                            })\r\n                            .fail(function (response) {\r\n                                Loading.remove();\r\n                                Notification.exception(response);\r\n                            });\r\n                    },\r\n                    fail: function (response) {\r\n                        Loading.remove();\r\n                        Notification.exception(response);\r\n                    },\r\n                }]);\r\n\r\n                return true;\r\n            },\r\n        };\r\n    });\r\n"],"names":["define","$","Str","Templates","Notification","Ajax","Preset","Loading","DASHBOARD","ASIDE","ANSWERSAREA","callback","preset","get","call","methodname","args","cmid","groupid","dashboard_tab","anonymous_mode","done","response","data","JSON","parse","render","html","js","replaceNodeContents","fail","remove","exception","sort_question","defstate","hide","set","answers_tab_default","sort_answers_default","qid","sort_answers","answers_tab","show","overlay_qid","overlay_tab","overlay_view_list","overlay_show_answers"],"mappings":"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"}