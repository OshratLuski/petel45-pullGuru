{"version":3,"file":"correctanswer.min.js","sources":["../src/correctanswer.js"],"sourcesContent":["define(['core/ajax', 'jquery', 'core/str'], function(ajax, $, str) {\n    return {\n        init: function() {\n            console.log('Correct Answer module loaded successfully');\n\n            $('[id^=\"toggle-correct-answer-\"]').on('click', function() {\n                const button = $(this);\n                const questionId = button.data('questionid');\n                const isShowingAnswer = button.data('showingAnswer') || false;\n\n                if (!isShowingAnswer) {\n                    // Fetch the correct answer via AJAX\n                    ajax.call([{\n                        methodname: 'quiz_diagnosticstats_get_correctanswer',\n                        args: { questionid: questionId },\n                        done: function(data) {\n                            const correctAnswerId = data.correctAnswerId;\n\n                            // Find the correct radio button by its ID\n                            const correctRadio = $(`#${correctAnswerId}`);\n\n                            if (correctRadio.length) {\n                                correctRadio.prop('checked', true);\n                                correctRadio.closest('div').css('background-color', '#d4edda');\n                                // Save the current answer ID for toggling\n                                button.data('currentAnswerId', correctAnswerId);\n                            } else {\n                                console.warn('Could not locate the radio button for the correct answer.');\n                            }\n\n                            // Update button text to \"Hide Correct Answer\"\n                            str.get_string('hidecorrectanswer', 'quiz_diagnosticstats').then(function(string) {\n                                button.text(string);\n                            });\n\n                            button.data('showingAnswer', true);\n                        },\n                        fail: function(error) {\n                            console.error('Error during AJAX call:', error);\n                        }\n                    }]);\n                } else {\n                    // Hide the correct answer\n                    const currentAnswerId = button.data('currentAnswerId');\n                    if (currentAnswerId) {\n                        const correctRadio = $(`#${currentAnswerId}`);\n                        correctRadio.prop('checked', false);\n                        correctRadio.closest('div').css('background-color', '');\n                    }\n\n                    // Update button text to \"Show Correct Answer\"\n                    str.get_string('showcorrectanswer', 'quiz_diagnosticstats').then(function(string) {\n                        button.text(string);\n                    });\n\n                    button.data('showingAnswer', false);\n                }\n            });\n        }\n    };\n});\n"],"names":["define","ajax","$","str","init","console","log","on","button","this","questionId","data","currentAnswerId","correctRadio","prop","closest","css","get_string","then","string","text","call","methodname","args","questionid","done","correctAnswerId","length","warn","fail","error"],"mappings":"AAAAA,4CAAO,CAAC,YAAa,SAAU,aAAa,SAASC,KAAMC,EAAGC,KAC1D,MAAO,CACHC,KAAM,WACFC,QAAQC,IAAI,6CAEZJ,EAAE,kCAAkCK,GAAG,SAAS,WAC5C,MAAMC,OAASN,EAAEO,MACXC,WAAaF,OAAOG,KAAK,cAG/B,GAFwBH,OAAOG,KAAK,mBAAoB,EAiCjD,CAEH,MAAMC,gBAAkBJ,OAAOG,KAAK,mBACpC,GAAIC,gBAAiB,CACjB,MAAMC,aAAeX,EAAE,IAAIU,mBAC3BC,aAAaC,KAAK,WAAW,GAC7BD,aAAaE,QAAQ,OAAOC,IAAI,mBAAoB,IAIxDb,IAAIc,WAAW,oBAAqB,wBAAwBC,MAAK,SAASC,QACtEX,OAAOY,KAAKD,WAGhBX,OAAOG,KAAK,iBAAiB,QA3C7BV,KAAKoB,KAAK,CAAC,CACPC,WAAY,yCACZC,KAAM,CAAEC,WAAYd,YACpBe,KAAM,SAASd,MACX,MAAMe,gBAAkBf,KAAKe,gBAGvBb,aAAeX,EAAE,IAAIwB,mBAEvBb,aAAac,QACbd,aAAaC,KAAK,WAAW,GAC7BD,aAAaE,QAAQ,OAAOC,IAAI,mBAAoB,WAEpDR,OAAOG,KAAK,kBAAmBe,kBAE/BrB,QAAQuB,KAAK,6DAIjBzB,IAAIc,WAAW,oBAAqB,wBAAwBC,MAAK,SAASC,QACtEX,OAAOY,KAAKD,WAGhBX,OAAOG,KAAK,iBAAiB,IAEjCkB,KAAM,SAASC,OACXzB,QAAQyB,MAAM,0BAA2BA,eAsBrE"}