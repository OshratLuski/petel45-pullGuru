{"version":3,"file":"studentsTableActions.min.js","sources":["../src/studentsTableActions.js"],"sourcesContent":["import $ from 'jquery';\nimport * as Tables from 'quiz_advancedoverview/tables';\nimport Ajax from 'core/ajax';\nimport Notification from 'core/notification';\nimport * as Charts from 'quiz_advancedoverview/charts';\nimport {hideLoadingIcon} from './tables';\n\nexport let anonymousmodestate = 0;\nlet PILLS = {};\nexport let CONFIG = {\n    participants: new Proxy({}, {\n        set(target, key, value) {\n            target[key] = value;\n            regenerateTable();\n            return true;\n        }\n    }),\n    anonymous_mode: 0\n};\n\nexport const changeConfig = (newConfig) => {\n    const participantsProxy = new Proxy(newConfig.participants, {\n        set(target, key, value) {\n            target[key] = value;\n            regenerateTable();\n            return true;\n        }\n    });\n    newConfig.participants = participantsProxy;\n    CONFIG = newConfig;\n};\nexport const showLoadingIcon = () => {\n    document.body.classList.add('petel-loading');\n};\n\nexport const regenerateTable = function(callback = null) {\n    const cmid = $('#datacmid').data('cmid');\n    const groupid = $('#datagroupid').data('groupid');\n\n    Ajax.call([{\n        methodname: 'quiz_advancedoverview_render_dynamic_block',\n        args: {\n            cmid: cmid,\n            groupid: groupid,\n            config: JSON.stringify(CONFIG),\n        },\n        done: function(response) {\n            const data = JSON.parse(response);\n            const dataTableAccordingStudents = data.data_table_according_students;\n            const dataTableStudentsSummary = data.data_table_students_summary;\n            const anon = CONFIG.anonymous_mode;\n\n            Tables.default.initstudentstable(dataTableAccordingStudents, dataTableStudentsSummary, anon);\n            Charts.initcharts(data.charts);\n            if (callback) {\n                callback();\n            }\n            hideLoadingIcon();\n\n        },\n        fail: Notification.exception\n    }]);\n};\n\nexport const setStatesFromConfig = function() {\n    const state = CONFIG.anonymous_mode;\n    if (!document.getElementById('anonymousStripe')) {\n        createAnonymousStripe();\n    }\n    if (+state == 1) {\n        $('#anonymousStripe').removeClass('hidden');\n        $('#anonymousStripe').attr('style', 'top:' + $('nav.navbar-petel').outerHeight() + 'px');\n        let stateText = $('#anonymousmodeToggler1').closest('.advancedoverview_report-toggle').data('texton');\n        $('.advancedoverview_report-toggle.anonymousmode').each(function(index) {\n            $('.advancedoverview_report-toggle.anonymousmode').eq(index).find('.link-btn-text').html(stateText);\n        });\n        $(\"#anonymousmodeToggler1, #anonymousmodeToggler2, #anonymousmodeToggler3\").prop('checked', true);\n    } else {\n        $('#anonymousStripe').addClass('hidden');\n        let stateText = $('#anonymousmodeToggler1').closest('.advancedoverview_report-toggle').data('textoff');\n        $('.advancedoverview_report-toggle.anonymousmode').each(function(index) {\n            $('.advancedoverview_report-toggle.anonymousmode').eq(index).find('.link-btn-text').html(stateText);\n        });\n        $(\"#anonymousmodeToggler1, #anonymousmodeToggler2, #anonymousmodeToggler3\").prop('checked', false);\n    }\n    if (CONFIG.participants.states) {\n        $('#studentstableNavFilter').find(`[data-name=\"${CONFIG.participants.states[0]}\"]`)\n        .addClass('active').attr('aria-pressed', 'true');\n    } else {\n        $('#studentstableNavFilter').find('.nav.nav-tabs .nav-link').first().addClass('active').attr('aria-pressed', 'true');\n    }\n\n    // Set Extended view toggle.\n    const fullViewState = (CONFIG.participants.full_view === 0) ? false : true;\n\n    $('#extendedViewToggler')[0].checked = fullViewState;\n\n};\n\nconst createAnonymousStripe = () => {\n    if (!document.getElementById('anonymousStripe')) {\n        const stripeContent = `\n            <div class=\"d-flex align-items-center advancedoverview_report-toggle anonymousmode\">\n                <input type=\"checkbox\" id=\"anonymousmodeToggler3\" class=\"toggle-btn d-none\">\n                <label for=\"anonymousmodeToggler3\" class=\"mb-0 anonymousmodeToggler d-none\"> </label>\n                <span class=\"link-btn-text ml-3\"></span>\n            </div>\n            <i class=\"fas fa-user-secret ml-4\"></i>\n            `;\n\n        const navbar = document.querySelector('nav.navbar');\n        const stripeElement = document.createElement('div');\n        stripeElement.classList.add('sticky-stripe', 'align-items-center', 'justify-content-center', 'yellow', 'hidden');\n        stripeElement.id = 'anonymousStripe';\n        stripeElement.innerHTML = stripeContent;\n        navbar.insertAdjacentElement('afterbegin', stripeElement);\n    }\n};\n\n\nconst addPill = (data, target) => {\n    const template = document.createElement('a');\n    template.innerHTML = data.text;\n    template.classList.add('pill', 'badge', 'badge-light', 'm-1', 'p-2');\n    template.setAttribute('id', 'pill' + data.id);\n    template.setAttribute('data-id', data.id);\n    template.setAttribute('role', 'button');\n    template.setAttribute('data-pilltype', data.type);\n\n    const closeIcon = document.createElement('i');\n    closeIcon.classList.add('fa', 'fa-times', 'pl-2');\n    closeIcon.setAttribute('data-id', data.id);\n    closeIcon.setAttribute('aria-hidden', 'true');\n    template.appendChild(closeIcon);\n\n    target[0].appendChild(template);\n    $('#clearPillsArea').show();\n};\n\nconst removePillByClick = (target) => {\n    if (target.classList.contains('pill') || target.closest('.pill.badge')) {\n        let id = target.dataset.id || target.closest('.pill.badge').dataset.id;\n        let pilltype = target.dataset.pilltype || target.closest('.pill.badge').dataset.pilltype;\n        removePill(id, pilltype);\n    }\n};\n\nconst removePill = (id, pilltype) => {\n    const element = document.querySelector(`[data-id=\"${id}\"]`);\n\n    $('#studentsActionsCollapse input[type=\"checkbox\"]').each((i) => {\n        if ($('#studentsActionsCollapse input[type=\"checkbox\"]')[i].id === id) {\n\n            if (pilltype !== undefined) {\n                $('#studentsActionsCollapse input[type=\"checkbox\"]')[i].checked = true;\n                $('#studentsActionsCollapse input[type=\"checkbox\"]').eq(i).trigger('click');\n            } else {\n                $('#studentsActionsCollapse input[type=\"checkbox\"]')[i].checked = false;\n                element.remove();\n                delete PILLS[id];\n            }\n            CONFIG.pills = PILLS;\n        }\n    });\n\n    // Remove pill helper.\n    if (pilltype === 'helper_cells') {\n\n        element.remove();\n        delete PILLS[id];\n\n        if (Object.keys(PILLS).length > 0) {\n            $('#clearPillsArea').show();\n        } else {\n            $('#clearPillsArea').hide();\n        }\n\n        showLoadingIcon();\n\n        CONFIG.pills = PILLS;\n        CONFIG.participants.helper_cells = [];\n    }\n};\n\nconst removeAllPills = (e) => {\n    e.preventDefault();\n    for (const key in PILLS) {\n        delete PILLS[key];\n    }\n    $('#studentsActionsCollapse input[type=\"checkbox\"]').each((i) => {\n        $('#studentsActionsCollapse input[type=\"checkbox\"]')[i].checked = false;\n    });\n    $('#pillsAreaInner').empty();\n    $('#clearPillsArea').hide();\n\n\n    // Clear config.\n    let oldConfig = CONFIG;\n\n    let currentConfig = {\n        'states': oldConfig.participants.states,\n        'full_view': oldConfig.participants.full_view,\n        'show_score': oldConfig.participants.show_score\n    };\n    CONFIG = {\n        participants: new Proxy(currentConfig, {\n            set(target, key, value) {\n                target[key] = value;\n                regenerateTable();\n                return true;\n            }\n        }),\n        anonymous_mode: oldConfig.anonymous_mode\n    };\n\n    CONFIG.pills = PILLS;\n\n    showLoadingIcon();\n    regenerateTable();\n};\n\nexport const showPills = (confObj) => {\n    const pillsObj = confObj.pills;\n    if (pillsObj && Object.keys(pillsObj).length > 0) {\n        PILLS = confObj.pills;\n        let pillsId = [];\n\n        for (const pill in pillsObj) {\n            const pillData = pillsObj[pill].pilldata;\n            pillsId.push(pillData.id);\n            addPill(pillData, $('#pillsAreaInner'));\n        }\n        if (Object.keys(PILLS).length > 0) {\n            $('#clearPillsArea').show();\n        } else {\n            $('#clearPillsArea').hide();\n        }\n        pillsId.forEach(id => {\n            document.querySelectorAll('#studentsActionsCollapse input[type=\"checkbox\"]').forEach((el) => {\n                if (el.id === id) {\n                    el.setAttribute('checked', true);\n                    el.checked = true;\n                }\n            });\n        });\n\n        $('#studentsActionsCollapse').collapse('show');\n    }\n};\n\n\n$(document).on('change', '#studentsActionsCollapse input[type=\"checkbox\"]', function(e) {\n\n    const data = {\n        text: e.target.dataset.label,\n        id: e.target.id,\n        type: e.target.dataset.type\n    };\n\n    if (PILLS[data.id]) {\n        removePill(data.id);\n    } else {\n        PILLS[data.id] = {};\n        PILLS[data.id].type = data.type;\n        PILLS[data.id].text = data.text;\n        PILLS[data.id].pilldata = {\n            text: e.target.dataset.label,\n            id: e.target.id,\n            type: e.target.dataset.type\n        };\n        addPill(data, $('#pillsAreaInner'));\n    }\n    if (Object.keys(PILLS).length > 0) {\n        $('#clearPillsArea').show();\n    } else {\n        $('#clearPillsArea').hide();\n    }\n    CONFIG.pills = PILLS;\n\n});\n\n$(document).on('click', '#pillsAreaInner', function(e) {\n    removePillByClick(e.target);\n});\n\n$(document).on('click', '#clearPillsArea', function(e) {\n    removeAllPills(e);\n});\n\nexport const init = function() {\n    // Add anonymous mode sticky stripe.\n    createAnonymousStripe();\n\n    // Change partisipiants filter.\n    $(document).on('click', '#studentstableNavFilter .nav-link', function(e) {\n        let target = $(e.currentTarget);\n        let name = target.data('name');\n        CONFIG.participants.states = [name];\n        showLoadingIcon();\n    });\n\n    // Change scores range.\n    $(document).on('change', '#studentsActionsCollapse .custom-control-input[data-type=\"score_ranges\"]', function(e) {\n        let target = $(e.currentTarget).closest('.col');\n        let score_ranges = [];\n        let checkboxes = target.find('input:checked');\n        checkboxes.each((i) => score_ranges.push(checkboxes[i].value));\n        CONFIG.participants.score_ranges = score_ranges;\n        showLoadingIcon();\n    });\n\n    // Change attempts range.\n    $(document).on('change', '#studentsActionsCollapse .custom-control-input[data-type=\"attempts_range\"]', function(e) {\n        let target = $(e.currentTarget).closest('.col');\n        let attempts_range = [];\n        let checkboxes = target.find('input:checked');\n        checkboxes.each((i) => attempts_range.push(checkboxes[i].value));\n        CONFIG.participants.attempts_range = attempts_range;\n        showLoadingIcon();\n    });\n\n    // Click helper cells.\n    setTimeout(function() {\n\n        $(document).on('click', '#questions-table [data-action=\"helper-cells\"]', function(e) {\n\n            // Clear config.\n            let oldConfig = CONFIG;\n\n            let currentConfig = {\n                'states': oldConfig.participants.states,\n                'full_view': oldConfig.participants.full_view,\n                'show_score': oldConfig.participants.show_score\n            };\n            CONFIG = {\n                participants: new Proxy(currentConfig, {\n                    set(target, key, value) {\n                        target[key] = value;\n                        regenerateTable();\n                        return true;\n                    }\n                }),\n                anonymous_mode: oldConfig.anonymous_mode\n            };\n\n            // Clear pills.\n            for (const key in PILLS) {\n                delete PILLS[key];\n            }\n\n            CONFIG.pills = PILLS;\n\n            // Get data.\n            let type = $(e.currentTarget).data('type');\n            let questionid = $(e.currentTarget).data('questionid');\n            let title = $(e.currentTarget).data('title');\n\n            let helper_cells = [];\n            helper_cells.push({'type': type, 'questionid': questionid});\n\n            CONFIG.participants.helper_cells = helper_cells;\n            showLoadingIcon();\n\n            // Remove selected.\n            $('#studentsActionsCollapse input[type=\"checkbox\"]').each((i) => {\n                $('#studentsActionsCollapse input[type=\"checkbox\"]')[i].checked = false;\n            });\n\n            $('#pillsAreaInner').empty();\n            $('#clearPillsArea').hide();\n\n            // Create pill.\n            const data = {\n                text: title,\n                id: 'helper_cells_1',\n                type: 'helper_cells'\n            };\n\n            if (PILLS[data.id]) {\n                removePill(data.id);\n            } else {\n                PILLS[data.id] = {};\n                PILLS[data.id].type = data.type;\n                PILLS[data.id].text = data.text;\n                PILLS[data.id].pilldata = {\n                    text: data.text,\n                    id: data.id,\n                    type: data.type\n                };\n                addPill(data, $('#pillsAreaInner'));\n            }\n\n            if (Object.keys(PILLS).length > 0) {\n                $('#clearPillsArea').show();\n            } else {\n                $('#clearPillsArea').hide();\n            }\n\n            setTimeout(function() {\n                document.getElementById(\"pillsArea\").scrollIntoView();\n            }, 500);\n\n        });\n\n    }, 3000);\n\n    // Search.\n    $(document).on('keyup', '#searchinput', function() {\n        let searchValue = $(this).val().trim();\n        if (searchValue.length >= 1 || searchValue === '') {\n            CONFIG.participants.search = searchValue;\n            showLoadingIcon();\n        }\n    });\n    // Anonymous mode.\n    $(document).on('change', '#anonymousmodeToggler1, #anonymousmodeToggler2, #anonymousmodeToggler3', function() {\n        const state = $(this).prop('checked');\n        $(\"#anonymousmodeToggler1, #anonymousmodeToggler2, #anonymousmodeToggler3\").prop('checked', state);\n        CONFIG.anonymous_mode = state ? 1 : 0;\n        showLoadingIcon();\n        regenerateTable();\n        setStatesFromConfig();\n\n        //111localstorage\n        localStorage.setItem('anonymousState', state ? '1' : '0');\n\n    });\n\n    window.addEventListener('storage', (event) => {\n        if (event.key === 'anonymousState') {\n            const isAnonymous = event.newValue === '1';\n            updateUIForAnonymousState(isAnonymous);\n        }\n    });\n\n    const updateUIForAnonymousState = (isAnonymous) => {\n        $(\"#anonymousmodeToggler1, #anonymousmodeToggler2, #anonymousmodeToggler3\").prop('checked', isAnonymous);\n\n        CONFIG.anonymous_mode = isAnonymous ? 1 : 0;\n\n        showLoadingIcon();\n        regenerateTable();\n\n        if (!document.getElementById('anonymousStripe')) {\n            createAnonymousStripe();\n        }\n        if (isAnonymous == 1) {\n            $('#anonymousStripe').removeClass('hidden');\n            $('#anonymousStripe').attr('style', 'top:' + $('nav.navbar-petel').outerHeight() + 'px');\n            let stateText = $('#anonymousmodeToggler1').closest('.advancedoverview_report-toggle').data('texton');\n            $('.advancedoverview_report-toggle.anonymousmode').each(function(index) {\n                $('.advancedoverview_report-toggle.anonymousmode').eq(index).find('.link-btn-text').html(stateText);\n            });\n            $(\"#anonymousmodeToggler1, #anonymousmodeToggler2, #anonymousmodeToggler3\").prop('checked', true);\n        } else {\n            $('#anonymousStripe').addClass('hidden');\n            let stateText = $('#anonymousmodeToggler1').closest('.advancedoverview_report-toggle').data('textoff');\n            $('.advancedoverview_report-toggle.anonymousmode').each(function(index) {\n                $('.advancedoverview_report-toggle.anonymousmode').eq(index).find('.link-btn-text').html(stateText);\n            });\n            $(\"#anonymousmodeToggler1, #anonymousmodeToggler2, #anonymousmodeToggler3\").prop('checked', false);\n        }\n\n    };\n    setStatesFromConfig();\n};"],"names":["_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireDefault","_jquery","Tables","_ajax","_notification","Charts","_exports","anonymousmodestate","PILLS","CONFIG","participants","Proxy","target","value","regenerateTable","anonymous_mode","changeConfig","newConfig","participantsProxy","showLoadingIcon","document","body","classList","add","callback","arguments","length","undefined","cmid","$","data","groupid","Ajax","methodname","args","config","JSON","stringify","done","response","parse","dataTableAccordingStudents","data_table_according_students","dataTableStudentsSummary","data_table_students_summary","anon","initstudentstable","initcharts","charts","hideLoadingIcon","fail","Notification","exception","setStatesFromConfig","state","getElementById","createAnonymousStripe","removeClass","attr","outerHeight","stateText","closest","each","index","eq","find","html","prop","addClass","states","first","fullViewState","full_view","checked","stripeContent","navbar","querySelector","stripeElement","createElement","id","innerHTML","insertAdjacentElement","addPill","template","text","setAttribute","type","closeIcon","appendChild","show","removePill","pilltype","element","i","trigger","remove","pills","keys","hide","helper_cells","showPills","confObj","pillsObj","pillsId","pill","pillData","pilldata","push","forEach","querySelectorAll","el","collapse","on","e","dataset","label","contains","removePillByClick","preventDefault","empty","oldConfig","currentConfig","show_score","removeAllPills","init","name","currentTarget","score_ranges","checkboxes","attempts_range","setTimeout","questionid","title","scrollIntoView","searchValue","this","val","trim","search","localStorage","setItem","window","addEventListener","event","isAnonymous","newValue","updateUIForAnonymousState"],"mappings":"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"}