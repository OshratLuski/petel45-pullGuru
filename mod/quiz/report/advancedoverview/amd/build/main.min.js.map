{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["/* eslint-disable camelcase */\n/* eslint-disable no-empty-function */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-trailing-spaces */\nimport $ from 'jquery';\nimport * as Str from 'core/str';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport Ajax from 'core/ajax';\nimport Templates from 'core/templates';\nimport Notification from 'core/notification';\nimport * as studentsTableActions from 'quiz_advancedoverview/studentsTableActions';\n\nlet PILLS = {};\nconst SELECTORS = {\n    SelectGroupBtn: '#advancedoverview_groupid',\n    dynamicBlock: '.dynamic-block',\n    studentsActionsBlock: '#studentsActionsBlock',\n    btns: '#studentsActionsBlock button[type=\"button\"]',\n    studentsActionsBtn: '#studentsActionsBtn',\n    studentsActionsCollapse: '#studentsActionsCollapse',\n    pillsAreaInner: '#pillsAreaInner',\n    clearPillsArea: '#clearPillsArea',\n    checkboxes: '#studentsActionsCollapse input[type=\"checkbox\"]',\n    sendMessage: '#sendMessage',\n    recalculateGrades: '#recalculateGrades',\n    deleteAttemtps: '#deleteAttemtps',\n    closingResponseAttempts: '#closingResponseAttempts',\n    selectedStudents: '#selectedStudents',\n    zerostr: '#zerostr',\n    counterstr: '#counterstr',\n    studentstableNavFilter: '#studentstableNavFilter',\n};\n\nconst changeBtnState = (target) => {\n    let state = (target.getAttribute('aria-pressed') === 'true') ? 'false' : 'true';\n    target.setAttribute('aria-pressed', state);\n    target.classList.toggle(\"active\");\n\n    // Check is target inside btngroup and set aria-pressed=\"false\" for other btn in group.\n    if (target.closest('.nav-tabs')) {\n        let btnGroup = target.closest('.nav-tabs');\n        let ingroupBtns = btnGroup.querySelectorAll('button[type=\"button\"]');\n        ingroupBtns.forEach((el) => {\n            if (el !== target) {\n                el.classList.remove(\"active\");\n                el.setAttribute('aria-pressed', 'false');\n            }\n        });\n        // studentsTableActions.CONFIG.participants.states\n    }\n};\n\n\nexport const TEMPDATA = {};\nexport const init = function (cmid, courseid, quizid, defaultconfig) {\n    let self = this;\n\n    self.TEMPDATA.cmid = cmid;\n    self.TEMPDATA.courseid = courseid;\n    self.TEMPDATA.quizid = quizid;\n    studentsTableActions.changeConfig(JSON.parse(defaultconfig));\n    studentsTableActions.init();\n\n    $(document).ready(function () {\n        studentsTableActions.showPills(studentsTableActions.CONFIG);\n    });\n\n    // Event on change group select.\n    $(SELECTORS.SelectGroupBtn).closest('.dropdown').find('.dropdown-item').on('click', function (e) {\n        let value = $(e.currentTarget).data('value');\n        let name = $(e.currentTarget).data('name');\n        $(SELECTORS.SelectGroupBtn).data('value', value);\n        $(SELECTORS.SelectGroupBtn).data('name', name);\n        $(SELECTORS.SelectGroupBtn).find('span').html(name);\n        $(SELECTORS.SelectGroupBtn).addClass('selected');\n        studentsTableActions.showLoadingIcon();\n        self.renderDynamicBlock(cmid, value);\n    });\n\n    $(document).on('click', SELECTORS.btns, function (e) {\n        changeBtnState(e.currentTarget);\n    });\n\n    // Set filters checkboxes to false first load.\n    $(SELECTORS.checkboxes).each((i) => {\n        $(SELECTORS.checkboxes)[i].checked = false;\n    });\n\n    $(document).on('click', SELECTORS.sendMessage, function () {\n        let users = [];\n        let data = self.TEMPDATA.rowData;\n        if (data.length > 0) {\n            data.forEach(el => {\n                users.push(el.userid);\n            });\n        }\n        self.showMessagePopup(users);\n    });\n\n    $(document).on('change', '#scoreDisplayToggler', function () {\n        $('#students-table').toggleClass('score-display');\n    });\n    $(document).on('click', 'a[target=\"popup\"]', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        let link = e.currentTarget.href;\n\n        let params = `scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,\n                        width=600,height=600,left=100,top=100`;\n\n        open(link, '', params);\n\n    });\n    $(document).on('click', SELECTORS.recalculateGrades, function () {\n        let attemptids = '';\n        let data = self.TEMPDATA.rowData;\n        if (data.length > 0) {\n            data.forEach((el) => {\n                if (el.attemptid) {\n                    attemptids += el.attemptid + ',';\n                }\n            });\n        }\n        attemptids = attemptids.slice(0, -1);\n        if (attemptids) {\n            self.regradaAttemtps(+self.TEMPDATA.cmid, +self.TEMPDATA.courseid, +self.TEMPDATA.quizid, attemptids);\n        } else {\n            Str.get_strings([\n                { key: 'reportregrade', component: 'quiz_advancedoverview' },\n                { key: 'selecteditemswrong', component: 'quiz_advancedoverview' },\n            ]).done(function (strings) {\n                var modalPromise = ModalFactory.create({\n                    type: ModalFactory.types.CANCEL,\n                    title: strings[0],\n                    body: strings[1]\n                });\n\n                $.when(modalPromise).then(function (fmodal) {\n                    return fmodal;\n                }).done(function (modal) {\n                    modal.show();\n                }).fail(Notification.exception);\n            });\n        }\n    });\n\n\n    $(document).on('click', SELECTORS.deleteAttemtps, function () {\n        let attemptids = '';\n        let data = self.TEMPDATA.rowData;\n        if (data.length > 0) {\n            data.forEach((el) => {\n                if (el.attemptid) {\n                    attemptids += el.attemptid + ',';\n                }\n            });\n        }\n        attemptids = attemptids.slice(0, -1);\n        if (attemptids) {\n            self.deleteAttemtps(+self.TEMPDATA.cmid, +self.TEMPDATA.courseid, +self.TEMPDATA.quizid, attemptids);\n        } else {\n            Str.get_strings([\n                { key: 'deletingattempts', component: 'quiz_advancedoverview' },\n                { key: 'selecteditemswrong', component: 'quiz_advancedoverview' },\n            ]).done(function (strings) {\n                var modalPromise = ModalFactory.create({\n                    type: ModalFactory.types.CANCEL,\n                    title: strings[0],\n                    body: strings[1]\n                });\n\n                $.when(modalPromise).then(function (fmodal) {\n                    return fmodal;\n                }).done(function (modal) {\n                    modal.show();\n                }).fail(Notification.exception);\n            });\n        }\n    });\n    $(document).on('click', SELECTORS.closingResponseAttempts, function () {\n        let attemptids = '';\n        let data = self.TEMPDATA.rowData;\n        if (data.length > 0) {\n            data.forEach((el) => {\n                if (el.attemptid) {\n                    attemptids += el.attemptid + ',';\n                }\n            });\n        }\n        attemptids = attemptids.slice(0, -1);\n        if (attemptids) {\n            self.closingResponseAttempts(+self.TEMPDATA.cmid, +self.TEMPDATA.courseid, +self.TEMPDATA.quizid, attemptids);\n        } else {\n            Str.get_strings([\n                { key: 'closingresponseattempts', component: 'quiz_advancedoverview' },\n                { key: 'selecteditemswrong', component: 'quiz_advancedoverview' },\n            ]).done(function (strings) {\n                var modalPromise = ModalFactory.create({\n                    type: ModalFactory.types.CANCEL,\n                    title: strings[0],\n                    body: strings[1]\n                });\n\n                $.when(modalPromise).then(function (fmodal) {\n                    return fmodal;\n                }).done(function (modal) {\n                    modal.show();\n                }).fail(Notification.exception);\n            });\n        }\n    });\n\n    // Full view.\n    $(document).on('change', '#extendedViewToggler', function () {\n        studentsTableActions.CONFIG.participants.full_view = $(this).is(':checked') ? 1 : 0;\n        studentsTableActions.showLoadingIcon();\n    });\n};\n\nexport const renderDynamicBlock = function (cmid, groupid) {\n    Ajax.call([{\n        methodname: 'quiz_advancedoverview_render_dynamic_block',\n        args: {\n            cmid: cmid,\n            groupid: groupid,\n            config: JSON.stringify(studentsTableActions.CONFIG),\n        },\n        done: function (response) {\n            let data = JSON.parse(response);\n            // Render dinamic block.\n            Templates.render('quiz_advancedoverview/dynamic_block', data)\n                .done(function (html, js) {\n                    studentsTableActions.setStatesFromConfig();\n                    Templates.replaceNodeContents(SELECTORS.dynamicBlock, html, js);\n                    studentsTableActions.showPills(studentsTableActions.CONFIG);\n                })\n                .fail(Notification.exception);\n        },\n        fail: Notification.exception\n    }]);\n};\nexport const showMessagePopup = function (users) {\n\n    if (users.length === 0) {\n        // Nothing to do.\n        return $.Deferred().resolve().promise();\n    }\n    var titlePromise = null;\n    if (users.length === 1) {\n        titlePromise = Str.get_string('sendbulkmessagesingle', 'core_message');\n    } else {\n        titlePromise = Str.get_string('sendbulkmessage', 'core_message', users.length);\n    }\n\n    return $.when(\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            body: Templates.render('core_user/send_bulk_message', {})\n        }),\n        titlePromise\n    ).then(function (modal, title) {\n        this.modal = modal;\n        this.modal.setTitle(title);\n        this.modal.setSaveButtonText(title);\n\n        let textarea = this.modal.getRoot().find('textarea');\n        let submitBtn = this.modal.getRoot().find('.btn[data-action=\"save\"]');\n        submitBtn.prop('disabled', 'true');\n        textarea.on('keypress', () => {\n            submitBtn.prop('disabled', textarea.val().trim().length > 0 ? false : true);\n        });\n\n        this.modal.getRoot().on(ModalEvents.hidden, function () {\n            this.modal.getRoot().remove();\n        }.bind(this));\n\n        this.modal.getRoot().on(ModalEvents.shown, function () {\n            textarea.focus();\n        });\n\n        this.modal.getRoot().on(ModalEvents.save, this.submitSendMessage.bind(this, users));\n\n        this.modal.show();\n\n        return this.modal;\n    }.bind(this));\n};\nexport const submitSendMessage = function (users) {\n\n    var messageText = this.modal.getRoot().find('form textarea').val();\n\n    var messages = [],\n        i = 0;\n\n    for (i = 0; i < users.length; i++) {\n        messages.push({ touserid: users[i], text: messageText });\n    }\n\n    return Ajax.call([{\n        methodname: 'core_message_send_instant_messages',\n        args: { messages: messages }\n    }])[0].then(function (messageIds) {\n        if (messageIds.length === 1) {\n            return Str.get_string('sendbulkmessagesentsingle', 'core_message');\n        } else {\n            return Str.get_string('sendbulkmessagesent', 'core_message', messageIds.length);\n        }\n    }).then(function (msg) {\n        Notification.addNotification({\n            message: msg,\n            type: \"success\"\n        });\n        return true;\n    }).catch(Notification.exception);\n};\nexport const regradaAttemtps = function (cmid, courseid, quizid, attemptids) {\n    let self = this;\n\n    Str.get_strings([\n        { key: 'reportregrade', component: 'quiz_advancedoverview' },\n        { key: 'areyoushure', component: 'quiz_advancedoverview' },\n        { key: 'execute', component: 'quiz_advancedoverview' },\n    ]).done(function (strings) {\n        var modalPromise = ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: strings[0],\n            body: strings[1]\n        });\n\n        $.when(modalPromise).then(function (fmodal) {\n\n            fmodal.setSaveButtonText(strings[2]);\n\n            // Handle save event.\n            fmodal.getRoot().on(ModalEvents.save, function () {\n\n                Ajax.call([{\n                    methodname: 'quiz_advancedoverview_regrade_attempts',\n                    args: {\n                        cmid: cmid,\n                        courseid: courseid,\n                        quizid: quizid,\n                        attemptids: attemptids,\n                    },\n                    done: function (response) {\n                        if (response) {\n                            self.renderDynamicBlock(cmid, null);\n                        }\n                    },\n                    fail: Notification.exception\n                }]);\n\n            });\n\n            return fmodal;\n        }).done(function (modal) {\n            modal.show();\n        }).fail(Notification.exception);\n    });\n};\nexport const deleteAttemtps = function (cmid, courseid, quizid, attemptids) {\n    let self = this;\n\n    Str.get_strings([\n        { key: 'deletingattempts', component: 'quiz_advancedoverview' },\n        { key: 'areyoushure', component: 'quiz_advancedoverview' },\n        { key: 'execute', component: 'quiz_advancedoverview' },\n    ]).done(function (strings) {\n        var modalPromise = ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: strings[0],\n            body: strings[1]\n        });\n\n        $.when(modalPromise).then(function (fmodal) {\n\n            fmodal.setSaveButtonText(strings[2]);\n\n            // Handle save event.\n            fmodal.getRoot().on(ModalEvents.save, function () {\n\n                Ajax.call([{\n                    methodname: 'quiz_advancedoverview_delete_attempts',\n                    args: {\n                        cmid: cmid,\n                        courseid: courseid,\n                        quizid: quizid,\n                        attemptids: attemptids,\n                    },\n                    done: function (response) {\n                        if (response) {\n                            self.renderDynamicBlock(cmid, null);\n                        }\n                    },\n                    fail: Notification.exception\n                }]);\n\n            });\n\n            return fmodal;\n        }).done(function (modal) {\n            modal.show();\n        }).fail(Notification.exception);\n    });\n};\nexport const closingResponseAttempts = function (cmid, courseid, quizid, attemptids) {\n    let self = this;\n\n    Str.get_strings([\n        { key: 'closingresponseattempts', component: 'quiz_advancedoverview' },\n        { key: 'areyoushure', component: 'quiz_advancedoverview' },\n        { key: 'execute', component: 'quiz_advancedoverview' },\n    ]).done(function (strings) {\n        var modalPromise = ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: strings[0],\n            body: strings[1]\n        });\n\n        $.when(modalPromise).then(function (fmodal) {\n\n            fmodal.setSaveButtonText(strings[2]);\n\n            // Handle save event.\n            fmodal.getRoot().on(ModalEvents.save, function () {\n\n                Ajax.call([{\n                    methodname: 'quiz_advancedoverview_close_attempts',\n                    args: {\n                        cmid: cmid,\n                        courseid: courseid,\n                        quizid: quizid,\n                        attemptids: attemptids,\n                    },\n                    done: function (response) {\n                        if (response) {\n                            self.renderDynamicBlock(cmid, null);\n                        }\n                    },\n                    fail: Notification.exception\n                }]);\n\n            });\n\n            return fmodal;\n        }).done(function (modal) {\n            modal.show();\n        }).fail(Notification.exception);\n    });\n};\nexport const changeStudentActionState = function (state) {\n    $(SELECTORS.studentsActionsBtn)[0].disabled = state;\n};\nexport const setSelectedStudentsStr = function (numberOfRows) {\n    if (numberOfRows > 0) {\n        $(SELECTORS.zerostr).hide();\n        Str.get_string('selectedstudents', 'quiz_advancedoverview', numberOfRows).then(function (result) {\n            $(SELECTORS.counterstr)[0].innerHTML = result;\n            return result;\n        }).fail(Notification.exception);\n        $(SELECTORS.counterstr).show();\n    } else {\n        $(SELECTORS.zerostr).show();\n        $(SELECTORS.counterstr).hide();\n    }\n};\n\n"],"names":["SELECTORS","cmid","courseid","quizid","defaultconfig","self","this","TEMPDATA","studentsTableActions","changeConfig","JSON","parse","init","document","ready","showPills","CONFIG","closest","find","on","e","value","currentTarget","data","name","html","addClass","showLoadingIcon","renderDynamicBlock","target","state","getAttribute","setAttribute","classList","toggle","querySelectorAll","forEach","el","remove","changeBtnState","each","i","checked","users","rowData","length","push","userid","showMessagePopup","toggleClass","preventDefault","stopPropagation","link","href","open","attemptids","attemptid","slice","regradaAttemtps","Str","get_strings","key","component","done","strings","modalPromise","ModalFactory","create","type","types","CANCEL","title","body","when","then","fmodal","modal","show","fail","Notification","exception","deleteAttemtps","closingResponseAttempts","participants","full_view","is","groupid","call","methodname","args","config","stringify","response","render","js","setStatesFromConfig","replaceNodeContents","$","Deferred","resolve","promise","titlePromise","get_string","SAVE_CANCEL","Templates","setTitle","setSaveButtonText","textarea","getRoot","submitBtn","prop","val","trim","ModalEvents","hidden","bind","shown","focus","save","submitSendMessage","messageText","messages","touserid","text","Ajax","messageIds","msg","addNotification","message","catch","disabled","numberOfRows","hide","result","innerHTML"],"mappings":"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"}