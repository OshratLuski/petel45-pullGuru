function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a){if("function"==typeof define&&define.amd){define ("local_datatables/dataTables.buttons",["jquery","local_datatables/jquery.dataTables"],function(b){return a(b,window,document)})}else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){module.exports=function(b,c){if(!b){b=window}if(!c||!c.fn.dataTable){c=require("datatables.net")(b,c).$}return a(c,b,b.document)}}else{a(jQuery,window,document)}})(function(b,a,c){'use strict';var d=b.fn.dataTable,e=0,f=0,g=d.ext.buttons,h=function(a,c){if(!0===c){c={}}if(b.isArray(c)){c={buttons:c}}this.c=b.extend(!0,{},h.defaults,c);if(c.buttons){this.c.buttons=c.buttons}this.s={dt:new d.Api(a),buttons:[],listenKeys:"",namespace:"dtb"+e++};this.dom={container:b("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)};this._constructor()};b.extend(h.prototype,{action:function action(a,b){var c=this._nodeToButton(a);if(b===void 0){return c.conf.action}c.conf.action=b;return this},active:function active(a,c){var d=this._nodeToButton(a),e=this.c.dom.button.active,f=b(d.node);if(c===void 0){return f.hasClass(e)}f.toggleClass(e,c===void 0?!0:c);return this},add:function add(a,b){var c=this.s.buttons;if("string"==typeof b){for(var d=b.split("-"),e=this.s,f=0,g=d.length-1;f<g;f++){e=e.buttons[1*d[f]]}c=e.buttons;b=1*d[d.length-1]}this._expandButton(c,a,!1,b);this._draw();return this},container:function container(){return this.dom.container},disable:function disable(a){var c=this._nodeToButton(a);b(c.node).addClass(this.c.dom.button.disabled);return this},destroy:function destroy(){b("body").off("keyup."+this.s.namespace);var a=this.s.buttons.slice(),c,d;for(c=0,d=a.length;c<d;c++){this.remove(a[c].node)}this.dom.container.remove();var e=this.s.dt.settings()[0];for(c=0,d=e.length;c<d;c++){if(e.inst===this){e.splice(c,1);break}}return this},enable:function enable(a,c){if(!1===c){return this.disable(a)}var d=this._nodeToButton(a);b(d.node).removeClass(this.c.dom.button.disabled);return this},name:function name(){return this.c.name},node:function node(a){var c=this._nodeToButton(a);return b(c.node)},remove:function remove(a){var c=this._nodeToButton(a),d=this._nodeToHost(a),e=this.s.dt;if(c.buttons.length){for(var f=c.buttons.length-1;0<=f;f--){this.remove(c.buttons[f].node)}}if(c.conf.destroy){c.conf.destroy.call(e.button(a),e,b(a),c.conf)}this._removeKey(c.conf);b(c.node).remove();var g=b.inArray(c,d);d.splice(g,1);return this},text:function(a,c){var d=this._nodeToButton(a),e=this.c.dom.collection.buttonLiner,f=d.inCollection&&e&&e.tag?e.tag:this.c.dom.buttonLiner.tag,g=this.s.dt,h=b(d.node),i=function(a){return"function"==typeof a?a(g,h,d.conf):a};if(c===void 0){return i(d.conf.text)}d.conf.text=c;if(f){h.children(f).html(i(c))}else{h.html(i(c))}return this},_constructor:function _constructor(){var a=this,d=this.s.dt,e=d.settings()[0],f=this.c.buttons;if(!e._buttons){e._buttons=[]}e._buttons.push({inst:this,name:this.c.name});for(var g=0,h=f.length;g<h;g++){this.add(f[g])}d.on("destroy",function(){a.destroy()});b("body").on("keyup."+this.s.namespace,function(b){if(!c.activeElement||c.activeElement===c.body){var d=String.fromCharCode(b.keyCode).toLowerCase();if(-1!==a.s.listenKeys.toLowerCase().indexOf(d)){a._keypress(d,b)}}})},_addKey:function _addKey(a){if(a.key){this.s.listenKeys+=b.isPlainObject(a.key)?a.key.key:a.key}},_draw:function _draw(a,b){if(!a){a=this.dom.container;b=this.s.buttons}a.children().detach();for(var c=0,d=b.length;c<d;c++){a.append(b[c].inserter);if(b[c].buttons&&b[c].buttons.length){this._draw(b[c].collection,b[c].buttons)}}},_expandButton:function _expandButton(a,c,d,e){for(var f=this.s.dt,g=0,h=!b.isArray(c)?[c]:c,j=0,k=h.length,l;j<k;j++){l=this._resolveExtends(h[j]);if(!l){continue}if(b.isArray(l)){this._expandButton(a,l,d,e);continue}var m=this._buildButton(l,d);if(!m){continue}if(e!==void 0){a.splice(e,0,m);e++}else{a.push(m)}if(m.conf.buttons){var n=this.c.dom.collection;m.collection=b("<"+n.tag+"/>").addClass(n.className);m.conf._collection=m.collection;this._expandButton(m.buttons,m.conf.buttons,!0,e)}if(l.init){l.init.call(f.button(m.node),f,b(m.node),l)}g++}},_buildButton:function _buildButton(a,c){var d=this.c.dom.button,e=this.c.dom.buttonLiner,g=this.c.dom.collection,h=this.s.dt,i=function(b){return"function"==typeof b?b(h,k,a):b};if(c&&g.button){d=g.button}if(c&&g.buttonLiner){e=g.buttonLiner}if(a.available&&!a.available(h,a)){return!1}var j=function(a,c,d,e){e.action.call(c.button(d),a,c,d,e);b(c.table().node()).triggerHandler("buttons-action.dt",[c.button(d),c,d,e])},k=b("<"+d.tag+"/>").addClass(d.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(b){b.preventDefault();if(!k.hasClass(d.disabled)&&a.action){j(b,h,k,a)}k.blur()}).on("keyup.dtb",function(b){if(13===b.keyCode){if(!k.hasClass(d.disabled)&&a.action){j(b,h,k,a)}}});if("a"===d.tag.toLowerCase()){k.attr("href","#")}if(e.tag){var l=b("<"+e.tag+"/>").html(i(a.text)).addClass(e.className);if("a"===e.tag.toLowerCase()){l.attr("href","#")}k.append(l)}else{k.html(i(a.text))}if(!1===a.enabled){k.addClass(d.disabled)}if(a.className){k.addClass(a.className)}if(a.titleAttr){k.attr("title",a.titleAttr)}if(!a.namespace){a.namespace=".dt-button-"+f++}var m=this.c.dom.buttonContainer,n;if(m&&m.tag){n=b("<"+m.tag+"/>").addClass(m.className).append(k)}else{n=k}this._addKey(a);return{conf:a,node:k.get(0),inserter:n,buttons:[],inCollection:c,collection:null}},_nodeToButton:function _nodeToButton(a,b){if(!b){b=this.s.buttons}for(var c=0,d=b.length;c<d;c++){if(b[c].node===a){return b[c]}if(b[c].buttons.length){var e=this._nodeToButton(a,b[c].buttons);if(e){return e}}}},_nodeToHost:function _nodeToHost(a,b){if(!b){b=this.s.buttons}for(var c=0,d=b.length;c<d;c++){if(b[c].node===a){return b}if(b[c].buttons.length){var e=this._nodeToHost(a,b[c].buttons);if(e){return e}}}},_keypress:function _keypress(a,c){var d=function(d,e){if(!d.key){return}if(d.key===a){b(e).click()}else if(b.isPlainObject(d.key)){if(d.key.key!==a){return}if(d.key.shiftKey&&!c.shiftKey){return}if(d.key.altKey&&!c.altKey){return}if(d.key.ctrlKey&&!c.ctrlKey){return}if(d.key.metaKey&&!c.metaKey){return}b(e).click()}},e=function(b){for(var a=0,c=b.length;a<c;a++){d(b[a].conf,b[a].node);if(b[a].buttons.length){e(b[a].buttons)}}};e(this.s.buttons)},_removeKey:function _removeKey(c){if(c.key){var d=b.isPlainObject(c.key)?c.key.key:c.key,e=this.s.listenKeys.split(""),a=b.inArray(d,e);e.splice(a,1);this.s.listenKeys=e.join("")}},_resolveExtends:function _resolveExtends(a){var c=this.s.dt,d,e,f=function(d){var e=0;while(!b.isPlainObject(d)&&!b.isArray(d)){if(d===void 0){return}if("function"==typeof d){d=d(c,a);if(!d){return!1}}else if("string"==typeof d){if(!g[d]){throw"Unknown button type: "+d}d=g[d]}e++;if(30<e){throw"Buttons: Too many iterations"}}return b.isArray(d)?d:b.extend({},d)};a=f(a);while(a&&a.extend){if(!g[a.extend]){throw"Cannot extend unknown button type: "+a.extend}var h=f(g[a.extend]);if(b.isArray(h)){return h}else if(!h){return!1}var j=h.className;a=b.extend({},h,a);if(j&&a.className!==j){a.className=j+" "+a.className}var k=a.postfixButtons;if(k){if(!a.buttons){a.buttons=[]}for(d=0,e=k.length;d<e;d++){a.buttons.push(k[d])}a.postfixButtons=null}var l=a.prefixButtons;if(l){if(!a.buttons){a.buttons=[]}for(d=0,e=l.length;d<e;d++){a.buttons.splice(d,0,l[d])}a.prefixButtons=null}a.extend=h.extend}return a}});h.background=function(a,c,d){if(d===void 0){d=400}if(a){b("<div/>").addClass(c).css("display","none").appendTo("body").fadeIn(d)}else{b("body > div."+c).fadeOut(d,function(){b(this).removeClass(c).remove()})}};h.instanceSelector=function(a,c){if(!a){return b.map(c,function(a){return a.inst})}var d=[],e=b.map(c,function(a){return a.name}),f=function(a){if(b.isArray(a)){for(var g=0,h=a.length;g<h;g++){f(a[g])}return}if("string"==typeof a){if(-1!==a.indexOf(",")){f(a.split(","))}else{var j=b.inArray(b.trim(a),e);if(-1!==j){d.push(c[j].inst)}}}else if("number"==typeof a){d.push(c[a].inst)}};f(a);return d};h.buttonSelector=function(a,c){for(var d=[],e=function(b,a,c){for(var d,f,g=0,h=a.length;g<h;g++){d=a[g];if(d){f=c!==void 0?c+g:g+"";b.push({node:d.node,name:d.conf.name,idx:f});if(d.buttons){e(b,d.buttons,f+"-")}}}},f=function(c,g){var h,j,k=[];e(k,g.s.buttons);var l=b.map(k,function(a){return a.node});if(b.isArray(c)||c instanceof b){for(h=0,j=c.length;h<j;h++){f(c[h],g)}return}if(null===c||c===void 0||"*"===c){for(h=0,j=k.length;h<j;h++){d.push({inst:g,node:k[h].node})}}else if("number"==typeof c){d.push({inst:g,node:g.s.buttons[c].node})}else if("string"==typeof c){if(-1!==c.indexOf(",")){var m=c.split(",");for(h=0,j=m.length;h<j;h++){f(b.trim(m[h]),g)}}else if(c.match(/^\d+(\-\d+)*$/)){var a=b.map(k,function(a){return a.idx});d.push({inst:g,node:k[b.inArray(c,a)].node})}else if(-1!==c.indexOf(":name")){var n=c.replace(":name","");for(h=0,j=k.length;h<j;h++){if(k[h].name===n){d.push({inst:g,node:k[h].node})}}}else{b(l).filter(c).each(function(){d.push({inst:g,node:this})})}}else if("object"===_typeof(c)&&c.nodeName){var o=b.inArray(c,l);if(-1!==o){d.push({inst:g,node:l[o]})}}},g=0,h=a.length,j;g<h;g++){j=a[g];f(c,j)}return d};h.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}};h.version="1.2.4";b.extend(g,{collection:{text:function text(a){return a.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function action(c,d,e,f){var g=e,i=g.offset(),j=b(d.table().container()),k=!1;if(b("div.dt-button-background").length){k=b(".dt-button-collection").offset();b("body").trigger("click.dtb-collection")}f._collection.addClass(f.collectionLayout).css("display","none").appendTo("body").fadeIn(f.fade);var l=f._collection.css("position");if(k&&"absolute"===l){f._collection.css({top:k.top,left:k.left})}else if("absolute"===l){f._collection.css({top:i.top+g.outerHeight(),left:i.left});var m=i.left+f._collection.outerWidth(),n=j.offset().left+j.width();if(m>n){f._collection.css("left",i.left-(m-n))}}else{var o=f._collection.height()/2;if(o>b(a).height()/2){o=b(a).height()/2}f._collection.css("marginTop",-1*o)}if(f.background){h.background(!0,f.backgroundClassName,f.fade)}setTimeout(function(){b("div.dt-button-background").on("click.dtb-collection",function(){});b("body").on("click.dtb-collection",function(a){var c=b.fn.addBack?"addBack":"andSelf";if(!b(a.target).parents()[c]().filter(f._collection).length){f._collection.fadeOut(f.fade,function(){f._collection.detach()});b("div.dt-button-background").off("click.dtb-collection");h.background(!1,f.backgroundClassName,f.fade);b("body").off("click.dtb-collection");d.off("buttons-action.b-internal")}})},10);if(f.autoClose){d.on("buttons-action.b-internal",function(){b("div.dt-button-background").click()})}},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function copy(a,b){if(g.copyHtml5){return"copyHtml5"}if(g.copyFlash&&g.copyFlash.available(a,b)){return"copyFlash"}},csv:function csv(a,b){if(g.csvHtml5&&g.csvHtml5.available(a,b)){return"csvHtml5"}if(g.csvFlash&&g.csvFlash.available(a,b)){return"csvFlash"}},excel:function excel(a,b){if(g.excelHtml5&&g.excelHtml5.available(a,b)){return"excelHtml5"}if(g.excelFlash&&g.excelFlash.available(a,b)){return"excelFlash"}},pdf:function pdf(a,b){if(g.pdfHtml5&&g.pdfHtml5.available(a,b)){return"pdfHtml5"}if(g.pdfFlash&&g.pdfFlash.available(a,b)){return"pdfFlash"}},pageLength:function pageLength(a){var c=a.settings()[0].aLengthMenu,d=b.isArray(c[0])?c[0]:c,e=b.isArray(c[0])?c[1]:c,f=function(a){return a.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},a.page.len())};return{extend:"collection",text:f,className:"buttons-page-length",autoClose:!0,buttons:b.map(d,function(a,b){return{text:e[b],className:"button-page-length",action:function action(b,c){c.page.len(a).draw()},init:function init(b,c,d){var e=this,f=function(){e.active(b.page.len()===a)};b.on("length.dt"+d.namespace,f);f()},destroy:function destroy(a,b,c){a.off("length.dt"+c.namespace)}}}),init:function init(a,b,c){var d=this;a.on("length.dt"+c.namespace,function(){d.text(f(a))})},destroy:function destroy(a,b,c){a.off("length.dt"+c.namespace)}}}});d.Api.register("buttons()",function(a,b){if(b===void 0){b=a;a=void 0}this.selector.buttonGroup=a;var c=this.iterator(!0,"table",function(c){if(c._buttons){return h.buttonSelector(h.instanceSelector(a,c._buttons),b)}},!0);c._groupSelector=a;return c});d.Api.register("button()",function(a,b){var c=this.buttons(a,b);if(1<c.length){c.splice(1,c.length)}return c});d.Api.registerPlural("buttons().active()","button().active()",function(a){if(a===void 0){return this.map(function(a){return a.inst.active(a.node)})}return this.each(function(b){b.inst.active(b.node,a)})});d.Api.registerPlural("buttons().action()","button().action()",function(a){if(a===void 0){return this.map(function(a){return a.inst.action(a.node)})}return this.each(function(b){b.inst.action(b.node,a)})});d.Api.register(["buttons().enable()","button().enable()"],function(a){return this.each(function(b){b.inst.enable(b.node,a)})});d.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(a){a.inst.disable(a.node)})});d.Api.registerPlural("buttons().nodes()","button().node()",function(){var a=b();b(this.each(function(b){a=a.add(b.inst.node(b.node))}));return a});d.Api.registerPlural("buttons().text()","button().text()",function(a){if(a===void 0){return this.map(function(a){return a.inst.text(a.node)})}return this.each(function(b){b.inst.text(b.node,a)})});d.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(a){a.inst.node(a.node).trigger("click")})});d.Api.registerPlural("buttons().containers()","buttons().container()",function(){var a=b(),c=this._groupSelector;this.iterator(!0,"table",function(b){if(b._buttons){for(var d=h.instanceSelector(c,b._buttons),e=0,f=d.length;e<f;e++){a=a.add(d[e].container())}}});return a});d.Api.register("button().add()",function(a,b){var c=this.context;if(c.length){var d=h.instanceSelector(this._groupSelector,c[0]._buttons);if(d.length){d[0].add(b,a)}}return this.button(this._groupSelector,a)});d.Api.register("buttons().destroy()",function(){this.pluck("inst").unique().each(function(a){a.destroy()});return this});d.Api.registerPlural("buttons().remove()","buttons().remove()",function(){this.each(function(a){a.inst.remove(a.node)});return this});var i;d.Api.register("buttons.info()",function(a,c,d){var e=this;if(!1===a){b("#datatables_buttons_info").fadeOut(function(){b(this).remove()});clearTimeout(i);i=null;return this}if(i){clearTimeout(i)}if(b("#datatables_buttons_info").length){b("#datatables_buttons_info").remove()}a=a?"<h2>"+a+"</h2>":"";b("<div id=\"datatables_buttons_info\" class=\"dt-button-info\"/>").html(a).append(b("<div/>")["string"==typeof c?"html":"append"](c)).css("display","none").appendTo("body").fadeIn();if(d!==void 0&&0!==d){i=setTimeout(function(){e.buttons.info(!1)},d)}return this});d.Api.register("buttons.exportData()",function(a){if(this.context.length){return k(new d.Api(this.context[0]),a)}});var j=b("<textarea/>")[0],k=function(a,c){for(var d=b.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(a){return e(a)},footer:function(a){return e(a)},body:function(a){return e(a)}}},c),e=function(a){if("string"!=typeof a){return a}if(d.stripHtml){a=a.replace(/<[^>]*>/g,"")}if(d.trim){a=a.replace(/^\s+|\s+$/g,"")}if(d.stripNewlines){a=a.replace(/\n/g," ")}if(d.decodeEntities){j.innerHTML=a;a=j.value}return a},f=a.columns(d.columns).indexes().map(function(b){var c=a.column(b).header();return d.format.header(c.innerHTML,b,c)}).toArray(),g=a.table().footer()?a.columns(d.columns).indexes().map(function(b){var c=a.column(b).footer();return d.format.footer(c?c.innerHTML:"",b,c)}).toArray():null,h=a.rows(d.rows,d.modifier).indexes().toArray(),k=a.cells(h,d.columns),l=k.render(d.orthogonal).toArray(),m=k.nodes().toArray(),n=f.length,o=0<n?l.length/n:0,p=Array(o),q=0,r=0,s;r<o;r++){s=Array(n);for(var t=0;t<n;t++){s[t]=d.format.body(l[q],r,t,m[q]);q++}p[r]=s}return{header:f,footer:g,body:p}};b.fn.dataTable.Buttons=h;b.fn.DataTable.Buttons=h;b(c).on("init.dt plugin-init.dt",function(a,b){if("dt"!==a.namespace){return}var c=b.oInit.buttons||d.defaults.buttons;if(c&&!b._buttons){new h(b,c).container()}});d.ext.feature.push({fnInit:function fnInit(a){var b=new d.Api(a),c=b.init().buttons||d.defaults.buttons;return new h(b,c).container()},cFeature:"B"});return h});
//# sourceMappingURL=dataTables.buttons.min.js.map
