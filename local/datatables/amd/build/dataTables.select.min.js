function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}(function(a){if("function"==typeof define&&define.amd){define ("local_datatables/dataTables.select",["jquery","local_datatables/jquery.dataTables"],function(b){return a(b,window,document)})}else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))){module.exports=function(b,c){if(!b){b=window}if(!c||!c.fn.dataTable){c=require("datatables.net")(b,c).$}return a(c,b,b.document)}}else{a(jQuery,window,document)}})(function(a,b,c){'use strict';var n=a.fn.dataTable;n.select={};n.select.version="1.2.0";n.select.init=function(b){var c=b.settings()[0],d=c.oInit.select,e=n.defaults.select,f=d===void 0?e:d,g="row",h="api",i=!1,j=!0,k="td, th",l="selected";c._select={};if(!0===f){h="os"}else if("string"==typeof f){h=f}else if(a.isPlainObject(f)){if(f.blurable!==void 0){i=f.blurable}if(f.info!==void 0){j=f.info}if(f.items!==void 0){g=f.items}if(f.style!==void 0){h=f.style}if(f.selector!==void 0){k=f.selector}if(f.className!==void 0){l=f.className}}b.select.selector(k);b.select.items(g);b.select.style(h);b.select.blurable(i);b.select.info(j);c._select.className=l;a.fn.dataTable.ext.order["select-checkbox"]=function(b,c){return this.api().column(c,{order:"index"}).nodes().map(function(c){if("row"===b._select.items){return a(c).parent().hasClass(b._select.className)}else if("cell"===b._select.items){return a(c).hasClass(b._select.className)}return!1})};if(a(b.table().node()).hasClass("selectable")){b.select.style("os")}};function d(a,b,c){var d,e,f,g=function(b,c){if(b>c){var d=c;c=b;b=d}var e=!1;return a.columns(":visible").indexes().filter(function(a){if(a===b){e=!0}if(a===c){e=!1;return!0}return e})},h=function(b,c){var d=a.rows({search:"applied"}).indexes();if(d.indexOf(b)>d.indexOf(c)){var e=c;c=b;b=e}var f=!1;return d.filter(function(a){if(a===b){f=!0}if(a===c){f=!1;return!0}return f})};if(!a.cells({selected:!0}).any()&&!c){e=g(0,b.column);f=h(0,b.row)}else{e=g(c.column,b.column);f=h(c.row,b.row)}d=a.cells(f,e).flatten();if(!a.cells(b,{selected:!0}).any()){a.cells(d).select()}else{a.cells(d).deselect()}}function e(b){var c=b.settings()[0],d=c._select.selector;a(b.table().body()).off("mousedown.dtSelect",d).off("mouseup.dtSelect",d).off("click.dtSelect",d);a("body").off("click.dtSelect")}function f(c){var d=a(c.table().body()),f=c.settings()[0],h=f._select.selector;d.on("mousedown.dtSelect",h,function(a){if(a.shiftKey||a.metaKey||a.ctrlKey){d.css("-moz-user-select","none").one("selectstart.dtSelect",h,function(){return!1})}}).on("mouseup.dtSelect",h,function(){d.css("-moz-user-select","")}).on("click.dtSelect",h,function(d){var e=c.select.items(),f;if(b.getSelection&&b.getSelection().toString()){return}var h=c.settings()[0];if(a(d.target).closest("div.dataTables_wrapper")[0]!=c.table().container()){return}var i=c.cell(a(d.target).closest("td, th"));if(!i.any()){return}var j=a.Event("user-select.dt");g(c,j,[e,i,d]);if(j.isDefaultPrevented()){return}var k=i.index();if("row"===e){f=k.row;l(d,c,h,"row",f)}else if("column"===e){f=i.index().column;l(d,c,h,"column",f)}else if("cell"===e){f=i.index();l(d,c,h,"cell",f)}h._select_lastCell=k});a("body").on("click.dtSelect",function(b){if(f._select.blurable){if(a(b.target).parents().filter(c.table().container()).length){return}if(a(b.target).parents("div.DTE").length){return}k(f,!0)}})}function g(b,c,d,e){if(e&&!b.flatten().length){return}if("string"==typeof c){c=c+".dt"}d.unshift(b);a(b.table().node()).triggerHandler(c,d)}function h(b){var c=b.settings()[0];if(!c._select.info||!c.aanFeatures.i){return}var d=a("<span class=\"select-info\"/>"),e=function(c,e){d.append(a("<span class=\"select-item\"/>").append(b.i18n("select."+c+"s",{_:"%d "+c+"s selected",0:"",1:"1 "+c+" selected"},e)))};e("row",b.rows({selected:!0}).flatten().length);e("column",b.columns({selected:!0}).flatten().length);e("cell",b.cells({selected:!0}).flatten().length);a.each(c.aanFeatures.i,function(b,c){c=a(c);var e=c.children("span.select-info");if(e.length){e.remove()}if(""!==d.text()){c.append(d)}})}function i(b){var c=new n.Api(b);b.aoRowCreatedCallback.push({fn:function fn(c,e,f){var g,h,j=b.aoData[f];if(j._select_selected){a(c).addClass(b._select.className)}for(g=0,h=b.aoColumns.length;g<h;g++){if(b.aoColumns[g]._select_selected||j._selected_cells&&j._selected_cells[g]){a(j.anCells[g]).addClass(b._select.className)}}},sName:"select-deferRender"});c.on("preXhr.dt.dtSelect",function(){var a=c.rows({selected:!0}).ids(!0).filter(function(a){return a!==void 0}),b=c.cells({selected:!0}).eq(0).map(function(a){var b=c.row(a.row).id(!0);return b?{row:b,column:a.column}:void 0}).filter(function(a){return a!==void 0});c.one("draw.dt.dtSelect",function(){c.rows(a).select();if(b.any()){b.each(function(a){c.cells(a.row,a.column).select()})}})});c.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){h(c)});c.on("destroy.dtSelect",function(){e(c);c.off(".dtSelect")})}function j(b,c,d,e){var f=b[c+"s"]({search:"applied"}).indexes(),g=a.inArray(e,f),h=a.inArray(d,f);if(!b[c+"s"]({selected:!0}).any()&&-1===g){f.splice(a.inArray(d,f)+1,f.length)}else{if(g>h){var i=h;h=g;g=i}f.splice(h+1,f.length);f.splice(0,g)}if(!b[c](d,{selected:!0}).any()){b[c+"s"](f).select()}else{f.splice(a.inArray(d,f),1);b[c+"s"](f).deselect()}}function k(a,b){if(b||"single"===a._select.style){var c=new n.Api(a);c.rows({selected:!0}).deselect();c.columns({selected:!0}).deselect();c.cells({selected:!0}).deselect()}}function l(a,b,c,e,f){var g=b.select.style(),h=b[e](f,{selected:!0}).any();if("os"===g){if(a.ctrlKey||a.metaKey){b[e](f).select(!h)}else if(a.shiftKey){if("cell"===e){d(b,f,c._select_lastCell||null)}else{j(b,e,f,c._select_lastCell?c._select_lastCell[e]:null)}}else{var i=b[e+"s"]({selected:!0});if(h&&1===i.flatten().length){b[e](f).deselect()}else{i.deselect();b[e](f).select()}}}else if("multi+shift"==g){if(a.shiftKey){if("cell"===e){d(b,f,c._select_lastCell||null)}else{j(b,e,f,c._select_lastCell?c._select_lastCell[e]:null)}}else{b[e](f).select(!h)}}else{b[e](f).select(!h)}}a.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(a,b){n.ext.selector[b.type].push(function(a,c,d){var e=c.selected,f,g=[];if(e===void 0){return d}for(var h=0,j=d.length;h<j;h++){f=a[b.prop][d[h]];if(!0===e&&!0===f._select_selected||!1===e&&!f._select_selected){g.push(d[h])}}return g})});n.ext.selector.cell.push(function(a,b,c){var d=b.selected,e,f=[];if(d===void 0){return c}for(var g=0,h=c.length;g<h;g++){e=a.aoData[c[g].row];if(!0===d&&e._selected_cells&&!0===e._selected_cells[c[g].column]||!1===d&&(!e._selected_cells||!e._selected_cells[c[g].column])){f.push(c[g])}}return f});var o=n.Api.register,p=n.Api.registerPlural;o("select()",function(){return this.iterator("table",function(a){n.select.init(new n.Api(a))})});o("select.blurable()",function(a){if(a===void 0){return this.context[0]._select.blurable}return this.iterator("table",function(b){b._select.blurable=a})});o("select.info()",function(a){if(h===void 0){return this.context[0]._select.info}return this.iterator("table",function(b){b._select.info=a})});o("select.items()",function(a){if(a===void 0){return this.context[0]._select.items}return this.iterator("table",function(b){b._select.items=a;g(new n.Api(b),"selectItems",[a])})});o("select.style()",function(a){if(a===void 0){return this.context[0]._select.style}return this.iterator("table",function(b){b._select.style=a;if(!b._select_init){i(b)}var c=new n.Api(b);e(c);if("api"!==a){f(c)}g(new n.Api(b),"selectStyle",[a])})});o("select.selector()",function(a){if(a===void 0){return this.context[0]._select.selector}return this.iterator("table",function(b){e(new n.Api(b));b._select.selector=a;if("api"!==b._select.style){f(new n.Api(b))}})});p("rows().select()","row().select()",function(b){var c=this;if(!1===b){return this.deselect()}this.iterator("row",function(b,c){k(b);b.aoData[c]._select_selected=!0;a(b.aoData[c].nTr).addClass(b._select.className)});this.iterator("table",function(a,b){g(c,"select",["row",c[b]],!0)});return this});p("columns().select()","column().select()",function(b){var c=this;if(!1===b){return this.deselect()}this.iterator("column",function(b,c){k(b);b.aoColumns[c]._select_selected=!0;var d=new n.Api(b).column(c);a(d.header()).addClass(b._select.className);a(d.footer()).addClass(b._select.className);d.nodes().to$().addClass(b._select.className)});this.iterator("table",function(a,b){g(c,"select",["column",c[b]],!0)});return this});p("cells().select()","cell().select()",function(b){var c=this;if(!1===b){return this.deselect()}this.iterator("cell",function(b,c,d){k(b);var e=b.aoData[c];if(e._selected_cells===void 0){e._selected_cells=[]}e._selected_cells[d]=!0;if(e.anCells){a(e.anCells[d]).addClass(b._select.className)}});this.iterator("table",function(a,b){g(c,"select",["cell",c[b]],!0)});return this});p("rows().deselect()","row().deselect()",function(){var b=this;this.iterator("row",function(b,c){b.aoData[c]._select_selected=!1;a(b.aoData[c].nTr).removeClass(b._select.className)});this.iterator("table",function(a,c){g(b,"deselect",["row",b[c]],!0)});return this});p("columns().deselect()","column().deselect()",function(){var b=this;this.iterator("column",function(b,c){b.aoColumns[c]._select_selected=!1;var d=new n.Api(b),e=d.column(c);a(e.header()).removeClass(b._select.className);a(e.footer()).removeClass(b._select.className);d.cells(null,c).indexes().each(function(c){var d=b.aoData[c.row],e=d._selected_cells;if(d.anCells&&(!e||!e[c.column])){a(d.anCells[c.column]).removeClass(b._select.className)}})});this.iterator("table",function(a,c){g(b,"deselect",["column",b[c]],!0)});return this});p("cells().deselect()","cell().deselect()",function(){var b=this;this.iterator("cell",function(b,c,d){var e=b.aoData[c];e._selected_cells[d]=!1;if(e.anCells&&!b.aoColumns[d]._select_selected){a(e.anCells[d]).removeClass(b._select.className)}});this.iterator("table",function(a,c){g(b,"deselect",["cell",b[c]],!0)});return this});function m(a,b){return function(c){return c.i18n("buttons."+a,b)}}a.extend(n.ext.buttons,{selected:{text:m("selected","Selected"),className:"buttons-selected",init:function(a){var b=this;a.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var a=b.rows({selected:!0}).any()||b.columns({selected:!0}).any()||b.cells({selected:!0}).any();b.enable(a)});this.disable()}},selectedSingle:{text:m("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(a){var b=this;a.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var c=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;b.enable(1===c)});this.disable()}},selectAll:{text:m("selectAll","Select all"),className:"buttons-select-all",action:function action(){var a=this.select.items();this[a+"s"]().select()}},selectNone:{text:m("selectNone","Deselect all"),className:"buttons-select-none",action:function action(){k(this.settings()[0],!0)},init:function(a){var b=this;a.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var c=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;b.enable(0<c)});this.disable()}}});a.each(["Row","Column","Cell"],function(a,b){var c=b.toLowerCase();n.ext.buttons["select"+b+"s"]={text:m("select"+b+"s","Select "+c+"s"),className:"buttons-select-"+c+"s",action:function action(){this.select.items(c)},init:function(a){var b=this;a.on("selectItems.dt.DT",function(a,d,e){b.active(e===c)})}}});a(c).on("preInit.dt.dtSelect",function(a,b){if("dt"!==a.namespace){return}n.select.init(new n.Api(b))});return n.select});
//# sourceMappingURL=dataTables.select.min.js.map
