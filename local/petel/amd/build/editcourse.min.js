/**
 * Javascript main event handler.
 *
 * @module     local_petel/init
 * @package    local_petel
 * @copyright  2019 Devlionco <info@devlion.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since      3.6
 */
define("local_petel/editcourse",["jquery","core/str","core/ajax","core/notification","core/modal_events","core/modal_factory","core/templates","core/toast"],(function($,Str,Ajax,Notification,ModalEvents,ModalFactory,Templates,toast){var default_value,flag;return{init:function(){this.popup()},popup:function(){var self=this;default_value=$('select[name="format"]').val(),$("form").one("submit",(function(e){e.preventDefault();var form=$(this);$('select[name="format"]').val()!==default_value?Str.get_strings([{key:"editcoursetitle",component:"local_petel"},{key:"editcoursebody",component:"local_petel"},{key:"editcourseapprove",component:"local_petel"}]).done((function(strings){return ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:strings[0],body:strings[1],buttons:{save:strings[2]},removeOnClose:!0}).then((function(modal){return modal.getRoot().on(ModalEvents.save,(function(){return self.submit(form,!0)})),modal.getRoot().on(ModalEvents.hidden,(function(){return self.revert()})),modal.show(),modal}))})):this.submit(form)}))},revert:function(){!0!==flag&&($('select[name="format"]').val(default_value),this.popup())},submit:function(form,flag_submit){flag=flag_submit,form.submit()}}}));

//# sourceMappingURL=editcourse.min.js.map