{"version":3,"file":"update_course_metadata.min.js","sources":["../src/update_course_metadata.js"],"sourcesContent":["/* eslint-disable no-undef */\r\n/* eslint-disable no-implicit-globals */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable max-len */\r\n// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Javascript main event handler.\r\n *\r\n * @module     local_petel/init\r\n * @package    local_petel\r\n * @copyright  2019 Devlionco <info@devlion.co>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n * @since      3.6\r\n */\r\n\r\n//import {add as notifyUser} from \"../../../../lib/amd/src/toast\";\r\n\r\ndefine([\r\n    'jquery',\r\n    'core/str',\r\n    'core/ajax',\r\n    'core/notification',\r\n    'core/modal_events',\r\n    'core/modal_factory',\r\n    'core/templates',\r\n], function ($, Str, Ajax, Notification, ModalEvents, ModalFactory, Templates) {\r\n\r\n\r\n    function renederPopup(html) {\r\n        Str.get_strings([\r\n            { key: 'titlepopupupdatecoursemetadata', component: 'local_petel' },\r\n            { key: 'approve', component: 'local_petel' }\r\n        ]).done(function (strings) {\r\n\r\n            ModalFactory.create({\r\n                type: ModalFactory.types.SAVE_CANCEL,\r\n                title: strings[0],\r\n                body: html\r\n            }).done(function (modal) {\r\n\r\n                modal.setSaveButtonText(strings[1]);\r\n\r\n                // Handle save event.\r\n                modal.getRoot().on(ModalEvents.save, function (e) {\r\n                    e.preventDefault();\r\n\r\n                    let courseid = modal.getRoot().find('#courseid').val();\r\n                    let cclass = modal.getRoot().find('#cclass').val();\r\n                    let cclasslevel = modal.getRoot().find('#cclasslevel').val();\r\n\r\n                    Ajax.call([{\r\n                        methodname: 'local_petel_update_course_metadata',\r\n                        args: {\r\n                            courseid: courseid,\r\n                            cclass: cclass,\r\n                            cclasslevel: cclasslevel,\r\n                        },\r\n                        done: function (response) {\r\n                            modal.destroy();\r\n                        },\r\n                        fail: Notification.exception\r\n                    }]);\r\n\r\n                });\r\n\r\n                modal.getRoot().on(ModalEvents.hidden, function() {\r\n                    modal.destroy();\r\n                })\r\n\r\n                modal.show();\r\n            });\r\n        });\r\n    }\r\n\r\n    return {\r\n        openPopup: function (courseid) {\r\n            Ajax.call([{\r\n                methodname: 'local_petel_popup_update_course_metadata',\r\n                args: {\r\n                    courseid: courseid\r\n                },\r\n                done: function (response) {\r\n                    let data = JSON.parse(response);\r\n\r\n                    Templates.render('local_petel/update_course_metadata_popup', data)\r\n                        .done(function (html, js) {\r\n                            renederPopup(html);\r\n                        })\r\n                },\r\n                fail: Notification.exception\r\n            }]);\r\n        }\r\n    };\r\n});"],"names":["define","$","Str","Ajax","Notification","ModalEvents","ModalFactory","Templates","openPopup","courseid","call","methodname","args","done","response","data","JSON","parse","render","html","js","get_strings","key","component","strings","create","type","types","SAVE_CANCEL","title","body","modal","setSaveButtonText","getRoot","on","save","e","preventDefault","find","val","cclass","cclasslevel","destroy","fail","exception","hidden","show","renederPopup"],"mappings":";;;;;;;;;AA+BAA,4CAAO,CACH,SACA,WACA,YACA,oBACA,oBACA,qBACA,mBACD,SAAUC,EAAGC,IAAKC,KAAMC,aAAcC,YAAaC,aAAcC,iBAiDzD,CACHC,UAAW,SAAUC,UACjBN,KAAKO,KAAK,CAAC,CACPC,WAAY,2CACZC,KAAM,CACFH,SAAUA,UAEdI,KAAM,SAAUC,cACRC,KAAOC,KAAKC,MAAMH,UAEtBP,UAAUW,OAAO,2CAA4CH,MACxDF,MAAK,SAAUM,KAAMC,cAzDpBD,MAClBjB,IAAImB,YAAY,CACZ,CAAEC,IAAK,iCAAkCC,UAAW,eACpD,CAAED,IAAK,UAAWC,UAAW,iBAC9BV,MAAK,SAAUW,SAEdlB,aAAamB,OAAO,CAChBC,KAAMpB,aAAaqB,MAAMC,YACzBC,MAAOL,QAAQ,GACfM,KAAMX,OACPN,MAAK,SAAUkB,OAEdA,MAAMC,kBAAkBR,QAAQ,IAGhCO,MAAME,UAAUC,GAAG7B,YAAY8B,MAAM,SAAUC,GAC3CA,EAAEC,qBAEE5B,SAAWsB,MAAME,UAAUK,KAAK,aAAaC,MAC7CC,OAAST,MAAME,UAAUK,KAAK,WAAWC,MACzCE,YAAcV,MAAME,UAAUK,KAAK,gBAAgBC,MAEvDpC,KAAKO,KAAK,CAAC,CACPC,WAAY,qCACZC,KAAM,CACFH,SAAUA,SACV+B,OAAQA,OACRC,YAAaA,aAEjB5B,KAAM,SAAUC,UACZiB,MAAMW,WAEVC,KAAMvC,aAAawC,gBAK3Bb,MAAME,UAAUC,GAAG7B,YAAYwC,QAAQ,WACnCd,MAAMW,aAGVX,MAAMe,aAiBMC,CAAa5B,UAGzBwB,KAAMvC,aAAawC"}