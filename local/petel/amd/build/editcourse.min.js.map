{"version":3,"file":"editcourse.min.js","sources":["../src/editcourse.js"],"sourcesContent":["/* eslint-disable no-undef */\n/* eslint-disable no-implicit-globals */\n/* eslint-disable no-unused-vars */\n/* eslint-disable max-len */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript main event handler.\n *\n * @module     local_petel/init\n * @package    local_petel\n * @copyright  2019 Devlionco <info@devlion.co>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.6\n */\n\n//import {add as notifyUser} from \"../../../../lib/amd/src/toast\";\n\ndefine([\n    'jquery',\n    'core/str',\n    'core/ajax',\n    'core/notification',\n    'core/modal_events',\n    'core/modal_factory',\n    'core/templates',\n    'core/toast'\n], function ($, Str, Ajax, Notification, ModalEvents, ModalFactory, Templates, toast) {\n\n    let default_value;\n    let flag;\n\n    return {\n        init: function () {\n            this.popup();\n        },\n\n        popup: function () {\n            let self = this;\n            default_value = $('select[name=\"format\"]').val();\n\n            $('form').one('submit', function(e) {\n                e.preventDefault();\n\n                let form = $(this);\n                let value = $('select[name=\"format\"]').val();\n\n                if(value !== default_value){\n\n                    Str.get_strings([\n                        { key: 'editcoursetitle', component: 'local_petel' },\n                        { key: 'editcoursebody', component: 'local_petel' },\n                        { key: 'editcourseapprove', component: 'local_petel' },\n                    ]).done(function (strings) {\n\n                        return ModalFactory.create({\n                            type: ModalFactory.types.SAVE_CANCEL,\n                            title: strings[0],\n                            body: strings[1],\n                            buttons: {\n                                save: strings[2],\n                            },\n                            removeOnClose: true,\n                        })\n                            .then(modal => {\n                                modal.getRoot().on(ModalEvents.save, () => self.submit(form, true));\n                                modal.getRoot().on(ModalEvents.hidden, () => self.revert());\n                                modal.show();\n                                return modal;\n                            });\n                    });\n\n                }else{\n                    this.submit(form);\n                }\n            });\n        },\n\n        revert: function () {\n            if(flag !== true) {\n                $('select[name=\"format\"]').val(default_value);\n                this.popup();\n            }\n        },\n\n        submit: function (form, flag_submit) {\n            flag = flag_submit;\n            form.submit()\n        },\n    };\n});"],"names":["define","$","Str","Ajax","Notification","ModalEvents","ModalFactory","Templates","toast","default_value","flag","init","popup","self","this","val","one","e","preventDefault","form","get_strings","key","component","done","strings","create","type","types","SAVE_CANCEL","title","body","buttons","save","removeOnClose","then","modal","getRoot","on","submit","hidden","revert","show","flag_submit"],"mappings":";;;;;;;;;AA+BAA,gCAAO,CACH,SACA,WACA,YACA,oBACA,oBACA,qBACA,iBACA,eACD,SAAUC,EAAGC,IAAKC,KAAMC,aAAcC,YAAaC,aAAcC,UAAWC,WAEvEC,cACAC,WAEG,CACHC,KAAM,gBACGC,SAGTA,MAAO,eACCC,KAAOC,KACXL,cAAgBR,EAAE,yBAAyBc,MAE3Cd,EAAE,QAAQe,IAAI,UAAU,SAASC,GAC7BA,EAAEC,qBAEEC,KAAOlB,EAAEa,MACDb,EAAE,yBAAyBc,QAE1BN,cAETP,IAAIkB,YAAY,CACZ,CAAEC,IAAK,kBAAmBC,UAAW,eACrC,CAAED,IAAK,iBAAkBC,UAAW,eACpC,CAAED,IAAK,oBAAqBC,UAAW,iBACxCC,MAAK,SAAUC,gBAEPlB,aAAamB,OAAO,CACvBC,KAAMpB,aAAaqB,MAAMC,YACzBC,MAAOL,QAAQ,GACfM,KAAMN,QAAQ,GACdO,QAAS,CACLC,KAAMR,QAAQ,IAElBS,eAAe,IAEdC,MAAK,SAAAC,cACFA,MAAMC,UAAUC,GAAGhC,YAAY2B,MAAM,kBAAMnB,KAAKyB,OAAOnB,MAAM,MAC7DgB,MAAMC,UAAUC,GAAGhC,YAAYkC,QAAQ,kBAAM1B,KAAK2B,YAClDL,MAAMM,OACCN,iBAKdG,OAAOnB,UAKxBqB,OAAQ,YACQ,IAAT9B,OACCT,EAAE,yBAAyBc,IAAIN,oBAC1BG,UAIb0B,OAAQ,SAAUnB,KAAMuB,aACpBhC,KAAOgC,YACPvB,KAAKmB,UAGhB"}