{"version":3,"file":"rectangle.min.js","sources":["../src/rectangle.js"],"sourcesContent":["define(['jquery'], function($){\r\n  return class Rectangle {\r\n    constructor(params, data, translateObj) {\r\n      this.params = params;\r\n      this.data = data;\r\n      this.translateObj = translateObj;\r\n      this.usersList = `<div class='tooltip-list-title'>${this.translateObj.userlisttitle}</div>` + data.users.map((el) => `<div>${el.fullname}</div>`).join('');\r\n    }\r\n\r\n    addRectangle(contain) {\r\n      var this_ = this;\r\n      let container;\r\n\r\n      if (contain) {\r\n        container = contain;\r\n      } else {\r\n        container = this.params.svg.append(\"g\")\r\n          .attr(\"data-id\", this.data.id)\r\n          .attr(\"class\", `claster-${this.data.id}`)\r\n      }\r\n\r\n      container.append('rect')\r\n        .attr(\"x\", 0)\r\n        .attr(\"y\", 50)\r\n        .attr(\"width\", `582px`)\r\n        .attr(\"height\", 70)\r\n        .attr(\"fill\", \"#ffffff\")\r\n        .attr(\"data-claster\", this.data.id)\r\n\r\n      let claster0Text = this.translateObj.rectangletitle;\r\n\r\n      container.append('svg:foreignObject')\r\n        .attr(\"width\", 582)\r\n        .attr(\"height\", 35)\r\n        .attr(\"transform\", `translate(5, 50)`)\r\n        .attr(\"data-claster\", this.data.id)\r\n        .html(`\r\n          <div \r\n            class='claster0-text' \r\n            style=\"transform: ${this.params.currentLang ? 'scale(-1, 1)' : 'none'};\r\n            text-align: ${this.params.currentLang ? 'right' : 'left'};\"\r\n          >\r\n            <div class=\"claster0-text-inside\">\r\n              ${claster0Text}\r\n            </div>\r\n            \r\n            <div class=\"bottom-block bottom-block-rect\">\r\n            <div \r\n              data-text=\"${this.usersList}\"\r\n              data-class=\"tooltip-list tooltip-list-rect\"\r\n              data-position=\"bottom\"\r\n              class=\"tooltip-block btn btn-primary\" \r\n              data-claster=\"${this.data.id}\"\r\n            >\r\n              <i class=\"fas fa-users icon-cub\"></i>\r\n            </div>\r\n            </div>\r\n          </div>\r\n        `)\r\n\r\n      var root = this.params.d3.hierarchy(this.params.classes(this.data));\r\n\r\n      if (this.data.users.length > 0){\r\n        var node = container.selectAll(\".node\")\r\n          .data(root.children)\r\n          .enter().append(\"g\")\r\n          .attr(\"class\", \"node\")\r\n\r\n        let stepX = -30;\r\n        let stepY = 56;\r\n        let split = 14;\r\n\r\n        node.append('svg:foreignObject')\r\n        .attr('width', function(d, i) { return d.data.value; })\r\n        .attr('height', function(d, i) { return d.data.value; })\r\n        .attr('data-id', function(d, i) { return d.data.id; })\r\n        .attr('data-claster', this.data.id)\r\n        .attr('class', `image image-${this.data.id}`)\r\n        .attr('y', function (d) {\r\n          if (d.data.item % split === 0){\r\n            stepY = stepY + 30;\r\n          }\r\n          return stepY;\r\n        })\r\n        .attr('x', function (d) {\r\n          if (d.data.item % split === 0){\r\n            stepX = -30;\r\n          }\r\n          stepX = stepX + 38;\r\n          return stepX;\r\n        })\r\n        .style('color', function(d, i) {\r\n          return this_.params.iconsColors[d.data.icon];\r\n        })\r\n        .html(`<i \r\n          style=\"font-size:${this.params.sizeCircle}px;\r\n          transform: ${this.params.currentLang ? 'scale(-1, 1)' : 'none'}\" \r\n          class=\"fas fa-user-graduate\" \r\n          data-claster=\"${this.data.id}\"></i>`)\r\n        .on(\"mouseover\", function(d){\r\n          this_.params.tooltip.html(d.data.fullname)\r\n          let tooltipParams = this_.params.tooltip.node().getBoundingClientRect()\r\n          this_.params.tooltip.style(\"visibility\", \"visible\");\r\n          this_.params.tooltip.style(\"top\", (event.pageY - $(this_.params.htmlRootElement).offset().top - tooltipParams.height - 25)+\"px\")\r\n          this_.params.tooltip.style(\"left\",(event.pageX - $(this_.params.htmlRootElement).offset().left - tooltipParams.width / 2)+\"px\");\r\n          })\r\n        .on(\"mouseout\", function(d){\r\n          this_.params.tooltip.style(\"visibility\", \"hidden\");\r\n        })\r\n      }\r\n    }\r\n\r\n    recreate(){\r\n      let container = this.params.d3.select(`g.claster-${this.data.id}`)\r\n\r\n      let rectItem = new Rectangle(this.params, this.data, this.translateObj)\r\n      rectItem.addRectangle(container)\r\n    }\r\n  }\r\n});\r\n"],"names":["define","$","Rectangle","constructor","params","data","translateObj","this","usersList","userlisttitle","users","map","el","fullname","join","addRectangle","contain","this_","container","svg","append","attr","id","claster0Text","rectangletitle","html","currentLang","root","d3","hierarchy","classes","length","node","selectAll","children","enter","stepX","stepY","split","d","i","value","item","style","iconsColors","icon","sizeCircle","on","tooltip","tooltipParams","getBoundingClientRect","event","pageY","htmlRootElement","offset","top","height","pageX","left","width","recreate","select"],"mappings":"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"}