{"version":3,"file":"common-block.min.js","sources":["../src/common-block.js"],"sourcesContent":["define(['jquery'], function($){\n  return class CommonBlock {\n    constructor(p_, totalData, translateObj) {\n      this.p_ = {...p_};\n      this.totalDataInfo = '';\n      this.blockX;\n      this.p_.x;\n      this.p_.y;\n      if ('info' in totalData) {\n        this.totalDataInfo = totalData.info;\n      }\n      this.translateObj = translateObj;\n      this.exportBtn = '';\n      console.log(totalData);\n      if ('cmids' in totalData && totalData.cmids !== '') {\n        let href = M.cfg.wwwroot + '/local/diagnostic/excel.php?cmids=' + totalData.cmids + '&type=' + totalData.type + '&questionid=' + totalData.questionid;\n        this.exportBtn = `<div class=\"tooltip-block btn btn-primary\" data-text=\"${this.translateObj.export_excel}\" id=\"export_to_excel\">\n                            <a class=\"fa fa-file-excel\" target=\"_blank\" aria-hidden=\"true\" href=\"${href}\"></a>\n                         </div>`;\n      }\n    }\n    getPosition(){\n      return {\n        x: this.p_.x,\n        y: this.p_.y\n      }\n    }\n\n    changePosition(x, y){\n      if (x || y){\n        $(`g.common-top-block`).attr('transform', `translate(${x}, ${y})`);\n        this.p_.x = x;\n        this.p_.y = y;\n      } else {\n        $(`g.common-top-block`).attr('transform', `translate(${this.blockX}, 0)`);\n        this.p_.x = this.blockX;\n        this.p_.y = 0;\n      }\n    }\n\n    addBlock(x=false, y=false){\n      let self = this;\n      let\n        blockWidth = self.p_.topBlockWith,\n        blockHeight = 100,\n        blockY,\n        text;\n\n      if (x || x === 0){\n        this.blockX = x;\n      } else {\n        this.blockX = this.p_.documentWith - blockWidth - self.p_.topBlockRightSpace - 170;\n      }\n\n      if (y || y === 0){\n        blockY = y;\n      } else {\n        blockY = 0;\n      }\n\n      this.p_.x = this.blockX;\n      this.p_.y = blockY;\n\n      text = this.translateObj.commontitle;\n\n      let container = this.p_.svg.append(\"g\")\n        .attr(\"transform\", `translate(${this.blockX}, ${blockY})`)\n        .attr(\"class\", `common-top-block`)\n\n      container\n        .append('svg:foreignObject')\n        .attr('width', `${blockWidth}px`)\n        .attr('height', `${blockHeight}px`)\n        .html(`\n          <div class=\"common-block-parent\">\n          <div class=\"two-buttons\">\n            <div class=\"two-buttons-picture-b\">\n              <div class=\"two-buttons-picture\">\n                <div class=\"two-buttons-p-center\">\n                  <i class=\"fas fa-image\"></i>\n                </div>\n              </div>\n              <div \n                class=\"two-bp-text\" \n                style=\"transform: ${this.p_.currentLang ? 'scale(-1, 1)' : 'none'}\">\n                text\n              </div>\n            </div>\n            <div class=\"two-buttons-list-b\">\n              <div class=\"two-buttons-list\">\n                <i class=\"fas fa-list-ul\"></i>\n                <div class=\"line1\"></div>\n                <div class=\"line2\"></div>\n                <div class=\"line3\"></div>\n              </div>\n              <div \n                class=\"two-bl-text\"\n                style=\"transform: ${this.p_.currentLang ? 'scale(-1, 1)' : 'none'}\">\n                text\n              </div>\n            </div>\n          </div>\n          <div style='\n              background: ${this.p_.backgroundColor};\n              display: inline-block;\n              text-align: center;\n              border-radius: 5px;\n              margin-bottom: 14px;\n              width: 250px;\n              margin: 2px;\n              margin-left: auto;\n              padding-top: 6px;\n              padding-bottom: 2px;\n              -webkit-box-shadow: 0px 0px 2px 0px rgba(34, 60, 80, 0.3);\n              -moz-box-shadow: 0px 0px 2px 0px rgba(34, 60, 80, 0.3);\n              box-shadow: 0px 0px 2px 0px rgba(34, 60, 80, 0.3);\n            '\n          >\n            <div style=\"margin-bottom: 6px; transform: ${this.p_.currentLang ? 'scale(-1, 1)' : 'none'}\">\n            ${text}\n            </div>\n            <div class=\"bottom-block\" style=\"margin-bottom: 6px\">\n              <div class=\"bottom-container\">\n                <div \n                  class=\"tooltip-block-n circle-first-button cfb-activity btn btn-primary\"\n                  data-claster=\"all\"\n                >\n                  <i class=\"fas fa-caret-down cfb-activity\"></i>\n                  <i class=\"fal fa-user-chart cfb-activity\" style=\"transform: ${this.p_.currentLang ? 'scale(-1, 1)' : 'none'}\"></i>\n                </div>\n                <!--<div class=\"tooltip-block-n\" data-claster=\"-1\">\n                  <i class=\"fas fa-users icon-cub\"></i>\n                </div>-->\n                <div \n                  data-text=\"${self.totalDataInfo}\"\n                  data-x=\"0\" data-y=\"0\"\n                  class=\"tooltip-block btn btn-primary\">\n                  <i class=\"fas fa-info icon-info\" style=\"transform: ${this.p_.currentLang ? 'scale(-1, 1)' : 'none'}\"></i>\n                </div>\n                ${self.exportBtn}\n              </div>\n            </div>\n          </div>\n          </div>\n        `)\n    }\n  }\n});"],"names":["define","$","constructor","p_","totalData","translateObj","totalDataInfo","blockX","x","y","info","exportBtn","console","log","cmids","href","M","cfg","wwwroot","type","questionid","this","export_excel","getPosition","changePosition","attr","addBlock","blockY","text","self","blockWidth","topBlockWith","documentWith","topBlockRightSpace","commontitle","svg","append","html","currentLang","backgroundColor"],"mappings":"AAAAA,uCAAO,CAAC,WAAW,SAASC,UACnB,MACLC,WAAAA,CAAYC,GAAIC,UAAWC,sBACpBF,GAAK,IAAIA,SACTG,cAAgB,QAChBC,YACAJ,GAAGK,OACHL,GAAGM,EACJ,SAAUL,iBACPE,cAAgBF,UAAUM,WAE5BL,aAAeA,kBACfM,UAAY,GACjBC,QAAQC,IAAIT,WACR,UAAWA,WAAiC,KAApBA,UAAUU,MAAc,KAC9CC,KAAOC,EAAEC,IAAIC,QAAU,qCAAuCd,UAAUU,MAAQ,SAAWV,UAAUe,KAAO,eAAiBf,UAAUgB,gBACtIT,UAAa,yDAAwDU,KAAKhB,aAAaiB,yIACDP,+CAI/FQ,WAAAA,SACS,CACLf,EAAGa,KAAKlB,GAAGK,EACXC,EAAGY,KAAKlB,GAAGM,GAIfe,cAAAA,CAAehB,EAAGC,GACZD,GAAKC,GACPR,EAAG,sBAAqBwB,KAAK,YAAc,aAAYjB,MAAMC,WACxDN,GAAGK,EAAIA,OACPL,GAAGM,EAAIA,IAEZR,EAAG,sBAAqBwB,KAAK,YAAc,aAAYJ,KAAKd,mBACvDJ,GAAGK,EAAIa,KAAKd,YACZJ,GAAGM,EAAI,GAIhBiB,QAAAA,OAKIC,OACAC,KANKpB,0DAASC,0DACZoB,KAAOR,KAETS,WAAaD,KAAK1B,GAAG4B,kBAMhBxB,OADHC,GAAW,IAANA,EACOA,EAEAa,KAAKlB,GAAG6B,aAAeF,WAAaD,KAAK1B,GAAG8B,mBAAqB,IAI/EN,OADElB,GAAW,IAANA,EACEA,EAEA,OAGNN,GAAGK,EAAIa,KAAKd,YACZJ,GAAGM,EAAIkB,OAEZC,KAAOP,KAAKhB,aAAa6B,YAETb,KAAKlB,GAAGgC,IAAIC,OAAO,KAChCX,KAAK,YAAc,aAAYJ,KAAKd,WAAWoB,WAC/CF,KAAK,QAAU,oBAGfW,OAAO,qBACPX,KAAK,QAAU,GAAEK,gBACjBL,KAAK,SAAW,SAChBY,KAAM,waAWqBhB,KAAKlB,GAAGmC,YAAc,eAAiB,4cAavCjB,KAAKlB,GAAGmC,YAAc,eAAiB,iJAM/CjB,KAAKlB,GAAGoC,2mBAeqBlB,KAAKlB,GAAGmC,YAAc,eAAiB,yBAClFV,0cASkEP,KAAKlB,GAAGmC,YAAc,eAAiB,4PAMxFT,KAAKvB,2LAGmCe,KAAKlB,GAAGmC,YAAc,eAAiB,yDAE5FT,KAAKlB,sGAQtB"}