{"version":3,"file":"activities.min.js","sources":["../src/activities.js"],"sourcesContent":["define([\r\n    'jquery',\r\n    'core/templates',\r\n    'core/str',\r\n    'core/ajax',\r\n    'core/notification',\r\n], function ($, Templates, Str, Ajax, Notification) {\r\n    return class Activities {\r\n        constructor(p_, translateObj, shapesItems, CircleAnimation, courseId) {\r\n            this.p_ = {...p_};\r\n            this.translateObj = translateObj;\r\n            this.modal;\r\n            this.currentCluster;\r\n            this.data = {};\r\n            this.shapesItems = shapesItems;\r\n            this.CircleAnimation = CircleAnimation;\r\n            this.courseId = courseId;\r\n            this.clustersIds = [];\r\n            this.init();\r\n        }\r\n\r\n        init() {\r\n            let self = this;\r\n            for (let i = 1; i < this.shapesItems.length; i++) {\r\n                let obj = this.shapesItems[i];\r\n                if (obj && obj.data && obj.data.id) {\r\n                    self.clustersIds.push(obj.data.id);\r\n                }\r\n            }\r\n\r\n            this.actions();\r\n        }\r\n\r\n        getData() {\r\n            console.log('data ', this.data);\r\n            return this.data;\r\n        }\r\n\r\n        isDataEmpty() {\r\n            let data = this.data;\r\n            let result = true;\r\n            if (Object.keys(data).length !== 0) {\r\n                for (let key in data) {\r\n                    if (data[key]['cmidsRepo'].length !== 0) {\r\n                        result = false;\r\n                    }\r\n                    if (data[key]['cmidsCourse'].length !== 0) {\r\n                        result = false;\r\n                    }\r\n                    if (data[key]['cmidsRecom'].length !== 0) {\r\n                        result = false;\r\n                    }\r\n                }\r\n            } else {\r\n                result = true;\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        checkParrentCheckbox() {\r\n            let allParrentCheckbox = $('div.local-diagnostic-base-block #local_diagnostic_activities_modal ul input.parent[type=\"checkbox\"]');\r\n            allParrentCheckbox.each(function () {\r\n                const parentUl = $(this).closest('ul');\r\n\r\n                let allChecked = true;\r\n                parentUl.find('input.child').each(function () {\r\n                    if (!$(this).is(':checked')) {\r\n                        allChecked = false;\r\n                    }\r\n                });\r\n\r\n                if (allChecked) {\r\n                    parentUl.find('input.parent').prop('checked', true);\r\n                } else {\r\n                    parentUl.find('input.parent').prop('checked', false);\r\n                }\r\n            });\r\n        }\r\n\r\n        async circleSelectAll() {\r\n            for (let i = 0; i < this.clustersIds.length; i++) {\r\n                let key = this.clustersIds[i];\r\n                let cmidsArr = this.data[key]['cmidsCourse'];\r\n                let repoArr = this.data[key]['cmidsRepo'];\r\n                let recomArr = this.data[key]['cmidsRecom'];\r\n                let description = this.data[key]['description'];\r\n\r\n                let translateCmids = await Str.get_string('selected_from_my_courses', 'local_diagnostic', cmidsArr.length);\r\n                let translateRecom = await Str.get_string('selected_from_recom', 'local_diagnostic', cmidsArr.length);\r\n                let translateRepo = await Str.get_string('selected_from_repository', 'local_diagnostic', repoArr.length);\r\n\r\n                let borderColor = \"#FFFFFF\";\r\n                if (cmidsArr.length > 0 || repoArr.length > 0) {\r\n                    borderColor = \"#4B7F3E\";\r\n                    $(`.popup-local-diagnostic g.claster-${key} rect`).remove();\r\n                }\r\n\r\n                $(`.popup-local-diagnostic g.claster-${key} circle`).css(\"stroke\", borderColor);\r\n\r\n                if (cmidsArr.length > 0) {\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster`).css('display', 'block');\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster`).html(translateCmids);\r\n                } else {\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster`).css('display', 'none');\r\n                }\r\n\r\n                if (repoArr.length > 0) {\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster-repo`).css('display', 'block');\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster-repo`).html(translateRepo);\r\n                } else {\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster-repo`).css('display', 'none');\r\n                }\r\n\r\n                if (recomArr.length > 0) {\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster-repo`).css('display', 'block');\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster-repo`).html(translateRecom);\r\n                } else {\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .text-under-claster-repo`).css('display', 'none');\r\n                }\r\n\r\n                if (description || description === '') {\r\n                    $(`.popup-local-diagnostic g.claster-${key} .bottom-block .description-cluster`).html(description);\r\n                }\r\n\r\n                if (this.shapesItems[key].p_) {\r\n                    this.shapesItems[key].p_.backBorderColor = borderColor;\r\n\r\n                    if (cmidsArr.length > 0) {\r\n                        this.shapesItems[key].p_.activities = translateCmids;\r\n                    }\r\n                    if (repoArr.length > 0) {\r\n                        this.shapesItems[key].p_.activitiesRepo = translateRepo;\r\n                    }\r\n                    if (recomArr.length > 0) {\r\n                        this.shapesItems[key].p_.activitiesRecom = translateRecom;\r\n                    }\r\n                    if (description || description === '') {\r\n                        this.shapesItems[key].p_.description = description;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        async circleSelect(activitiesArr, repoArr, recomArr, description) {\r\n            let translateCourse, translateRepo, translateRecom;\r\n            if (activitiesArr.length > 0) {\r\n                translateCourse = await Str.get_string('selected_from_my_courses', 'local_diagnostic', activitiesArr.length);\r\n            } else {\r\n                translateCourse = '';\r\n            }\r\n            if (repoArr.length > 0) {\r\n                translateRepo = await Str.get_string('selected_from_repository', 'local_diagnostic', repoArr.length);\r\n            } else {\r\n                translateRepo = '';\r\n            }\r\n            if (recomArr.length > 0) {\r\n                translateRecom = await Str.get_string('selected_from_recom', 'local_diagnostic', recomArr.length);\r\n            } else {\r\n                translateRecom = '';\r\n            }\r\n            let borderColor = \"#FFFFFF\";\r\n            if (activitiesArr.length > 0 || repoArr.length > 0 || recomArr.length > 0) {\r\n                borderColor = \"#4B7F3E\";\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} rect`).remove();\r\n            }\r\n            $(`.popup-local-diagnostic g.claster-${this.currentCluster} circle`).css(\"stroke\", borderColor);\r\n\r\n            if (activitiesArr.length > 0) {\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster`).css('display', 'block');\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster`).html(translateCourse);\r\n            } else {\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster`).css('display', 'none');\r\n            }\r\n\r\n            if (repoArr.length > 0) {\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster-repo`).css('display', 'block');\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster-repo`).html(translateRepo);\r\n            } else {\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster-repo`).css('display', 'none');\r\n            }\r\n\r\n            if (recomArr.length > 0) {\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster-recom`).css('display', 'block');\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster-recom`).html(translateRecom);\r\n            } else {\r\n                $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .text-under-claster-recom`).css('display', 'none');\r\n            }\r\n\r\n            $(`.popup-local-diagnostic g.claster-${this.currentCluster} .bottom-block .description-cluster`).html(description);\r\n\r\n            let shapesItem = null;\r\n            this.shapesItems.forEach(function(objshape) {\r\n                if (objshape.clusternum === self.currentCluster) {\r\n                    shapesItem = objshape;\r\n                }\r\n            });\r\n\r\n\r\n            if (shapesItem.p_) {\r\n                shapesItem.p_.backBorderColor = borderColor;\r\n                shapesItem.p_.activities = translateCourse;\r\n                shapesItem.p_.activitiesRepo = translateRepo;\r\n                shapesItem.p_.activitiesRecom = translateRecom;\r\n                shapesItem.p_.description = description;\r\n            }\r\n        }\r\n\r\n        async clearData() {\r\n            let self = this;\r\n\r\n            self.data = {};\r\n\r\n            for (let i = 0; i < self.shapesItems.length; i++) {\r\n                self.currentCluster = i;\r\n                await self.circleSelect([], [], '');\r\n            }\r\n        }\r\n\r\n        changeDataAll(cmidsCourse = false, cmidsRepo = false, cmidsRecom = false, description = false, recommend = false) {\r\n            let self = this;\r\n\r\n            for (let i = 0; i < self.clustersIds.length; i++) {\r\n                let key = self.clustersIds[i];\r\n\r\n                if (key in self.data) {\r\n                    if (cmidsCourse) {\r\n                        self.data[key]['cmidsCourse'] = cmidsCourse;\r\n                    }\r\n                    if (cmidsRepo) {\r\n                        self.data[key]['cmidsRepo'] = cmidsRepo;\r\n                    }\r\n                    if (cmidsRecom) {\r\n                        self.data[key]['cmidsRecom'] = cmidsRecom;\r\n                    }\r\n                    if (description || description === '') {\r\n                        self.data[key]['description'] = description;\r\n                    }\r\n                    self.data[key]['recommend'] = recommend;\r\n                } else {\r\n                    self.data[key] = {\r\n                        cmidsCourse: cmidsCourse ? cmidsCourse : [],\r\n                        cmidsRepo: cmidsRepo ? cmidsRepo : [],\r\n                        cmidsRecom: cmidsRecom ? cmidsRecom : [],\r\n                        description: description ? description : '',\r\n                        recommend: recommend,\r\n                    }\r\n                }\r\n            }\r\n\r\n            self.circleSelectAll();\r\n\r\n            if (self.isDataEmpty()) {\r\n                $('div.popup-local-diagnostic-main-modal .modal-footer').css('display', 'none');\r\n            } else {\r\n                $('div.popup-local-diagnostic-main-modal .modal-footer').css('display', 'flex');\r\n            }\r\n        }\r\n\r\n        changeData(cmidsCourse = false, cmidsRepo = false, cmidsRecom = false, description = false, recommend = false) {\r\n            let self = this;\r\n\r\n            if (self.currentCluster in self.data) {\r\n                if (cmidsCourse) {\r\n                    self.data[self.currentCluster]['cmidsCourse'] = cmidsCourse;\r\n                }\r\n                if (cmidsRepo) {\r\n                    self.data[self.currentCluster]['cmidsRepo'] = cmidsRepo;\r\n                }\r\n                if (cmidsRecom) {\r\n                    self.data[self.currentCluster]['cmidsRecom'] = cmidsRecom;\r\n                }\r\n                if (description === '' || description) {\r\n                    self.data[self.currentCluster]['description'] = description;\r\n                }\r\n                self.data[self.currentCluster]['recommend'] = recommend;\r\n            } else {\r\n                self.data[self.currentCluster] = {\r\n                    cmidsCourse: cmidsCourse ? cmidsCourse : [],\r\n                    cmidsRepo: cmidsRepo ? cmidsRepo : [],\r\n                    cmidsRecom: cmidsRecom ? cmidsRecom : [],\r\n                    description: description ? description : '',\r\n                    recommend: recommend,\r\n                };\r\n            }\r\n\r\n            let cmidsReroArr = self.data[self.currentCluster]['cmidsRepo'];\r\n            let cmidsCourseArr = self.data[self.currentCluster]['cmidsCourse'];\r\n            let cmidsRecomArr = self.data[self.currentCluster]['cmidsRecom'];\r\n\r\n            self.circleSelect(\r\n                cmidsCourseArr,\r\n                cmidsReroArr,\r\n                cmidsRecomArr,\r\n                self.data[self.currentCluster]['description']\r\n            );\r\n\r\n            if (self.isDataEmpty()) {\r\n                $('div.popup-local-diagnostic-main-modal .modal-footer').css('display', 'none');\r\n            } else {\r\n                $('div.popup-local-diagnostic-main-modal .modal-footer').css('display', 'flex');\r\n            }\r\n        }\r\n\r\n        async actions() {\r\n            const self = this;\r\n            const p_ = self.p_;\r\n\r\n            // get checkboxes text\r\n            var promise = Ajax.call([{\r\n                methodname: 'local_diagnostic_get_all_course_quizzes',\r\n                args: {\r\n                    courseid: self.courseId\r\n                }\r\n            }]);\r\n\r\n            const checkboxesText = await promise[0].done(function (data) {\r\n                return data;\r\n            }).fail(function (ex) {\r\n                console.log(ex);\r\n                return false;\r\n            });\r\n            ;\r\n\r\n            // open popup\r\n            const openModalEl = $(`${p_.htmlRootElement} .svgСharts-tooltip-select div.activity-course`);\r\n            openModalEl.off(\"click\");\r\n            openModalEl.on(\"click\", async function () {\r\n                let parentEl = $(this).closest('.svgСharts-tooltip-select')\r\n                self.currentCluster = parentEl.attr('data-claster');\r\n\r\n                if (self.currentCluster === 'all') {\r\n                    actionActivityCourseAll();\r\n                    return;\r\n                }\r\n\r\n                let clusterName = '';\r\n                let clusterInfo = '';\r\n                self.shapesItems.forEach(function(objshape) {\r\n                    if (objshape.clusternum === self.currentCluster) {\r\n                        clusterName = objshape['data']['clustername'];\r\n                        clusterInfo = objshape['data']['info'];\r\n                    }\r\n                });\r\n\r\n                Templates.render('local_diagnostic/activities-body', {\r\n                    title: self.translateObj['share_activities_course_title'],\r\n                    data: checkboxesText ? checkboxesText : '',\r\n                    clusterName,\r\n                })\r\n                    .done(function (html, js) {\r\n                        Templates.replaceNodeContents('#local_diagnostic_activities_modal .modal-body', html, js);\r\n\r\n                        var zindex = $(\".popup-local-diagnostic-main-modal\").css(\"z-index\");\r\n                        zindex = zindex + 1;\r\n\r\n                        $(\"#local_diagnostic_activities_modal\").css(\"z-index\", zindex);\r\n\r\n                        $('#local_diagnostic_activities_modal').modal('show');\r\n                    })\r\n                    .fail(Notification.exception);\r\n\r\n                // clear description\r\n                $('#local_diagnostic_description_modal textarea').val('');\r\n                $('#local_diagnostic_description_modal div.description-info').html(clusterInfo);\r\n                $('#local_diagnostic_description_modal div.modal-body-description h3 b').html(clusterName);\r\n                // checkboxes check\r\n                if (!self.data || !self.data[self.currentCluster] || !self.data[self.currentCluster]['cmidsCourse']) {\r\n                    return;\r\n                }\r\n\r\n                self.data[self.currentCluster]['cmidsCourse'].forEach((el) => {\r\n                    $(`div.local-diagnostic-base-block #local_diagnostic_activities_modal ul input[data-id=${el}]`).prop('checked', true);\r\n                });\r\n\r\n                self.checkParrentCheckbox();\r\n\r\n                // restore description\r\n                if (self.data[self.currentCluster]['description']) {\r\n                    $('#local_diagnostic_description_modal textarea').val(self.data[self.currentCluster]['description']);\r\n                }\r\n\r\n                if (self.data[self.currentCluster]['recommend']) {\r\n                    $('#local_diagnostic_description_modal .modal-body-recommend input[type=\"checkbox\"]').val(self.data[self.currentCluster]['recommend']);\r\n                }\r\n            });\r\n\r\n            /* checkbox logic */\r\n            $('body').off('click', 'div.popup-local-diagnostic .activities-diagnostic .parent');\r\n            $('body').on('click', 'div.popup-local-diagnostic .activities-diagnostic .parent', function () {\r\n                const parentUl = $(this).closest('ul');\r\n                if ($(this).is(':checked')) {\r\n                    parentUl.find('input').prop('checked', true);\r\n                } else {\r\n                    parentUl.find('input').prop('checked', false);\r\n                }\r\n            });\r\n\r\n            $('body').off('click', 'div.popup-local-diagnostic .activities-diagnostic input.child');\r\n            $('body').on('click', 'div.popup-local-diagnostic .activities-diagnostic input.child', function () {\r\n                const parentUl = $(this).closest('ul');\r\n\r\n                let allChecked = true;\r\n                parentUl.find('input.child').each(function () {\r\n                    if (!$(this).is(':checked')) {\r\n                        allChecked = false;\r\n                    }\r\n                });\r\n\r\n                if (allChecked) {\r\n                    parentUl.find('input.parent').prop('checked', true);\r\n                } else {\r\n                    parentUl.find('input.parent').prop('checked', false);\r\n                }\r\n            });\r\n            /* checkbox logic end */\r\n\r\n            // submit activities, show description popup\r\n            $('body').off('click', '#local_diagnostic_activities_modal #submit');\r\n            $('body').on('click', '#local_diagnostic_activities_modal #submit', async function () {\r\n\r\n                // Calculate zindex.\r\n                var zindex = $(\"#local_diagnostic_activities_modal\").css(\"z-index\");\r\n                zindex = zindex + 1;\r\n                $(\"#local_diagnostic_description_modal\").css(\"z-index\", zindex);\r\n\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'hidden');\r\n                $('#local_diagnostic_description_modal').modal('show');\r\n            });\r\n\r\n            // submit description\r\n            $('body').off('click', '#local_diagnostic_description_modal #description_submit');\r\n            $('body').on('click', '#local_diagnostic_description_modal #description_submit', function () {\r\n                const checkboxes = $('div.popup-local-diagnostic .activities-diagnostic ul input.child[type=\"checkbox\"]');\r\n\r\n                let cmidsArr = [];\r\n                checkboxes.each(function () {\r\n                    let this_ = $(this);\r\n                    let id = this_.attr('data-id');\r\n                    if (this_.is(':checked')) {\r\n                        cmidsArr.push(id);\r\n                    }\r\n                });\r\n\r\n                const description = $('#local_diagnostic_description_modal textarea').val();\r\n                const recommend = $('#local_diagnostic_description_modal input.recommend').is(':checked');\r\n\r\n                if (self.currentCluster === 'all') {\r\n                    self.changeDataAll(cmidsArr, false, false, description, recommend);\r\n                } else {\r\n                    self.changeData(cmidsArr, false, false, description, recommend);\r\n                }\r\n\r\n                $('#local_diagnostic_description_modal').modal('hide');\r\n                $('#local_diagnostic_activities_modal').modal('hide');\r\n\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'visible');\r\n            });\r\n\r\n            $('body').off('click', '#local_diagnostic_description_modal .description-close');\r\n            $('body').on('click', '#local_diagnostic_description_modal .description-close', function () {\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'visible');\r\n            });\r\n\r\n            const openRecomModalTraverse = $(`${p_.htmlRootElement} .svgСharts-tooltip-select div.activity-recom`);\r\n            openRecomModalTraverse.off(\"click\");\r\n            openRecomModalTraverse.on(\"click\", async function () {\r\n                let parentEl = $(this).closest('.svgСharts-tooltip-select');\r\n                self.currentCluster = parentEl.attr('data-claster');\r\n                if (self.currentCluster === 'all') {\r\n                    actionActivityCourseAll();\r\n                    return;\r\n                }\r\n\r\n                let clusterName = '';\r\n                if (self.shapesItems[self.currentCluster] &&\r\n                    self.shapesItems[self.currentCluster]['data'] &&\r\n                    self.shapesItems[self.currentCluster]['data']['clustername']) {\r\n                    clusterName = self.shapesItems[self.currentCluster]['data']['clustername'];\r\n                }\r\n\r\n                if (self.shapesItems[self.currentCluster] &&\r\n                    self.shapesItems[self.currentCluster]['data'] &&\r\n                    self.shapesItems[self.currentCluster]['data']['clusternum']) {\r\n                    clusterName = self.shapesItems[self.currentCluster]['data']['clusternum'];\r\n                }\r\n\r\n                Templates.render('local_diagnostic/recommend-body', {\r\n                    title: self.translateObj['share_activities_recom_title'],\r\n                    titletext: self.translateObj['share_activities_recom_titletext'],\r\n                    data: self.p_.data[self.currentCluster].recommend ? self.p_.data[self.currentCluster].recommend : '',\r\n                    clusterName,\r\n                })\r\n                    .done(function (html, js) {\r\n                        Templates.replaceNodeContents('#local_diagnostic_recommend_modal .modal-body', html, js);\r\n\r\n                        var zindex = $(\".popup-local-diagnostic-main-modal\").css(\"z-index\");\r\n                        zindex = zindex + 1;\r\n\r\n                        $(\"#local_diagnostic_recommend_modal\").css(\"z-index\", zindex);\r\n\r\n                        $('#local_diagnostic_recommend_modal').modal('show');\r\n                    })\r\n                    .fail(Notification.exception);\r\n\r\n                // clear description\r\n                $('#local_diagnostic_description_recom_modal textarea').val('');\r\n                $('#local_diagnostic_description_recom_modal div.description-info').html(self.shapesItems[self.currentCluster]['data']['info']);\r\n                $('#local_diagnostic_description_recom_modal div.modal-body-description-recom h3 b').html(clusterName);\r\n\r\n                // checkboxes check\r\n                if (!self.data || !self.data[self.currentCluster] || !self.data[self.currentCluster]['cmidsRecom']) {\r\n                    return;\r\n                }\r\n\r\n                self.data[self.currentCluster]['cmidsRecom'].forEach((el) => {\r\n                    $(`div.local-diagnostic-base-block #local_diagnostic_recommend_modal ul input[data-id=${el}]`).prop('checked', true);\r\n                });\r\n\r\n                self.checkParrentCheckbox();\r\n\r\n                // restore description\r\n                if (self.data[self.currentCluster]['description']) {\r\n                    $('#local_diagnostic_description_recom_modal textarea').val(self.data[self.currentCluster]['description']);\r\n                }\r\n\r\n                if (self.data[self.currentCluster]['recommend']) {\r\n                    $('#local_diagnostic_description_recom_modal .modal-body-recommend input[type=\"checkbox\"]').val(self.data[self.currentCluster]['recommend']);\r\n                }\r\n            });\r\n\r\n            /* checkbox logic */\r\n            $('body').off('click', 'div.popup-local-diagnostic .recommend-diagnostic .selectall');\r\n            $('body').on('click', 'div.popup-local-diagnostic .recommend-diagnostic .selectall', function () {\r\n                const parentContainer = $(this).closest('.recommend-diagnostic');\r\n                if ($(this).is(':checked')) {\r\n                    parentContainer.find('input').prop('checked', true);\r\n                } else {\r\n                    parentContainer.find('input').prop('checked', false);\r\n                }\r\n            });\r\n\r\n            $('body').off('click', 'div.popup-local-diagnostic .recommend-diagnostic input.child');\r\n            $('body').on('click', 'div.popup-local-diagnostic .recommend-diagnostic input.child', function () {\r\n                const parentContainer = $(this).closest('.recommend-diagnostic');\r\n\r\n                let allChecked = true;\r\n                parentContainer.find('input.child').each(function () {\r\n                    if (!$(this).is(':checked')) {\r\n                        allChecked = false;\r\n                    }\r\n                });\r\n\r\n                if (allChecked) {\r\n                    parentContainer.find('input.parent').prop('checked', true);\r\n                } else {\r\n                    parentContainer.find('input.parent').prop('checked', false);\r\n                }\r\n            });\r\n\r\n            $('body').off('click', 'div.popup-local-diagnostic .recommend-diagnostic .toggle-descr');\r\n            $('body').off('click', 'div.popup-local-diagnostic .recommend-diagnostic .recom-body-outer');\r\n            $('body').on('click', 'div.popup-local-diagnostic .recommend-diagnostic .recom-body-outer', function () {\r\n                $(this).find('.toggle-descr').toggleClass('fa-caret-down');\r\n                $(this).find('.toggle-descr').toggleClass('fa-caret-up');\r\n                let outer = $(this).closest('.recom-body-outer');\r\n                outer.find('.recom-body-descr-inner').toggleClass('hidden');\r\n                outer.toggleClass('opened');\r\n            });\r\n            /* checkbox logic end */\r\n\r\n            // submit recomendations, show description popup\r\n            $('body').off('click', '#local_diagnostic_recommend_modal #submit');\r\n            $('body').on('click', '#local_diagnostic_recommend_modal #submit', async function () {\r\n\r\n                // Calculate zindex.\r\n                var zindex = $(\"#local_diagnostic_recommend_modal\").css(\"z-index\");\r\n                zindex = zindex + 1;\r\n                $(\"#local_diagnostic_description_recom_modal\").css(\"z-index\", zindex);\r\n\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'hidden');\r\n                $('#local_diagnostic_description_recom_modal').modal('show');\r\n            });\r\n\r\n            // submit description\r\n            $('body').off('click', '#local_diagnostic_description_recom_modal #description_submit');\r\n            $('body').on('click', '#local_diagnostic_description_recom_modal #description_submit', function () {\r\n                const checkboxes = $('div.popup-local-diagnostic .recommend-diagnostic input.child[type=\"checkbox\"]');\r\n\r\n                let cmidsRecom = [];\r\n                checkboxes.each(function () {\r\n                    let this_ = $(this);\r\n                    let id = this_.attr('data-id');\r\n                    if (this_.is(':checked')) {\r\n                        cmidsRecom.push(id);\r\n                    }\r\n                });\r\n\r\n                const description = $('#local_diagnostic_description_recom_modal textarea').val();\r\n                const recommend = $('#local_diagnostic_description_recom_modal input.recommend').is(':checked');\r\n\r\n                if (self.currentCluster === 'all') {\r\n                    self.changeDataAll( false, false, cmidsRecom, description, recommend);\r\n                } else {\r\n                    self.changeData(false, false, cmidsRecom, description, recommend);\r\n                }\r\n\r\n                $('#local_diagnostic_description_recom_modal').modal('hide');\r\n                $('#local_diagnostic_recommend_modal').modal('hide');\r\n\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'visible');\r\n            });\r\n\r\n            $('body').off('click', '#local_diagnostic_description_recom_modal .description-close');\r\n            $('body').on('click', '#local_diagnostic_description_recom_modal .description-close', function () {\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'visible');\r\n            });\r\n\r\n            // activities repo click\r\n            const activityRepoModalEl = $(`${p_.htmlRootElement} .svgСharts-tooltip-select div.activity-repo`);\r\n            activityRepoModalEl.off(\"click\");\r\n            activityRepoModalEl.on(\"click\", async function () {\r\n                // set clusterName\r\n                let parentEl = $(this).closest('.svgСharts-tooltip-select')\r\n                self.currentCluster = parentEl.attr('data-claster');\r\n\r\n                let clusterName = '';\r\n                let clusterInfo = '';\r\n                if (self.currentCluster === 'all'){\r\n                    clusterName = self.translateObj['all_clusters'];\r\n                } else {\r\n                    self.shapesItems.forEach(function(objshape) {\r\n                        if (objshape.clusternum === self.currentCluster) {\r\n                            clusterName = objshape['data']['clustername'];\r\n                            clusterInfo = objshape['data']['info'];\r\n                        }\r\n                    });\r\n                }\r\n\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'hidden');\r\n\r\n                let url = `${self.p_.wwwRoot}/local/community/plugins/oer/iframe.php?plugin=activity`;\r\n\r\n                $('#local_diagnostic_repository_modal .activities-diagnostic-title b').html(clusterName);\r\n                $('#local_diagnostic_description_repo_modal div.description-info').html(clusterInfo);\r\n                $('#local_diagnostic_description_repo_modal div.modal-body-description-repo h3 b').html(clusterName);\r\n                $('#local_diagnostic_repository_modal iframe').attr('src', url);\r\n\r\n                var zindex = $(\".popup-local-diagnostic-main-modal\").css(\"z-index\");\r\n                zindex = zindex + 1;\r\n\r\n                $(\"#local_diagnostic_repository_modal\").css(\"z-index\", zindex);\r\n                $('#local_diagnostic_repository_modal').modal('show');\r\n            });\r\n\r\n            // activity-repo hidden action\r\n            $('#local_diagnostic_repository_modal').on('hidden.bs.modal', function () {\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'visible');\r\n            });\r\n\r\n            // activity repo description open\r\n            $('#local_diagnostic_repository_modal #repository_submit').off('click');\r\n            $('#local_diagnostic_repository_modal #repository_submit').on('click', function () {\r\n\r\n                let clusterName = '';\r\n                let clusterInfo = '';\r\n                let clusterDescription = '';\r\n                let recommend = 0;\r\n                self.shapesItems.forEach(function(objshape) {\r\n                    if (objshape.clusternum == self.currentCluster) {\r\n                        clusterName = objshape['data']['clustername'];\r\n                        clusterInfo = objshape['data']['info'];\r\n                        clusterDescription = objshape['data']['description'];\r\n                        recommend = objshape['data']['recommend'];\r\n                    }\r\n                });\r\n\r\n                // clear description\r\n                $('#local_diagnostic_description_repo_modal textarea').val('');\r\n                $('#local_diagnostic_description_modal div.repo-description-info').html(clusterInfo);\r\n                // restore description\r\n                if (clusterDescription){\r\n                    $('#local_diagnostic_description_repo_modal textarea').val(clusterDescription);\r\n                }\r\n\r\n                if (recommend){\r\n                    $('#local_diagnostic_description_repo_modal .modal-body-recommend input[type=\"checkbox\"]').val(recommend);\r\n                }\r\n\r\n                // Calculate zindex.\r\n                var zindex = $(\"#local_diagnostic_repository_modal\").css(\"z-index\");\r\n                zindex = zindex + 1;\r\n                $(\"#local_diagnostic_description_repo_modal\").css(\"z-index\", zindex);\r\n\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'hidden');\r\n                $('#local_diagnostic_description_repo_modal').modal('show');\r\n            });\r\n\r\n            // activity repo description submit\r\n            $('#local_diagnostic_description_repo_modal #description_submit_repo').off('click');\r\n            $('#local_diagnostic_description_repo_modal #description_submit_repo').on('click', function(){\r\n                let iframeEl = $('#local_diagnostic_repository_modal #repository_iframe');\r\n\r\n                let checkedEl = $('#oer_activity_items_selected', iframeEl.contents());\r\n\r\n                let repActivitiesArr = [];\r\n                try {\r\n                    repActivitiesArr = JSON.parse(checkedEl.val());\r\n                } catch (e) {\r\n                }\r\n\r\n                const description = $('#local_diagnostic_description_repo_modal textarea').val();\r\n                const recommend = $('#local_diagnostic_description_repo_modal input.recommend').is(':checked');\r\n\r\n                if (self.currentCluster === 'all'){\r\n                    self.changeDataAll(false, repActivitiesArr, false, description, recommend);\r\n                } else {\r\n                    self.changeData(false, repActivitiesArr, false, description, recommend);\r\n                }\r\n\r\n                $('#local_diagnostic_repository_modal').modal('hide');\r\n                $('#local_diagnostic_description_repo_modal').modal('hide');\r\n                $('div.popup-local-diagnostic-main-modal').css('visibility', 'visible');\r\n            });\r\n\r\n            async function actionActivityCourseAll() {\r\n\r\n                Templates.render('local_diagnostic/activities-body', {\r\n                    title: self.translateObj['share_activities_course_title_all'],\r\n                    data: checkboxesText ? checkboxesText : '',\r\n                    clusterName: self.translateObj['all_clusters'],\r\n                })\r\n                    .done(function (html, js) {\r\n                        Templates.replaceNodeContents('#local_diagnostic_activities_modal .modal-body', html, js);\r\n\r\n                        var zindex = $(\".popup-local-diagnostic-main-modal\").css(\"z-index\");\r\n                        zindex = zindex + 1;\r\n\r\n                        $(\"#local_diagnostic_activities_modal\").css(\"z-index\", zindex);\r\n\r\n                        $('#local_diagnostic_activities_modal').modal('show');\r\n                    })\r\n                    .fail(Notification.exception);\r\n\r\n\r\n                // clear description\r\n                $('#local_diagnostic_description_modal textarea').val('');\r\n\r\n                // checkboxes check\r\n                for (let i = 0; i < self.clustersIds.length - 1; i++) {\r\n                    if (!self.data || !self.data[self.clustersIds[i]] || !self.data[self.clustersIds[i]]['cmidsCourse']) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                // same values for all clusters\r\n                let commonArr = [];\r\n                let description = self.data[self.clustersIds[0]]['description'];\r\n                for (let i = 0; i < self.clustersIds.length - 1; i++) {\r\n                    if (i === 0) {\r\n                        commonArr = self.data[self.clustersIds[i]]['cmidsCourse'];\r\n                    }\r\n                    let arrTwo = self.data[self.clustersIds[i + 1]]['cmidsCourse'];\r\n\r\n                    commonArr = commonArr.filter(x => arrTwo.indexOf(x) !== -1);\r\n\r\n                    let descriptionOne = self.data[self.clustersIds[i]]['description'];\r\n                    let descriptionTwo = self.data[self.clustersIds[i + 1]]['description'];\r\n\r\n                    if (descriptionOne !== descriptionTwo) {\r\n                        description = false;\r\n                    }\r\n                }\r\n\r\n                commonArr.forEach((el) => {\r\n                    $(`div.local-diagnostic-base-block #local_diagnostic_activities_modal ul input[data-id=${el}]`).prop('checked', true);\r\n                });\r\n\r\n                self.checkParrentCheckbox();\r\n\r\n                // restore description\r\n                if (description) {\r\n                    $('#local_diagnostic_description_modal textarea').val(description);\r\n                }\r\n            }\r\n        }\r\n    }\r\n});"],"names":["define","$","Templates","Str","Ajax","Notification","constructor","p_","translateObj","shapesItems","CircleAnimation","courseId","modal","currentCluster","data","clustersIds","init","self","this","i","length","obj","id","push","actions","getData","console","log","isDataEmpty","result","Object","keys","key","checkParrentCheckbox","each","parentUl","closest","allChecked","find","is","prop","cmidsArr","repoArr","recomArr","description","translateCmids","get_string","translateRecom","translateRepo","borderColor","remove","css","html","backBorderColor","activities","activitiesRepo","activitiesRecom","activitiesArr","translateCourse","shapesItem","forEach","objshape","clusternum","circleSelect","changeDataAll","cmidsCourse","cmidsRepo","cmidsRecom","recommend","circleSelectAll","changeData","cmidsReroArr","cmidsCourseArr","cmidsRecomArr","promise","call","methodname","args","courseid","checkboxesText","done","fail","ex","openModalEl","htmlRootElement","off","on","async","parentEl","attr","actionActivityCourseAll","clusterName","clusterInfo","render","title","js","replaceNodeContents","zindex","exception","val","el","checkboxes","this_","openRecomModalTraverse","titletext","parentContainer","toggleClass","outer","activityRepoModalEl","commonArr","arrTwo","filter","x","indexOf","url","wwwRoot","clusterDescription","iframeEl","checkedEl","contents","repActivitiesArr","JSON","parse","e"],"mappings":"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"}