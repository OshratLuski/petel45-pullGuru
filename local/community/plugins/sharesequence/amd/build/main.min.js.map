{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["define([\n    'jquery',\n    'core/yui',\n    'core/str',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/ajax',\n    'core/templates',\n    'core/notification',\n    'core/fragment',\n    'community_sharesequence/select2'\n\n], function ($, Y, Str, ModalFactory, ModalEvents, Ajax, Templates, Notification, Fragment) {\n    `use strict`;\n\n    const flag_background_enable = false;\n\n    function build_select2(modal, sclass){\n        var select2Target =  modal.body.find(sclass);\n        var dropdownParent = select2Target.closest('.select-wrapper');\n        select2Target.select2({\n            dropdownAutoWidth: true,\n            dropdownParent: dropdownParent\n        });\n    }\n\n    function open_upload_to_catalog_page_1(default_data) {\n\n        const getBody = function() {\n\n            // Get the content of the modal.\n            return Fragment.loadFragment('community_sharesequence', 'upload_sequence_catalog_page_1', default_data.coursecontext, default_data);\n        };\n\n        Str.get_strings([\n            {key: 'share_national_shared', component: 'community_sharesequence'},\n        ]).done(function (strings) {\n\n            var modalPromise = ModalFactory.create({\n                type: ModalFactory.types.DEFAULT,\n                title: strings[0],\n                body: getBody()\n            });\n\n            $.when(modalPromise).then(function(fmodal) {\n\n                /* fmodal.setLarge(); */\n\n                var root = fmodal.getRoot();\n                root.find('.modal-dialog').addClass('modal-xlg');\n                root.addClass('sharesequence-modal');\n\n                root.on(ModalEvents.bodyRendered, function () {\n                    root.find('.modal-body').animate({\n                        scrollTop: 0\n                    }, 0);\n\n                    setTimeout(function(){\n                        root.find('input:not([type=hidden])').first().focus();\n                    }, 300);\n                });\n\n                return fmodal;\n            }).done(function(modal) {\n                modal.show();\n            }).fail(Notification.exception);\n        });\n\n    }\n\n    function open_upload_to_catalog_page_2(default_data) {\n\n        const getBody = function() {\n\n            // Get the content of the modal.\n            return Fragment.loadFragment('community_sharesequence', 'upload_sequence_catalog_page_2', default_data.coursecontext, default_data);\n        };\n\n        Str.get_strings([\n            {key: 'share_national_shared', component: 'community_sharesequence'},\n        ]).done(function (strings) {\n            var modalPromise = ModalFactory.create({\n                type: ModalFactory.types.DEFAULT,\n                title: strings[0],\n                body: getBody()\n            });\n\n            $.when(modalPromise).then(function(fmodal) {\n\n                fmodal.setLarge();\n\n                var root = fmodal.getRoot();\n                root.find('.modal-dialog').addClass('modal-xlg');\n                root.addClass('sharesequence-modal');\n                root.on(ModalEvents.bodyRendered, function () {\n                    root.find('.modal-body').animate({\n                        scrollTop: 0\n                    }, 0);\n\n                    setTimeout(function(){\n                        root.find('input:not([type=hidden])').first().focus();\n                    }, 300);\n                });\n\n                return fmodal;\n            }).done(function(modal) {\n                modal.show();\n            }).fail(Notification.exception);\n        });\n\n    }\n\n    return {\n        init: function (default_data) {\n            let self = this;\n\n            // Event on button share.\n            $('.btn-share-sequence').on( \"click\", function(e) {\n                default_data = self.prepare_default_data(default_data);\n                open_upload_to_catalog_page_1(default_data);\n            })\n        },\n\n        init_page_1: function (default_data) {\n            default_data = this.prepare_default_data(default_data);\n            open_upload_to_catalog_page_1(default_data);\n        },\n\n        init_page_2: function (default_data) {\n            default_data = this.prepare_default_data(default_data);\n            open_upload_to_catalog_page_2(default_data);\n        },\n\n        prepare_default_data: function (default_data) {\n\n            let result = {};\n            result.coursecontext = default_data.coursecontext;\n            result.courseid = default_data.courseid;\n            result.default_data = JSON.stringify(default_data);\n\n            return result;\n        },\n    }\n});\n"],"names":["define","$","Y","Str","ModalFactory","ModalEvents","Ajax","Templates","Notification","Fragment","open_upload_to_catalog_page_1","default_data","get_strings","key","component","done","strings","modalPromise","create","type","types","DEFAULT","title","body","loadFragment","coursecontext","when","then","fmodal","root","getRoot","find","addClass","on","bodyRendered","animate","scrollTop","setTimeout","first","focus","modal","show","fail","exception","init","self","this","e","prepare_default_data","init_page_1","init_page_2","setLarge","open_upload_to_catalog_page_2","result","courseid","JSON","stringify"],"mappings":"AAAAA,sCAAO,CACH,SACA,WACA,WACA,qBACA,oBACA,YACA,iBACA,oBACA,gBACA,oCAED,SAAUC,EAAGC,EAAGC,IAAKC,aAAcC,YAAaC,KAAMC,UAAWC,aAAcC,mBAcrEC,8BAA8BC,cAQnCR,IAAIS,YAAY,CACZ,CAACC,IAAK,wBAAyBC,UAAW,6BAC3CC,MAAK,SAAUC,aAEVC,aAAeb,aAAac,OAAO,CACnCC,KAAMf,aAAagB,MAAMC,QACzBC,MAAON,QAAQ,GACfO,KAVGd,SAASe,aAAa,0BAA2B,iCAAkCb,aAAac,cAAed,gBAatHV,EAAEyB,KAAKT,cAAcU,MAAK,SAASC,YAI3BC,KAAOD,OAAOE,iBAClBD,KAAKE,KAAK,iBAAiBC,SAAS,aACpCH,KAAKG,SAAS,uBAEdH,KAAKI,GAAG5B,YAAY6B,cAAc,WAC9BL,KAAKE,KAAK,eAAeI,QAAQ,CAC7BC,UAAW,GACZ,GAEHC,YAAW,WACPR,KAAKE,KAAK,4BAA4BO,QAAQC,UAC/C,QAGAX,UACRb,MAAK,SAASyB,OACbA,MAAMC,UACPC,KAAKlC,aAAamC,oBA+CtB,CACHC,KAAM,SAAUjC,kBACRkC,KAAOC,KAGX7C,EAAE,uBAAuBgC,GAAI,SAAS,SAASc,GAE3CrC,8BADAC,aAAekC,KAAKG,qBAAqBrC,mBAKjDsC,YAAa,SAAUtC,cAEnBD,8BADAC,aAAemC,KAAKE,qBAAqBrC,gBAI7CuC,YAAa,SAAUvC,wBA1DYA,cAQnCR,IAAIS,YAAY,CACZ,CAACC,IAAK,wBAAyBC,UAAW,6BAC3CC,MAAK,SAAUC,aACVC,aAAeb,aAAac,OAAO,CACnCC,KAAMf,aAAagB,MAAMC,QACzBC,MAAON,QAAQ,GACfO,KATGd,SAASe,aAAa,0BAA2B,iCAAkCb,aAAac,cAAed,gBAYtHV,EAAEyB,KAAKT,cAAcU,MAAK,SAASC,QAE/BA,OAAOuB,eAEHtB,KAAOD,OAAOE,iBAClBD,KAAKE,KAAK,iBAAiBC,SAAS,aACpCH,KAAKG,SAAS,uBACdH,KAAKI,GAAG5B,YAAY6B,cAAc,WAC9BL,KAAKE,KAAK,eAAeI,QAAQ,CAC7BC,UAAW,GACZ,GAEHC,YAAW,WACPR,KAAKE,KAAK,4BAA4BO,QAAQC,UAC/C,QAGAX,UACRb,MAAK,SAASyB,OACbA,MAAMC,UACPC,KAAKlC,aAAamC,cAuBrBS,CADAzC,aAAemC,KAAKE,qBAAqBrC,gBAI7CqC,qBAAsB,SAAUrC,kBAExB0C,OAAS,UACbA,OAAO5B,cAAgBd,aAAac,cACpC4B,OAAOC,SAAW3C,aAAa2C,SAC/BD,OAAO1C,aAAe4C,KAAKC,UAAU7C,cAE9B0C,QAGlB"}