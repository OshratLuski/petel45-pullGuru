{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["/* eslint-disable camelcase */\r\n/* eslint-disable no-unused-vars */\r\ndefine([\r\n    'jquery',\r\n    'core/yui',\r\n    'core/str',\r\n    'core/modal_factory',\r\n    'core/modal_events',\r\n    'core/ajax',\r\n    'core/templates',\r\n    'core/notification',\r\n    'core/fragment',\r\n    'community_sharequestion/sendtoteacher',\r\n    'community_sharecourse/select2'\r\n\r\n], function($, Y, Str, ModalFactory, ModalEvents, Ajax, Templates, Notification, Fragment, SendToTeacher) {\r\n\r\n\r\n    const sesskey = M.cfg.sesskey;\r\n    const selected_questions = [];\r\n    const currentcourseid = null;\r\n    const currentcoursecontext = null;\r\n    const flag_background_enable = false;\r\n    const large = false;\r\n    const context_template = {};\r\n\r\n    function build_select2(modal, sclass) {\r\n        var select2Target = modal.body.find(sclass);\r\n        var dropdownParent = select2Target.closest('.select-wrapper');\r\n        select2Target.select2({\r\n            dropdownAutoWidth: true,\r\n            dropdownParent: dropdownParent\r\n        });\r\n    }\r\n\r\n    function open_selector(currentcourseid = null, currentcoursecontext = null, type = null) {\r\n        let self = this;\r\n\r\n        if (currentcourseid != null) {\r\n            this.currentcourseid = currentcourseid;\r\n        }\r\n        if (currentcoursecontext != null) {\r\n            this.currentcoursecontext = currentcoursecontext;\r\n        }\r\n\r\n        if(self.context_template === undefined) {\r\n            switch (type) {\r\n                case 'admin-all':\r\n                    self.large = true;\r\n                    self.context_template = {\r\n                        courseupload: true,\r\n                        copycoursetoteacher: true,\r\n                        sharecoursecommunity: true,\r\n                        copycoursetocategory: true,\r\n                        sharecoursepombim: true,\r\n                    };\r\n                    break;\r\n                case 'admin-all-nooer':\r\n                    self.large = false;\r\n                    self.context_template = {\r\n                        courseupload: false,\r\n                        copycoursetoteacher: true,\r\n                        sharecoursecommunity: true,\r\n                        copycoursetocategory: true,\r\n                        sharecoursepombim: true,\r\n                    };\r\n                    break;\r\n                default:\r\n                    self.large = false;\r\n                    self.context_template = {\r\n                        courseupload: false,\r\n                        copycoursetoteacher: true,\r\n                        sharecoursecommunity: true,\r\n                        copycoursetocategory: true,\r\n                        sharecoursepombim: true,\r\n                    };\r\n            }\r\n        }\r\n\r\n        Str.get_strings([\r\n            {key: 'menupopuptitle', component: 'community_sharecourse'},\r\n            {key: 'cancel', component: 'community_sharecourse'},\r\n        ]).done(function(strings) {\r\n            Templates.render('community_sharecourse/selector', self.context_template)\r\n                .done(function(html) {\r\n                    var modalPromise = ModalFactory.create({\r\n                        type: ModalFactory.types.DEFAULT,\r\n                        large: self.large,\r\n                        title: strings[0],\r\n                        body: html\r\n                    });\r\n\r\n                    $.when(modalPromise).then(function(modal) {\r\n                        modal.setButtonText('cancel', strings[1]);\r\n                        modal.getRoot()[0].classList.add('sharemodal');\r\n                        modal.getRoot()[0].classList.add('sharecoursemodal');\r\n                        // $(modal.getRoot()[0]).find('.modal-header .close').html('<i class=\"fa-light fa-circle-xmark\"></i>');\r\n                        modal.getRoot().find('.modal-dialog').addClass('modal-dialog-centered');\r\n                        modal.show();\r\n\r\n                        modal.body.find('button').on(\"click\", function(e) {\r\n                            e.stopPropagation();\r\n                            switch (e.currentTarget.dataset.handler) {\r\n                                case 'uploadCourseToCatalog':\r\n                                    self.flag_background_enable = true;\r\n                                    modal.destroy();\r\n                                    open_fragment(false);\r\n                                    break;\r\n\r\n                                case 'copyCourseToMyCategory':\r\n                                    self.flag_background_enable = true;\r\n                                    modal.destroy();\r\n\r\n                                    $('.modal-backdrop.in').removeClass('show');\r\n                                    $('.modal-backdrop.in').addClass('hide');\r\n                                    open_course_copy(self.currentcourseid);\r\n                                    break;\r\n\r\n                                case 'copyCourseToTeacher':\r\n                                    self.flag_background_enable = true;\r\n                                    modal.destroy();\r\n\r\n                                    $('.modal-backdrop.in').removeClass('show');\r\n                                    $('.modal-backdrop.in').addClass('hide');\r\n                                    open_copy_to_teacher();\r\n                                    break;\r\n\r\n                                case 'shareCourseCommunity':\r\n                                    self.flag_background_enable = true;\r\n                                    modal.destroy();\r\n\r\n                                    $('.modal-backdrop.in').removeClass('show');\r\n                                    $('.modal-backdrop.in').addClass('hide');\r\n                                    open_share_to_community();\r\n                                    break;\r\n\r\n                                case 'shareCoursePombim':\r\n                                    self.flag_background_enable = true;\r\n                                    modal.destroy();\r\n\r\n                                    $('.modal-backdrop.in').removeClass('show');\r\n                                    $('.modal-backdrop.in').addClass('hide');\r\n                                    open_share_to_social();\r\n                                    break;\r\n                            }\r\n                        });\r\n\r\n                        modal.getRoot().on(ModalEvents.hidden, function(e) {\r\n                            if (self.flag_background_enable == true) {\r\n                                $(\".modal-backdrop\").removeClass('hide');\r\n                                $(\".modal-backdrop\").addClass('show');\r\n                            } else {\r\n                                $(\".modal-backdrop\").removeClass('show');\r\n                                $(\".modal-backdrop\").addClass('hide');\r\n                            }\r\n                        });\r\n\r\n                        modal.getRoot().on(ModalEvents.shown, function(e) {\r\n                            self.flag_background_enable = false;\r\n                        });\r\n\r\n                        return modal;\r\n                    }).fail(Notification.exception);\r\n                })\r\n                .fail(Notification.exception);\r\n        });\r\n\r\n    }\r\n\r\n    function open_fragment(typeshare) {\r\n        let self = this;\r\n\r\n        const getBody = function() {\r\n\r\n            // Get the content of the modal.\r\n            var params = {courseid: self.currentcourseid, typeshare: typeshare};\r\n            return Fragment.loadFragment('community_sharecourse', 'upload_course_to_catalog', self.currentcoursecontext, params);\r\n        };\r\n\r\n        Str.get_strings([\r\n            {key: 'share_course_catalog_title', component: 'community_sharecourse'},\r\n        ]).done(function(strings) {\r\n            var modalPromise = ModalFactory.create({\r\n                type: ModalFactory.types.DEFAULT,\r\n                title: strings[0],\r\n                body: getBody()\r\n            });\r\n\r\n            $.when(modalPromise).then(function(fmodal) {\r\n\r\n                fmodal.setLarge();\r\n\r\n                var root = fmodal.getRoot();\r\n                root.on(ModalEvents.bodyRendered, function() {\r\n                    root.find('.modal-body').animate({\r\n                        scrollTop: 0\r\n                    }, 0);\r\n\r\n                    setTimeout(function() {\r\n                        root.find('input:not([type=hidden])').first().focus();\r\n                    }, 300);\r\n                });\r\n\r\n                return fmodal;\r\n            }).done(function(modal) {\r\n                modal.show();\r\n            }).fail(Notification.exception);\r\n        });\r\n\r\n    }\r\n\r\n    function open_copy_to_teacher() {\r\n        let self = this;\r\n\r\n        if (this.currentcourseid.length !== 0) {\r\n            Str.get_strings([\r\n                {key: 'copycoursetoteacher', component: 'community_sharecourse'},\r\n                {key: 'send', component: 'community_sharecourse'},\r\n                {key: 'back', component: 'community_sharecourse'},\r\n                {key: 'copycoursesuccess', component: 'community_sharecourse'},\r\n            ]).done(function(strings) {\r\n\r\n                // Set html in modal.\r\n                Ajax.call([{\r\n                    methodname: 'community_sharequestion_copy_to_teacher_html',\r\n                    args: {\r\n                        currentcourseid: self.currentcourseid,\r\n                        questionids: JSON.stringify([])\r\n                    },\r\n                    done: function(response) {\r\n\r\n                        ModalFactory.create({\r\n                            type: ModalFactory.types.SAVE_CANCEL,\r\n                            title: strings[0],\r\n                            body: response\r\n                        }).done(function(modal) {\r\n                            modal.setSaveButtonText(strings[1]);\r\n                            modal.setButtonText('cancel', strings[2]);\r\n                            $(modal.body).closest('.modal-content').addClass('share-with-teacher-modal');\r\n\r\n                            // Send to teacher.\r\n                            modal.getRoot().on(ModalEvents.save, function(e) {\r\n                                e.preventDefault();\r\n                                self.flag_background_enable = true;\r\n                                modal.body.find('.error-teachers').hide();\r\n\r\n                                var message = modal.body.find('[data-handler=\"messageForTeacher\"]').val();\r\n\r\n                                var teachersId = [];\r\n                                modal.body.find('.tag-wrapper [data-teacherid]').each(function() {\r\n                                    teachersId.push($(this).attr('data-teacherid'));\r\n                                });\r\n\r\n                                // Validation\r\n                                var errors = [];\r\n                                if (!teachersId.length) {\r\n                                    errors.push('No users');\r\n                                }\r\n\r\n                                if (errors.length === 0) {\r\n                                    Ajax.call([{\r\n                                        methodname: 'community_sharecourse_submit_teachers',\r\n                                        args: {\r\n                                            courseid: self.currentcourseid,\r\n                                            teachersid: JSON.stringify(teachersId),\r\n                                            message: message\r\n                                        },\r\n                                        done: function(response) {\r\n                                            let data = JSON.parse(response);\r\n                                            if (data.result) {\r\n                                                modal.destroy();\r\n                                                open_success_popup(strings[0], strings[3]);\r\n                                            }\r\n                                        },\r\n                                        fail: Notification.exception\r\n                                    }]);\r\n                                } else {\r\n                                    self.flag_background_enable = false;\r\n                                    modal.body.find('.error-teachers').show();\r\n                                }\r\n                            });\r\n\r\n                            // Back button.\r\n                            modal.getRoot().on(ModalEvents.cancel, function(e) {\r\n                                self.flag_background_enable = true;\r\n                                open_selector();\r\n                            });\r\n\r\n                            modal.getRoot().on(ModalEvents.hidden, function(e) {\r\n                                if (self.flag_background_enable === true) {\r\n                                    $(\".modal-backdrop\").removeClass('hide');\r\n                                    $(\".modal-backdrop\").addClass('show');\r\n                                } else {\r\n                                    $(\".modal-backdrop\").removeClass('show');\r\n                                    $(\".modal-backdrop\").addClass('hide');\r\n                                }\r\n                            });\r\n\r\n                            modal.getRoot().on(ModalEvents.shown, function(e) {\r\n                                self.flag_background_enable = false;\r\n                                SendToTeacher.init(modal);\r\n                            });\r\n\r\n                            modal.show();\r\n                        });\r\n\r\n                    },\r\n                    fail: Notification.exception\r\n                }]);\r\n            });\r\n        }\r\n    }\r\n\r\n    function open_share_to_community() {\r\n        let self = this;\r\n\r\n        if (this.currentcourseid.length !== 0) {\r\n            Str.get_strings([\r\n                {key: 'sharecommunityteachers', component: 'community_sharecourse'},\r\n                {key: 'share', component: 'community_sharecourse'},\r\n                {key: 'back', component: 'community_sharecourse'},\r\n                {key: 'copycoursesuccess', component: 'community_sharecourse'},\r\n            ]).done(function(strings) {\r\n\r\n                Ajax.call([{\r\n                    methodname: 'community_sharewith_get_community',\r\n                    args: {\r\n                        activityid: 1,\r\n                        courseid: self.currentcourseid\r\n                    },\r\n                    done: function(response) {\r\n\r\n                        let data = JSON.parse(response);\r\n\r\n                        Templates.render('community_sharecourse/sharecommunity', data)\r\n                            .done(function (html, js) {\r\n                                ModalFactory.create({\r\n                                    type: ModalFactory.types.SAVE_CANCEL,\r\n                                    title: strings[0],\r\n                                    body: html\r\n                                }).done(function(modal) {\r\n                                    modal.setSaveButtonText(strings[1]);\r\n                                    modal.setButtonText('cancel', strings[2]);\r\n                                    $(modal.body).closest('.modal-content').addClass('share-with-teacher-modal');\r\n\r\n                                    if(data.courses_enable === 0) {\r\n                                        $(modal.footer).find('[data-action=\"save\"]').hide()\r\n                                    }\r\n\r\n                                    // Send to community.\r\n                                    modal.getRoot().on(ModalEvents.save, function(e) {\r\n                                        e.preventDefault();\r\n                                        self.flag_background_enable = true;\r\n\r\n                                        modal.body.find('#error_share_to_community').hide();\r\n\r\n                                        var message = modal.body.find('#message_for_teacher').val();\r\n                                        var courseid = modal.body.find('#community_courses').val();\r\n\r\n                                        // Validation.\r\n                                        let errors = [];\r\n                                        if(courseid.length === 0){\r\n                                            errors.push('No course');\r\n                                            modal.body.find('#error_share_to_community').show();\r\n                                        }\r\n\r\n                                        if (errors.length === 0) {\r\n                                            Ajax.call([{\r\n                                                methodname: 'community_sharecourse_submit_teachers',\r\n                                                args: {\r\n                                                    courseid: self.currentcourseid,\r\n                                                    teachersid: JSON.stringify([]),\r\n                                                    message: message\r\n                                                },\r\n                                                done: function(response) {\r\n                                                    let data = JSON.parse(response);\r\n                                                    if (data.result) {\r\n                                                        modal.destroy();\r\n                                                        open_success_popup(strings[0], strings[3]);\r\n                                                    }\r\n                                                },\r\n                                                fail: Notification.exception\r\n                                            }]);\r\n                                        } else {\r\n                                            self.flag_background_enable = false;\r\n                                            modal.body.find('.error-teachers').show();\r\n                                        }\r\n                                    });\r\n\r\n                                    // Back button.\r\n                                    modal.getRoot().on(ModalEvents.cancel, function(e) {\r\n                                        self.flag_background_enable = true;\r\n                                        open_selector();\r\n                                    });\r\n\r\n                                    modal.getRoot().on(ModalEvents.hidden, function(e) {\r\n                                        if (self.flag_background_enable === true) {\r\n                                            $(\".modal-backdrop\").removeClass('hide');\r\n                                            $(\".modal-backdrop\").addClass('show');\r\n                                        } else {\r\n                                            $(\".modal-backdrop\").removeClass('show');\r\n                                            $(\".modal-backdrop\").addClass('hide');\r\n                                        }\r\n                                    });\r\n\r\n                                    modal.getRoot().on(ModalEvents.shown, function(e) {\r\n                                        self.flag_background_enable = false;\r\n\r\n                                        var dropdownParent = modal.body.find(\".smartselect2\").closest('.select-wrapper');\r\n                                        modal.body.find(\".smartselect2\").select2({\r\n                                            dropdownAutoWidth: true,\r\n                                            dropdownParent: dropdownParent\r\n                                        });\r\n                                    });\r\n\r\n                                    modal.show();\r\n                                });\r\n                            })\r\n                    },\r\n                    fail: Notification.exception\r\n                }]);\r\n            });\r\n        }\r\n    }\r\n\r\n    function open_share_to_social() {\r\n        let self = this;\r\n\r\n        if (this.currentcourseid.length !== 0) {\r\n\r\n            Str.get_strings([\r\n                {key: 'titlesharecoursepombim', component: 'community_sharecourse'},\r\n                {key: 'approval', component: 'community_sharecourse'},\r\n            ]).done(function(strings) {\r\n\r\n                let data = {};\r\n                Templates.render('community_sharecourse/sharesocial', data)\r\n                    .done(function (html, js) {\r\n                        ModalFactory.create({\r\n                            type: ModalFactory.types.SAVE_CANCEL,\r\n                            title: strings[0],\r\n                            body: html\r\n                        }).done(function(modal) {\r\n                            modal.setSaveButtonText(strings[1]);\r\n                            //modal.setButtonText('cancel', strings[2]);\r\n                            $(modal.body).closest('.modal-content').addClass('share-with-teacher-modal');\r\n\r\n                            // Send to social.\r\n                            modal.getRoot().on(ModalEvents.save, function(e) {\r\n                                e.preventDefault();\r\n                                self.flag_background_enable = true;\r\n\r\n\r\n                                let ifcopy = false;\r\n\r\n                                let form = modal.getRoot().find('#popup_share_courses_pombim');\r\n                                $(form).find(`input:checked`).each((count, obj) => {\r\n                                    if ($(obj).attr(\"name\") === 'ifcopy') {\r\n                                        ifcopy = true;\r\n                                    }\r\n                                });\r\n\r\n                                Ajax.call([{\r\n                                    methodname: 'community_social_share_corse_pombim',\r\n                                    args: {\r\n                                        courseid: self.currentcourseid,\r\n                                        ifcopy: ifcopy,\r\n                                    },\r\n                                    done: function(response) {\r\n                                        modal.destroy();\r\n                                    },\r\n                                    fail: Notification.exception\r\n                                }]);\r\n\r\n                            });\r\n\r\n                            modal.getRoot().on(ModalEvents.hidden, function(e) {\r\n                                modal.destroy();\r\n                            });\r\n\r\n                            modal.show();\r\n                        });\r\n                    })\r\n            });\r\n        }\r\n    }\r\n\r\n    function open_success_popup(title, html) {\r\n        let self = this;\r\n\r\n        Str.get_strings([\r\n            {key: 'back', component: 'community_sharecourse'},\r\n            {key: 'end', component: 'community_sharecourse'},\r\n        ]).done(function(strings) {\r\n            var modalPromise = ModalFactory.create({\r\n                type: ModalFactory.types.SAVE_CANCEL,\r\n                // Large: true,\r\n                title: title,\r\n                body: html\r\n            });\r\n\r\n            $.when(modalPromise).then(function(modal) {\r\n                modal.setSaveButtonText(strings[0]);\r\n                modal.setButtonText('cancel', strings[1]);\r\n                modal.show();\r\n\r\n                // Back button.\r\n                modal.getRoot().on(ModalEvents.save, function(e) {\r\n                    self.flag_background_enable = true;\r\n                    open_selector();\r\n                });\r\n\r\n                modal.getRoot().on(ModalEvents.hidden, function(e) {\r\n                    if (self.flag_background_enable === true) {\r\n                        $(\".modal-backdrop\").removeClass('hide');\r\n                        $(\".modal-backdrop\").addClass('show');\r\n                    } else {\r\n                        $(\".modal-backdrop\").removeClass('show');\r\n                        $(\".modal-backdrop\").addClass('hide');\r\n                    }\r\n                });\r\n\r\n                modal.getRoot().on(ModalEvents.shown, function(e) {\r\n                    self.flag_background_enable = false;\r\n                });\r\n\r\n                return modal;\r\n            }).fail(Notification.exception);\r\n        });\r\n    }\r\n\r\n    function open_course_copy(currentcourseid) {\r\n\r\n        var renderPopupCopyCourse = function(response, typeshare) {\r\n            var context = {\r\n                showAllCategories: response.isadmin,\r\n                categories: JSON.parse(response.categories),\r\n                teachercatid: JSON.parse(response.teachercatid)\r\n            };\r\n\r\n            Templates.render('community_sharecourse/copy_to_category', context)\r\n                .done(function(html, js) {\r\n\r\n                    Str.get_strings([\r\n                        {key: 'selectioncategories', component: 'community_sharecourse'},\r\n                    ]).done(function(strings) {\r\n\r\n                        ModalFactory.create({\r\n                            type: ModalFactory.types.DEFAULT,\r\n                            title: strings[0],\r\n                            body: html\r\n                        }).done(function(modal) {\r\n                            modal.getRoot().find('.modal-dialog').addClass('copy-course-to-my-category-modal');\r\n                            modal.setLarge();\r\n\r\n                            modal.getRoot().on(ModalEvents.shown, function(e) {\r\n                                var dropdownParent = modal.body.find(\".smartselect2\").closest('.select-wrapper');\r\n                                modal.body.find(\".smartselect2\").select2({\r\n                                    dropdownAutoWidth: true,\r\n                                    dropdownParent: dropdownParent\r\n                                });\r\n                            });\r\n\r\n                            // Close button.\r\n                            modal.getRoot().find('button.close-button').on('click', function(e) {\r\n                                modal.destroy();\r\n                            });\r\n\r\n                            // Success button.\r\n                            modal.getRoot().find('button.success-button').on('click', function(e) {\r\n\r\n                                let categoryid = modal.getRoot().find(':selected').attr('data-categoryid');\r\n\r\n                                let type = '';\r\n                                if(typeshare){\r\n                                    type = 'coursecopy_share';\r\n                                }else{\r\n                                    type = 'coursecopy';\r\n                                }\r\n\r\n                                Ajax.call([{\r\n                                    methodname: 'community_sharecourse_add_sharecourse_task',\r\n                                    args: {\r\n                                        sourcecourseid: Number(currentcourseid),\r\n                                        categoryid: Number(categoryid),\r\n                                        type: type\r\n                                    },\r\n                                    done: function(response) {\r\n                                        modal.destroy();\r\n\r\n                                        Str.get_strings([\r\n                                            {key: 'eventcoursecopy', component: 'community_sharecourse'},\r\n                                            {key: 'course_copied_to_category', component: 'community_sharecourse'},\r\n                                            {key: 'finish', component: 'community_sharecourse'},\r\n                                        ]).done(function(strings) {\r\n                                            ModalFactory.create({\r\n                                                type: ModalFactory.types.ALERT,\r\n                                                title: strings[0],\r\n                                                body: strings[1]\r\n                                            }).done(function(modal) {\r\n                                                modal.setButtonText('cancel', strings[2]);\r\n                                                modal.show();\r\n                                            });\r\n                                        });\r\n                                    },\r\n                                    fail: Notification.exception\r\n                                }]);\r\n                            });\r\n\r\n                            modal.show();\r\n                        });\r\n                    });\r\n                })\r\n                .fail(Notification.exception);\r\n        }\r\n\r\n        var parseResponse = function(response) {\r\n\r\n            if (response.typeshare === true) {\r\n                Str.get_strings([\r\n                    {key: 'coursereuploadtocatalog', component: 'community_sharecourse'},\r\n                    {key: 'couse_copied_from_catalog', component: 'community_sharecourse'},\r\n                    {key: 'disablepopupsubmit', component: 'community_sharecourse'},\r\n                ]).done(function(strings) {\r\n                    var modalPromise = ModalFactory.create({\r\n                        type: ModalFactory.types.SAVE_CANCEL,\r\n                        title: strings[0],\r\n                        body: strings[1]\r\n                    });\r\n\r\n                    $.when(modalPromise).then(function(fmodal) {\r\n\r\n                        fmodal.setSaveButtonText(strings[2]);\r\n\r\n                        // Handle save event.\r\n                        fmodal.getRoot().on(ModalEvents.save, function(e) {\r\n                            open_fragment(true);\r\n                            //renderPopupCopyCourse(response, true);\r\n                        });\r\n\r\n                        // Handle cancel event.\r\n                        fmodal.getRoot().on(ModalEvents.cancel, function(e) {\r\n                            renderPopupCopyCourse(response, false);\r\n                        });\r\n\r\n                        return fmodal;\r\n                    }).done(function(modal) {\r\n                        modal.show();\r\n                    }).fail(Notification.exception);\r\n                });\r\n            } else {\r\n                renderPopupCopyCourse(response, false);\r\n            }\r\n\r\n            return true;\r\n        };\r\n\r\n        Ajax.call([{\r\n            methodname: 'community_sharecourse_popup_copy_course',\r\n            args: {\r\n                courseid: Number(currentcourseid)\r\n            },\r\n            done: parseResponse,\r\n            fail: Notification.exception\r\n        }]);\r\n    }\r\n\r\n    return {\r\n        init: function(currentcourseid, currentcoursecontext, visiblebuttons) {\r\n            let self = this;\r\n\r\n            // Event on button share.\r\n            $('.btn-share-course').on(\"click\", function(e) {\r\n                open_selector(currentcourseid, currentcoursecontext, visiblebuttons);\r\n            });\r\n\r\n            // Event on button disable share.\r\n            $('.btn-disable-share-course').on(\"click\", function(e) {\r\n\r\n                Str.get_strings([\r\n                    {key: 'disablepopuptitle', component: 'community_sharecourse'},\r\n                    {key: 'disablepopupbody', component: 'community_sharecourse'},\r\n                    {key: 'disablepopupsubmit', component: 'community_sharecourse'},\r\n                ]).done(function(strings) {\r\n                    var modalPromise = ModalFactory.create({\r\n                        type: ModalFactory.types.SAVE_CANCEL,\r\n                        title: strings[0],\r\n                        body: strings[1]\r\n                    });\r\n\r\n                    $.when(modalPromise).then(function(modal) {\r\n                        modal.setSaveButtonText(strings[2]);\r\n                        modal.show();\r\n\r\n                        // Submit button.\r\n                        modal.getRoot().on(ModalEvents.save, function(e) {\r\n\r\n                            Ajax.call([{\r\n                                methodname: 'community_sharecourse_unshare_course',\r\n                                args: {\r\n                                    courseid: currentcourseid,\r\n                                },\r\n                                done: function(response) {\r\n                                    // Modal.destroy();\r\n\r\n                                    // Redirect.\r\n                                    window.location.replace(M.cfg.wwwroot + '/course/view.php?id=' + currentcourseid);\r\n                                },\r\n                                fail: Notification.exception\r\n                            }]);\r\n                        });\r\n\r\n                        return modal;\r\n                    }).fail(Notification.exception);\r\n                });\r\n            });\r\n        },\r\n\r\n        message_edit_init: function(currentcourseid, currentcoursecontext) {\r\n\r\n            // Event on button.\r\n            $('body').on(\"click\", function(e) {\r\n                if ($(e.target).data('handler') === 'copyCourseFromMessage') {\r\n                    let courseid = $(e.target).data('courseid');\r\n                    open_course_copy(courseid);\r\n                }\r\n            });\r\n        },\r\n\r\n        download_from_catalog: function(courseid) {\r\n            open_course_copy(courseid);\r\n        },\r\n    };\r\n});\r\n"],"names":["define","$","Y","Str","ModalFactory","ModalEvents","Ajax","Templates","Notification","Fragment","SendToTeacher","M","cfg","sesskey","open_selector","currentcourseid","arguments","length","undefined","currentcoursecontext","type","self","this","context_template","large","courseupload","copycoursetoteacher","sharecoursecommunity","copycoursetocategory","sharecoursepombim","get_strings","key","component","done","strings","render","html","modalPromise","create","types","DEFAULT","title","body","when","then","modal","setButtonText","getRoot","classList","add","find","addClass","show","on","e","stopPropagation","currentTarget","dataset","handler","flag_background_enable","destroy","open_fragment","removeClass","open_course_copy","call","methodname","args","questionids","JSON","stringify","response","SAVE_CANCEL","setSaveButtonText","closest","save","preventDefault","hide","message","val","teachersId","each","push","attr","errors","courseid","teachersid","parse","result","open_success_popup","fail","exception","cancel","hidden","shown","init","open_copy_to_teacher","activityid","data","js","courses_enable","footer","dropdownParent","select2","dropdownAutoWidth","open_share_to_community","ifcopy","form","count","obj","open_share_to_social","typeshare","params","loadFragment","fmodal","setLarge","root","bodyRendered","animate","scrollTop","setTimeout","first","focus","renderPopupCopyCourse","context","showAllCategories","isadmin","categories","teachercatid","categoryid","sourcecourseid","Number","ALERT","visiblebuttons","window","location","replace","wwwroot","message_edit_init","target","download_from_catalog"],"mappings":"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"}