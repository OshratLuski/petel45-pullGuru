{"version":3,"file":"review-modal.min.js","sources":["../src/review-modal.js"],"sourcesContent":["define([\n  'jquery',\n  'core/templates',\n  'core/notification',\n], function($, Templates, Notification) {\n\n  var SELECTORS = {\n        modalWrapper: '#modalReview',\n        modalContent: '#modalContentReview',\n        triggerBtn: '#triggerModalReview'\n      };\n\n  return {\n\n    TEMPLATE: {\n      main: {\n        src: 'community_oer/review/review_modal',\n        id: 'askToReview'\n      },\n      main_v2: {\n        src: 'community_oer/review/review_modal_v2',\n        id: 'askToReview'\n      },\n      form: {\n        src: 'community_oer/review/review_modal_form',\n        id: 'reviewForm'\n      },\n      approve: {\n        src: 'community_oer/review/review_modal_approve',\n        id: 'reviewApprove'\n      },\n      approve2: {\n        src: 'community_oer/review/review_modal_approve2',\n        id: 'reviewApprove2'\n      },\n      approve3: {\n        src: 'community_oer/review/review_modal_approve3',\n        id: 'reviewApprove3'\n      },\n      response: {\n        src: 'community_oer/review/review_modal_response',\n        id: 'review_response'\n      },\n      confirmReject: {\n        src: 'community_oer/review/review_modal_confirm',\n        id: 'confirmReject'\n      },\n      activity_remind: {\n        src: 'community_oer/review/review_activity_remind',\n        id: 'activityEdit'\n      }\n    },\n\n    modalInit: false,\n    triggerBtn: '',\n    modalContent: '',\n    modalWrapper: '',\n\n    /**\n     * Insert modal markup on the page.\n     *\n     * @method render\n     * @param {string} template The template name.\n     * @param {object} context The context for template.\n     * @return {Promise}\n     */\n    render: function (template, context) {\n      var self = this;\n      context.wwwroot = M.cfg.wwwroot;\n      self.modalContent.innerHTML = '';\n      return Templates.render(template, context)\n          .done(function (html, js) {\n            $('#modalReview').modal('show');\n            Templates.replaceNodeContents(self.modalContent, html, js);\n          })\n          .fail(Notification.exception);\n    },\n\n    /**\n     * Insert modal markup on the page.\n     *\n     * @method insertTemplates\n     * @return {Promise|boolean}\n     */\n    insertWrapper: function () {\n      var context = {},\n          self = this;\n\n      return Templates.render('community_oer/review/review_wrapper', context)\n          .done(function (html, js) {\n            if (!self.modalInit) {\n              Templates.appendNodeContents('body', html, js);\n              self.modalInit = true;\n              self.modalWrapper = document.querySelector(SELECTORS.modalWrapper);\n              self.modalContent = document.querySelector(SELECTORS.modalContent);\n              self.triggerBtn = document.querySelector(SELECTORS.triggerBtn);\n            }\n          })\n          .fail(Notification.exception);\n    },\n\n  };\n});\n"],"names":["define","$","Templates","Notification","SELECTORS","TEMPLATE","main","src","id","main_v2","form","approve","approve2","approve3","response","confirmReject","activity_remind","modalInit","triggerBtn","modalContent","modalWrapper","render","template","context","self","this","wwwroot","M","cfg","innerHTML","done","html","js","modal","replaceNodeContents","fail","exception","insertWrapper","appendNodeContents","document","querySelector"],"mappings":"AAAAA,oCAAO,CACL,SACA,iBACA,sBACC,SAASC,EAAGC,UAAWC,kBAEpBC,uBACgB,eADhBA,uBAEgB,sBAFhBA,qBAGc,4BAGX,CAELC,SAAU,CACRC,KAAM,CACJC,IAAK,oCACLC,GAAI,eAENC,QAAS,CACPF,IAAK,uCACLC,GAAI,eAENE,KAAM,CACJH,IAAK,yCACLC,GAAI,cAENG,QAAS,CACPJ,IAAK,4CACLC,GAAI,iBAENI,SAAU,CACRL,IAAK,6CACLC,GAAI,kBAENK,SAAU,CACRN,IAAK,6CACLC,GAAI,kBAENM,SAAU,CACRP,IAAK,6CACLC,GAAI,mBAENO,cAAe,CACbR,IAAK,4CACLC,GAAI,iBAENQ,gBAAiB,CACfT,IAAK,8CACLC,GAAI,iBAIRS,WAAW,EACXC,WAAY,GACZC,aAAc,GACdC,aAAc,GAUdC,OAAQ,SAAUC,SAAUC,aACtBC,KAAOC,YACXF,QAAQG,QAAUC,EAAEC,IAAIF,QACxBF,KAAKL,aAAaU,UAAY,GACvB3B,UAAUmB,OAAOC,SAAUC,SAC7BO,MAAK,SAAUC,KAAMC,IACpB/B,EAAE,gBAAgBgC,MAAM,QACxB/B,UAAUgC,oBAAoBV,KAAKL,aAAcY,KAAMC,OAExDG,KAAKhC,aAAaiC,YASzBC,cAAe,eAETb,KAAOC,YAEJvB,UAAUmB,OAAO,sCAHV,IAITS,MAAK,SAAUC,KAAMC,IACfR,KAAKP,YACRf,UAAUoC,mBAAmB,OAAQP,KAAMC,IAC3CR,KAAKP,WAAY,EACjBO,KAAKJ,aAAemB,SAASC,cAAcpC,wBAC3CoB,KAAKL,aAAeoB,SAASC,cAAcpC,wBAC3CoB,KAAKN,WAAaqB,SAASC,cAAcpC,0BAG5C+B,KAAKhC,aAAaiC,YAI5B"}