{"version":3,"file":"course.min.js","sources":["../src/course.js"],"sourcesContent":["define([\r\n    'jquery',\r\n    'core/yui',\r\n    'core/str',\r\n    'core/modal_factory',\r\n    'core/modal_events',\r\n    'core/ajax',\r\n    'core/templates',\r\n    'core/notification',\r\n    'community_sharecourse/main',\r\n\r\n], function ($, Y, Str, ModalFactory, ModalEvents, Ajax, Templates, Notification, Sharecourse) {\r\n    `use strict`;\r\n\r\n    let SELECTORS = {\r\n        mainAside: '.main-aside',\r\n        mainDashboard: '.main-dashboard',\r\n        mainTitle: '.main-title',\r\n        filterPills: '.checked-option-pills',\r\n        filterButtonArea: '.activity-filters',\r\n        totalItems: '.total-activities-block',\r\n        blockContent: '.activity-blocks-content',\r\n        mainTotalElementsActivity: '.main-total-elements-activity',\r\n        mainTotalElementsQuestion: '.main-total-elements-question',\r\n        mainTotalElementsSequence: '.main-total-elements-sequence',\r\n        mainTotalElementsCourse: '.main-total-elements-course',\r\n    };\r\n\r\n    let current_aside_course = {};\r\n    let prev_search_course = {};\r\n    let default_filters_course = {};\r\n    let if_iframe = false;\r\n    let if_scroll_up = false;\r\n\r\n    return {\r\n        init: function (callback) {\r\n\r\n            // Get status of iframe.\r\n            if_iframe = $('#main-page-iframe').val();\r\n\r\n            // Get instance course.\r\n            Ajax.call([{\r\n                methodname: 'community_oer_get_course_instance',\r\n                args: {},\r\n                done: function (response) {\r\n                    callback(response);\r\n                },\r\n                fail: Notification.exception\r\n            }]);\r\n        },\r\n\r\n        mergeInstanceWithPreset: function (instance_data, preset_data, callback) {\r\n            callback(instance_data);\r\n        },\r\n\r\n        renderInstance: function (instance_data, current_aside, prev_search, preset_data, callback) {\r\n            let self = this;\r\n\r\n            default_filters_course = instance_data.default_filters;\r\n            current_aside_course = current_aside;\r\n            prev_search_course = prev_search;\r\n\r\n            this.mergeInstanceWithPreset(instance_data, preset_data, function (data) {\r\n\r\n                // Render aside.\r\n                Templates.render('community_oer/course/aside', data)\r\n                    .done(function (html, js) {\r\n\r\n                        if (current_aside_course.render_aside) {\r\n                            Templates.replaceNodeContents(SELECTORS.mainAside, html, js);\r\n                        }\r\n\r\n                        // Render dashboard.\r\n                        Templates.render('community_oer/course/dashboard', data)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents(SELECTORS.mainDashboard, html, js);\r\n\r\n                                if (prev_search_course.length > 0) {\r\n                                    $.each(prev_search_course, function (index, value) {\r\n\r\n                                        // Set without split.\r\n                                        value = '\"' + value + '\"';\r\n\r\n                                        let param = value;\r\n                                        self.createPillSearch(param, value, function () {\r\n                                            self.defaultRenderBlocks();\r\n                                            callback();\r\n                                        });\r\n                                    });\r\n                                } else {\r\n                                    self.defaultRenderBlocks();\r\n                                    callback();\r\n                                }\r\n                            })\r\n                            .fail(Notification.exception);\r\n                    })\r\n                    .fail(Notification.exception);\r\n            });\r\n        },\r\n\r\n        defaultRenderBlocks: function () {\r\n            let self = this;\r\n\r\n            // Default filters\r\n            let filters = $(\"*\").filter(function () {\r\n                return ($(this).data(\"plugin\") === 'course' && $(this).data(\"area\") === 'filters');\r\n            });\r\n\r\n            $.each(default_filters_course , function(key, value) {\r\n                $(filters).each(function () {\r\n                    if($(this).data(\"action\") === value.filter && $(this).data(\"value\") === value.value){\r\n                        $(this).data(\"selected\", \"1\");\r\n                        $(this).prop('checked', true);\r\n                        let text = $(this).parent().find('label').html().trim();\r\n                        self.createPill($(this).attr(\"id\"), text);\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Default render blocks.\r\n            let elements = $(\"*\").filter(function () {\r\n                return ($(this).data(\"plugin\") === 'course' && $(this).data(\"area\") === 'sidemenu');\r\n            });\r\n\r\n            // Sectionid to courseid for course tab.\r\n            if(current_aside_course.type === 'section' ){\r\n                current_aside_course.type = 'course';\r\n                current_aside_course.value = current_aside_course.parentcourse;\r\n            }\r\n\r\n            $(elements).each(function () {\r\n                if ($(this).data(\"action\") === current_aside_course.type && $(this).data(\"value\") === current_aside_course.value) {\r\n                    $(this).click();\r\n                }\r\n            });\r\n        },\r\n\r\n        actionOnClick: function (object) {\r\n            let data = $(object).data();\r\n            let self = this;\r\n\r\n            if (data.area === 'sidemenu') {\r\n                let elements = $(\"*\").filter(function () {\r\n                    return ($(this).data(\"plugin\") === 'course' && $(this).data(\"area\") === 'sidemenu');\r\n                });\r\n\r\n                $(elements).each(function () {\r\n                    $(this).removeData(\"selected\");\r\n                });\r\n\r\n                $(object).data(\"selected\", \"1\");\r\n            }\r\n\r\n            if (data.area === 'filters') {\r\n                if ($(object).data(\"selected\") !== undefined) {\r\n                    $(object).removeData(\"selected\");\r\n                    this.removePill($(object).attr(\"id\"));\r\n                } else {\r\n                    $(object).data(\"selected\", \"1\");\r\n                    let text = $(object).parent().find('label').html().trim();\r\n                    this.createPill($(object).attr(\"id\"), text);\r\n                }\r\n            }\r\n\r\n            // Paging.\r\n            if (data.area === 'paging') {\r\n                let elements = $(\"*\").filter(function () {\r\n                    return ($(this).data(\"plugin\") === 'course' && $(this).data(\"area\") === 'paging');\r\n                });\r\n\r\n                $(elements).each(function () {\r\n                    $(this).data(\"selected\", 0);\r\n                });\r\n\r\n                $(object).data(\"selected\", \"1\");\r\n\r\n                if_scroll_up = true;\r\n            }\r\n\r\n            if (data.area !== 'paging') {\r\n                let elements = $(\"*\").filter(function () {\r\n                    return ($(this).data(\"plugin\") === 'course' && $(this).data(\"area\") === 'paging');\r\n                });\r\n\r\n                $(elements).each(function () {\r\n                    $(this).data(\"selected\", 0);\r\n                });\r\n            }\r\n\r\n            // Remove pill.\r\n            if (data.area === 'pill') {\r\n                let id = data.value;\r\n                $(SELECTORS.filterButtonArea).find(\"#\" + id).trigger('click');\r\n\r\n                // Remove button remove all pills.\r\n                let buttons = $(SELECTORS.filterPills).find('button');\r\n                if (buttons.length === 1) {\r\n                    buttons.remove();\r\n                }\r\n            }\r\n\r\n            // Remove pill search.\r\n            if (data.area === 'pillsearch') {\r\n                self.removePillSearch(object);\r\n            }\r\n\r\n            // Remove all pills.\r\n            if (data.area === 'removeallpills') {\r\n                let elements = $(\"*\").filter(function () {\r\n                    return ($(this).data(\"area\") === 'filters');\r\n                });\r\n\r\n                $(elements).each(function () {\r\n                    $(this).removeData(\"selected\");\r\n                    $(this).prop('checked', false);\r\n                    self.removePill($(this).attr(\"id\"));\r\n                });\r\n\r\n                let elementssearch = $(\"*\").filter(function () {\r\n                    return ($(this).data(\"area\") === 'pillsearch');\r\n                });\r\n\r\n                $(elementssearch).each(function () {\r\n                    self.removePillSearch(this);\r\n                });\r\n\r\n            }\r\n\r\n            if (data.area === 'sorting') {\r\n\r\n                let flag = true;\r\n                if (parseInt($(object).data(\"selected\")) === 1) {\r\n                    flag = false;\r\n                }\r\n\r\n                let elements = $(\"*\").filter(function () {\r\n                    return ($(this).data(\"plugin\") === 'course' && $(this).data(\"area\") === 'sorting');\r\n                });\r\n\r\n                $(elements).each(function () {\r\n                    $(this).data(\"selected\", '0');\r\n                });\r\n\r\n                if (flag) {\r\n                    $(object).data(\"selected\", '1');\r\n                }\r\n            }\r\n\r\n            if (data.area === 'mainsearch') {\r\n                let param = data.value;\r\n                this.createPillSearch(param, data.value, function () {\r\n                    self.renderBlocks();\r\n                });\r\n            } else {\r\n                this.renderBlocks();\r\n            }\r\n\r\n            // Change title breadcrumbs.\r\n            this.changeTitleBreadcrumbs(object);\r\n        },\r\n\r\n        returnPreset: function () {\r\n\r\n            // Get selected.\r\n            let selected = $(\"*\").filter(function () {\r\n                return ($(this).data(\"plugin\") === 'course' && ($(this).data(\"selected\") === '1' || $(this).data(\"selected\") === 1));\r\n            });\r\n\r\n            let dataselected = {};\r\n            $(selected).each(function (index) {\r\n                dataselected[index] = $(this).data();\r\n            });\r\n\r\n            return dataselected;\r\n        },\r\n\r\n        renderBlocks: function () {\r\n\r\n            let returnpreset = this.returnPreset();\r\n\r\n            // Remove block items.\r\n            $(SELECTORS.blockContent).find('.activity-item').remove();\r\n            $(SELECTORS.blockContent).find('.pagination').remove();\r\n\r\n            // Render loading icon.\r\n            Templates.render('community_oer/loading', {})\r\n                .done(function (html, js) {\r\n                    Templates.replaceNodeContents(SELECTORS.blockContent, html, js);\r\n                })\r\n                .fail(Notification.exception);\r\n\r\n            Ajax.call([{\r\n                methodname: 'community_oer_get_course_blocks',\r\n                args: {\r\n                    presets: JSON.stringify(returnpreset)\r\n                },\r\n                done: function (response) {\r\n                    let result = JSON.parse(response);\r\n\r\n                    // Check if run in iframe.\r\n                    result.iframe = (parseInt(if_iframe) === 1);\r\n\r\n                    Str.get_strings([\r\n                        { key: 'resultsearch', component: 'community_oer' },\r\n                        { key: 'items', component: 'community_oer' },\r\n                    ]).done(function (strings) {\r\n\r\n                        // Update total activities.\r\n                        let str = strings[0] + ': ' + result.total_blocks + ' ' + strings[1];\r\n                        $(SELECTORS.totalItems).html(str);\r\n\r\n                        // Update total menu block.\r\n                        $(SELECTORS.mainTotalElementsActivity).html('(' + result.activity_total_all_blocks + ')');\r\n                        $(SELECTORS.mainTotalElementsQuestion).html('(' + result.question_total_all_blocks + ')');\r\n                        $(SELECTORS.mainTotalElementsSequence).html('(' + result.sequence_total_all_blocks + ')');\r\n                        $(SELECTORS.mainTotalElementsCourse).html('(' + result.course_total_all_blocks + ')');\r\n\r\n                        // Render blocks.\r\n                        Templates.render('community_oer/course/block', result)\r\n                            .done(function (html, js) {\r\n                                Templates.replaceNodeContents(SELECTORS.blockContent, html, js);\r\n\r\n                                if (if_scroll_up) {\r\n                                    const element = document.querySelector('.activity-block-header');\r\n                                    element.scrollIntoView({behavior: \"smooth\", block: \"end\", inline: \"nearest\"});\r\n                                    if_scroll_up = false;\r\n                                }\r\n\r\n                                callback();\r\n                            })\r\n                            .fail(Notification.exception);\r\n                    });\r\n                },\r\n                fail: Notification.exception\r\n            }]);\r\n        },\r\n\r\n        changeTitleBreadcrumbs: function (object) {\r\n            let title = $(object).data('breadcrumbs');\r\n            $(SELECTORS.mainTitle).html(title);\r\n        },\r\n\r\n        createPill: function (id, text) {\r\n\r\n            Str.get_strings([\r\n                { key: 'removeallpills', component: 'community_oer' },\r\n            ]).done(function (strings) {\r\n\r\n                let pillTarget = $(SELECTORS.filterPills);\r\n\r\n                // Add remove all.\r\n                if (!pillTarget.find('button').length) {\r\n                    let pillremoveall = $(`\r\n                    <button type=\"button\" data-plugin=\"course\" data-area=\"removeallpills\" class=\"removeallpills btn btn-secondary mr-3 py-1 px-3 mb-2\">\r\n                        ${strings[0]}                       \r\n                    </button>`);\r\n\r\n                    pillTarget.append(pillremoveall);\r\n                }\r\n\r\n                let pill = $(`\r\n                <div class=\"checked-option-pill rounded-pill bg-light text-primary border border-primary mr-3 py-1 px-3 mb-2\" data-id=\"${id}\">\r\n                    <span class=\"checked-option-pill-name\">${text}</span>\r\n                    <button type=\"button\" class=\"close ml-3\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\" data-plugin=\"course\" data-area=\"pill\" data-value=\"${id}\">&times;</span>\r\n                    </button>\r\n                </div>`);\r\n\r\n                pillTarget.append(pill);\r\n            });\r\n        },\r\n\r\n        removePill: function (id) {\r\n            $(SELECTORS.filterPills).find(`[data-id=\"${id}\"]`).remove();\r\n\r\n            // Remove button remove all pills.\r\n            let buttons = $(SELECTORS.filterPills).find('button');\r\n            if (buttons.length === 1) {\r\n                buttons.remove();\r\n            }\r\n        },\r\n\r\n        createPillSearch: function (query, text, callback) {\r\n\r\n            Str.get_strings([\r\n                { key: 'removeallpills', component: 'community_oer' },\r\n            ]).done(function (strings) {\r\n\r\n                let pillTarget = $(SELECTORS.filterPills);\r\n\r\n                // Add remove all.\r\n                if (!pillTarget.find('button').length) {\r\n                    let pillremoveall = $(`\r\n                    <button type=\"button\" data-plugin=\"course\" data-area=\"removeallpills\" class=\"removeallpills btn btn-secondary mr-3 py-1 px-3 mb-2\">\r\n                        ${strings[0]}                       \r\n                    </button>`);\r\n\r\n                    pillTarget.append(pillremoveall);\r\n                }\r\n\r\n                let simpleword = false;\r\n                if (query.length > 0 && query[0] === '\"' && query[query.length - 1] === '\"') {\r\n                    simpleword = true;\r\n                    query = query.substring(1, query.length - 1);\r\n                }\r\n\r\n                if (simpleword) {\r\n                    let pill = $(`\r\n                        <div class=\"checked-option-pill search-pill rounded-pill bg-light text-primary border border-primary mr-3 py-1 px-3 mb-2\" data-id=\"${query}\">\r\n                            <span class=\"checked-option-pill-name\">${query}</span>\r\n                            <button type=\"button\" class=\"close ml-3\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\" data-plugin=\"course\" data-area=\"pillsearch\" data-value=\"${query}\" data-selected=\"1\">&times;</span>\r\n                            </button>\r\n                        </div>`);\r\n\r\n                    pillTarget.append(pill);\r\n                } else {\r\n                    query.split(' ').forEach(function(value) {\r\n                        if (value.length > 0) {\r\n                            let pill = $(`\r\n                                <div class=\"checked-option-pill search-pill rounded-pill bg-light text-primary border border-primary mr-3 py-1 px-3 mb-2\" data-id=\"${value}\">\r\n                                    <span class=\"checked-option-pill-name\">${value}</span>\r\n                                    <button type=\"button\" class=\"close ml-3\" aria-label=\"Close\">\r\n                                        <span aria-hidden=\"true\" data-plugin=\"course\" data-area=\"pillsearch\" data-value=\"${value}\" data-selected=\"1\">&times;</span>\r\n                                    </button>\r\n                                </div>`);\r\n\r\n                            pillTarget.append(pill);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                callback();\r\n            });\r\n        },\r\n\r\n        removePillSearch: function (object) {\r\n            $(object).parent().parent().remove();\r\n\r\n            // Remove button remove all pills.\r\n            let buttons = $(SELECTORS.filterPills).find('button');\r\n            if (buttons.length === 1) {\r\n                buttons.remove();\r\n            }\r\n        },\r\n\r\n        // Custom functions.\r\n        downloadCourse: function () {\r\n            $('.copy-course-btn').on('click', function () {\r\n                let self = this;\r\n\r\n                let cid = $(this).data('cid');\r\n                let error_category = $(this).data('error-category');\r\n\r\n                if(error_category === 1){\r\n                    Str.get_strings([\r\n                        { key: 'error' },\r\n                        { key: 'error_category', component: 'community_oer' },\r\n                    ]).done(function (strings) {\r\n                        var modalPromise = ModalFactory.create({\r\n                            type: ModalFactory.types.ALERT,\r\n                            title: strings[0],\r\n                            body: strings[1]\r\n                        });\r\n\r\n                        $.when(modalPromise).then(function(fmodal) {\r\n                            fmodal.show();\r\n                            return fmodal;\r\n                        }).fail(Notification.exception);\r\n                    })\r\n                }else{\r\n                    Sharecourse.download_from_catalog(cid);\r\n                }\r\n            })\r\n        },\r\n\r\n        downloadCoursePombim: function() {\r\n            $('.copy-course-pombim-btn').on('click', function() {\r\n                let cid = $(this).data('cid');\r\n                let errorcategory = $(this).data('error-category');\r\n\r\n                if (errorcategory === 1) {\r\n                    Str.get_strings([\r\n                        {key: 'error'},\r\n                        {key: 'error_category', component: 'community_oer'},\r\n                    ]).done(function(strings) {\r\n                        var modalPromise = ModalFactory.create({\r\n                            type: ModalFactory.types.ALERT,\r\n                            title: strings[0],\r\n                            body: strings[1]\r\n                        });\r\n\r\n                        $.when(modalPromise).then(function(fmodal) {\r\n                            fmodal.show();\r\n                            return fmodal;\r\n                        }).fail(Notification.exception);\r\n                    });\r\n                } else {\r\n                    Sharecourse.download_from_catalog(cid);\r\n                }\r\n            });\r\n        },\r\n    };\r\n});\r\n"],"names":["define","$","Y","Str","ModalFactory","ModalEvents","Ajax","Templates","Notification","Sharecourse","SELECTORS","current_aside_course","prev_search_course","default_filters_course","if_iframe","if_scroll_up","init","callback","val","call","methodname","args","done","response","fail","exception","mergeInstanceWithPreset","instance_data","preset_data","renderInstance","current_aside","prev_search","self","this","default_filters","data","render","html","js","render_aside","replaceNodeContents","length","each","index","value","param","createPillSearch","defaultRenderBlocks","filters","filter","key","prop","text","parent","find","trim","createPill","attr","elements","type","parentcourse","click","actionOnClick","object","area","removeData","undefined","removePill","id","trigger","buttons","remove","removePillSearch","elementssearch","flag","parseInt","renderBlocks","changeTitleBreadcrumbs","returnPreset","selected","dataselected","returnpreset","presets","JSON","stringify","result","parse","iframe","get_strings","component","strings","str","total_blocks","activity_total_all_blocks","question_total_all_blocks","sequence_total_all_blocks","course_total_all_blocks","document","querySelector","scrollIntoView","behavior","block","inline","title","pillTarget","pillremoveall","append","pill","query","simpleword","substring","split","forEach","downloadCourse","on","cid","modalPromise","create","types","ALERT","body","when","then","fmodal","show","download_from_catalog","downloadCoursePombim"],"mappings":"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"}