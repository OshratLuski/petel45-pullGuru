define("community_oer/popup-main",["jquery","core/str","core/notification","community_oer/activity","community_oer/popup-question","community_oer/sequence","community_oer/course"],(function($,Str,Notification,Activity,Question,Sequence,Course){var instance_data={},preset_data={},current_dashboard=null,current_aside={},prev_search=[],url_params={};return{init:function(dashboard,type,value){var self=this,res=window.location.href.split("?");void 0!==res[1]&&("&"+res[1]).replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(m,key,value){url_params[key]=value}));current_aside.render_aside=!0,current_aside.type=type,current_aside.value=value,current_aside.url_params=url_params,$("#page-header").addClass("d-none"),this.buildDasboard(dashboard),$("#search_form").find("input").val(""),$("#search_form").submit((function(e){e.preventDefault();var target=$("#search_form").find("input");if(target.val().trim().length>0)switch($(target).data("value",target.val().trim()),$("#search_form").find("input").val(""),current_dashboard){case"activity":Activity.actionOnClick(target),preset_data.activity=Activity.returnPreset();break;case"question":Question.actionOnClick(target),preset_data.question=Question.returnPreset();break;case"sequence":Sequence.actionOnClick(target),preset_data.sequence=Sequence.returnPreset();break;case"course":Course.actionOnClick(target),preset_data.course=Course.returnPreset()}})),$(".main-area").on("click",(function(e){var target=$(e.target).data();if("sidemenu"===target.area)current_aside.render_aside=!0,current_aside.type=target.action,current_aside.value=target.value,current_aside.url_params=url_params;switch(target.plugin){case"main":self.actionOnClick(e.target),preset_data.main=self.returnPreset();break;case"activity":Activity.actionOnClick(e.target),preset_data.activity=Activity.returnPreset();break;case"question":Question.actionOnClick(e.target),preset_data.question=Question.returnPreset();break;case"sequence":Sequence.actionOnClick(e.target),preset_data.sequence=Sequence.returnPreset();break;case"course":Course.actionOnClick(e.target),preset_data.course=Course.returnPreset()}}))},buildDasboard:function(dashboard){switch(dashboard){case"activity":current_dashboard="activity",Activity.init((function(res){instance_data.activity=JSON.parse(res),Activity.renderInstance(instance_data.activity,current_aside,prev_search,preset_data.activity,(function(){preset_data.activity=Activity.returnPreset()}))}));break;case"question":current_dashboard="question",Question.init((function(res){instance_data.question=JSON.parse(res),Question.renderInstance(instance_data.question,current_aside,prev_search,preset_data.question,(function(){preset_data.question=Question.returnPreset()}))}));break;case"sequence":current_dashboard="sequence",Sequence.init((function(res){instance_data.sequence=JSON.parse(res),Sequence.renderInstance(instance_data.sequence,current_aside,prev_search,preset_data.sequence,(function(){preset_data.sequence=Sequence.returnPreset()}))}));break;case"course":current_dashboard="course",Course.init((function(res){instance_data.course=JSON.parse(res),Course.renderInstance(instance_data.course,current_aside,prev_search,preset_data.course,(function(){preset_data.course=Course.returnPreset()}))}))}},actionOnClick:function(object){var data=$(object).data();if(current_dashboard!==data.value){"mainsearch"!==data.area&&($(".main-filter-nav").find("a").removeClass("active"),$(object).hasClass("main-total-elements-question")||$(object).hasClass("main-total-elements-activity")||$(object).hasClass("main-total-elements-sequence")||$(object).hasClass("main-total-elements-course")?$(object).parent().addClass("active"):$(object).addClass("active")),prev_search=[];var elementssearch=$("*").filter((function(){return"pillsearch"===$(this).data("area")}));$(elementssearch).each((function(){prev_search.push($(this).data("value"))})),this.buildDasboard(data.value)}},returnPreset:function(){return{}},changeTitleBreadcrumbs:function(title){$(".main-title").html(title)},reRerenderMain:function(){switch($(".main-filter-nav").find(".active").data("value")){case"activity":Activity.renderBlocks();break;case"question":Question.renderBlocks();break;case"sequence":Sequence.renderBlocks();break;case"course":Course.renderBlocks()}return!0}}}));

//# sourceMappingURL=popup-main.min.js.map