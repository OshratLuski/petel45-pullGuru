{"version":3,"file":"lazyLoad.min.js","sources":["../src/lazyLoad.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\ndefine([\n    'jquery',\n    'core/str',\n    'core/ajax',\n    'core/notification',\n    'community_social/inview',\n], function ($, Str, Ajax, Notification, inView) {\n\n    const lazyLoadIconStart = () => {\n\n        Str.get_strings([\n            { key: 'waitforloading', component: 'community_social' },\n        ]).done(function (strings) {\n            const alertWidth = $('#teachers_card_block').outerWidth() + 18;\n            const alertText = strings[0];\n            const loadingAlert = `<div id=\"loadingalert\" class=\"alert alert-secondarymedium text-primary text-center p-3 w-100 mb-0\"\n                                    role=\"alert\"\n                                    style=\"max-width: ${alertWidth}px\">\n                                    <i class=\"fas fa-sync fa-spin mr-2\"></i>\n                                    ${alertText}\n                                 </div>`;\n            $('.main').append(loadingAlert);\n        });\n    };\n\n    const lazyLoadIconStop = () => {\n        $('#loadingalert').remove();\n    };\n\n    const lazyLoad = (object, callback) => {\n        setTimeout(() => {\n            inView(\".lazyload\").on(\"enter\", function(e) {\n\n                if (!$(e).hasClass('done')) {\n\n                    lazyLoadIconStart();\n\n                    Ajax.call([{\n                        methodname: 'community_social_lazy_load',\n                        args: {\n                            teacher_tab: $('#social_teacher_tabid').val(),\n                            search: $('#search_teachers').val(),\n                            loaded_cards: $('#social_teacher_loaded_users_onpage').val()\n                        },\n                        done: function (response) {\n\n                            if (response.content.length !== 0) {\n                                $('.lazyload ').remove();\n\n                                $('#social_teacher_loaded_users_onpage').val(response.loaded_cards);\n                                $('.teacher-cards').append(response.content).append(`<div class=\"lazyload\"></div>`);\n\n                                lazyLoad();\n                            }\n\n                            lazyLoadIconStop();\n                        },\n                        fail: function (response) {\n                            lazyLoadIconStop();\n                            Notification.exception(response);\n                        },\n                    }]);\n\n                    $(e).addClass('done');\n                }\n            });\n        }, 500);\n    };\n\n    return {\n        init: function (maxuserspage) {\n            $('#social_teacher_loaded_users_onpage').val(maxuserspage);\n            lazyLoad();\n        },\n\n        load: function () {\n            lazyLoad();\n        },\n    };\n});\n"],"names":["define","$","Str","Ajax","Notification","inView","lazyLoadIconStop","remove","lazyLoad","object","callback","setTimeout","on","e","hasClass","get_strings","key","component","done","strings","alertWidth","outerWidth","alertText","loadingAlert","append","call","methodname","args","teacher_tab","val","search","loaded_cards","response","content","length","fail","exception","addClass","init","maxuserspage","load"],"mappings":"AACAA,mCAAO,CACH,SACA,WACA,YACA,oBACA,4BACD,SAAUC,EAAGC,IAAKC,KAAMC,aAAcC,cAmB/BC,iBAAmB,KACrBL,EAAE,iBAAiBM,UAGjBC,SAAW,CAACC,OAAQC,YACtBC,YAAW,KACPN,OAAO,aAAaO,GAAG,SAAS,SAASC,GAEhCZ,EAAEY,GAAGC,SAAS,UAvB3BZ,IAAIa,YAAY,CACZ,CAAEC,IAAK,iBAAkBC,UAAW,sBACrCC,MAAK,SAAUC,eACRC,WAAanB,EAAE,wBAAwBoB,aAAe,GACtDC,UAAYH,QAAQ,GACpBI,mOAEsCH,8IAElBE,uDAE1BrB,EAAE,SAASuB,OAAOD,iBAgBVpB,KAAKsB,KAAK,CAAC,CACPC,WAAY,6BACZC,KAAM,CACFC,YAAa3B,EAAE,yBAAyB4B,MACxCC,OAAQ7B,EAAE,oBAAoB4B,MAC9BE,aAAc9B,EAAE,uCAAuC4B,OAE3DX,KAAM,SAAUc,UAEoB,IAA5BA,SAASC,QAAQC,SACjBjC,EAAE,cAAcM,SAEhBN,EAAE,uCAAuC4B,IAAIG,SAASD,cACtD9B,EAAE,kBAAkBuB,OAAOQ,SAASC,SAAST,uCAE7ChB,YAGJF,oBAEJ6B,KAAM,SAAUH,UACZ1B,mBACAF,aAAagC,UAAUJ,cAI/B/B,EAAEY,GAAGwB,SAAS,cAGvB,YAGA,CACHC,KAAM,SAAUC,cACZtC,EAAE,uCAAuC4B,IAAIU,cAC7C/B,YAGJgC,KAAM,WACFhC"}