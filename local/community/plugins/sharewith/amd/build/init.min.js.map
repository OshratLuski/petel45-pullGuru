{"version":3,"file":"init.min.js","sources":["../src/init.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for the \"Actions\" panel at the bottom of the page.\n *\n * @module     community_sharewith/init\n * @package\n * @copyright  2018 Devlion <info@devlion.co>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.6\n */\n\ndefine([\n    'jquery',\n    'community_sharewith/modal',\n    'community_sharewith/sharewithteacher',\n    'community_sharewith/sharewithcommunity',\n    'community_sharewith/sendtocatalog',\n    'community_sharewith/copyactivity',\n    'community_sharewith/message',\n    'community_sharewith/custombuttons',\n], function ($, modal, shareWithTeacher, shareWithCommunity, sendToCatalog, copyActivity, message, customButtons) {\n\n    var root = document.querySelector('body');\n\n    return {\n\n        init: function (actions, contextid) {\n\n            if (actions.teachercolleague) {\n                modal.checkCourseFormat();\n                modal.addCopySectionButtonCollegueTeacherInView();\n            }\n\n            // Add modal bootstap markup to the DOM\n            modal.insertTemplates().done(function () {\n                modal.addActionNode(actions);\n                shareWithTeacher.init();\n                shareWithCommunity.init();\n                sendToCatalog.init(contextid);\n                copyActivity.init();\n                customButtons.init();\n                message.type();\n\n                root.addEventListener('click', function (e) {\n                    var target = e.target;\n                    while (root.contains(target)) {\n                        switch (target.dataset.handler) {\n                            case 'goBack':\n                                modal.goBack();\n                                break;\n                        }\n                        target = target.parentNode;\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","modal","shareWithTeacher","shareWithCommunity","sendToCatalog","copyActivity","message","customButtons","root","document","querySelector","init","actions","contextid","teachercolleague","checkCourseFormat","addCopySectionButtonCollegueTeacherInView","insertTemplates","done","addActionNode","type","addEventListener","e","target","contains","dataset","handler","goBack","parentNode"],"mappings":";;;;;;;;;AAyBAA,kCAAO,CACH,SACA,4BACA,uCACA,yCACA,oCACA,mCACA,8BACA,sCACD,SAAUC,EAAGC,MAAOC,iBAAkBC,mBAAoBC,cAAeC,aAAcC,QAASC,mBAE3FC,KAAOC,SAASC,cAAc,cAE3B,CAEHC,KAAM,SAAUC,QAASC,WAEjBD,QAAQE,mBACRb,MAAMc,oBACNd,MAAMe,6CAIVf,MAAMgB,kBAAkBC,MAAK,WACzBjB,MAAMkB,cAAcP,SACpBV,iBAAiBS,OACjBR,mBAAmBQ,OACnBP,cAAcO,KAAKE,WACnBR,aAAaM,OACbJ,cAAcI,OACdL,QAAQc,OAERZ,KAAKa,iBAAiB,SAAS,SAAUC,WACjCC,OAASD,EAAEC,OACRf,KAAKgB,SAASD,SAAS,IAEjB,WADDA,OAAOE,QAAQC,QAEfzB,MAAM0B,SAGdJ,OAASA,OAAOK"}