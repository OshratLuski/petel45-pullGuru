{"version":3,"file":"modal.min.js","sources":["../src/modal.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Javascript controller for the \"Actions\" panel at the bottom of the page.\r\n *\r\n * @module     community_sharewith/modal\r\n * @package\r\n * @copyright  2018 Devlion <info@devlion.co>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n * @since      3.6\r\n */\r\n\r\ndefine([\r\n    'jquery',\r\n    'core/templates',\r\n    'core/notification',\r\n    'community_sharewith/storage',\r\n    'local_petel/inview',\r\n], function($, Templates, Notification, St, inView) {\r\n\r\n    var SELECTORS = {\r\n        modalWrapper: '#modalSharewith',\r\n        modalContent: '#modalContentSharewith',\r\n        triggerBtn: '#triggerModalSharewith',\r\n        menuSection: '.course-content .section_action_menu [role=\"menu\"]',\r\n        sectionTitleTiles: '.tile-clickable h3',\r\n        shareActivityButton: 'share-button-activity-area',\r\n        shareSectionButton: 'share-button-section-area'\r\n    };\r\n\r\n    return /** @alias module:community_sharewith/modal */ {\r\n\r\n        template: {\r\n            modalwrapper: 'community_sharewith/modalwrapper',\r\n            chain: 'community_sharewith/chain',\r\n            selector: 'community_sharewith/selector',\r\n            copyinstance: 'community_sharewith/copyinstance',\r\n            subornot: 'community_sharewith/subornot',\r\n            error: 'community_sharewith/error',\r\n            empty: 'community_sharewith/empty',\r\n            confirm: 'community_sharewith/confirm',\r\n            confirm2: 'community_sharewith/confirm2',\r\n            shareteacher: 'community_sharewith/shareteacher',\r\n            sharecommunity: 'community_sharewith/sharecommunity',\r\n            uploadactivity: 'community_sharewith/uploadactivity'\r\n        },\r\n\r\n        modalInit: false,\r\n        triggerBtn: '',\r\n        modalContent: '',\r\n        modalWrapper: '',\r\n        courseFormat: 'topic',\r\n\r\n        /**\r\n         * Add share button to the activity.\r\n         *\r\n         * @method addShareButtonActivity\r\n         * @param {Object} attr additional attr for node.\r\n         * @param {string} node selector for parent node element.\r\n         */\r\n        addShareActivityButton: function(attr = null, node = '') {\r\n\r\n            let self = this;\r\n\r\n            const renderButton = target => {\r\n                let shareBtn = self.addSharedBtn();\r\n                let cmid = target.data(\"cmid\");\r\n                let cmlink = target.data(\"cmlink\");\r\n\r\n                shareBtn\r\n                    .attr('data-handler', 'openDialog')\r\n                    .attr('data-cmid', cmid)\r\n                    .attr('data-cmlink', cmlink);\r\n\r\n                for (const prop in attr) {\r\n                    shareBtn.attr(`data-${prop}`, attr[prop]);\r\n                }\r\n\r\n                target.html(shareBtn);\r\n            };\r\n\r\n            // On load.\r\n            if (attr !== null && attr.amit) {\r\n                setTimeout(function() {\r\n                    $(`${node} [data-region=\"${SELECTORS.shareActivityButton}\"]`).each(function() {\r\n                        renderButton($(this));\r\n                    });\r\n\r\n                }, 2000);\r\n            } else {\r\n                $(`${node} [data-region=\"${SELECTORS.shareActivityButton}\"]`).each(function() {\r\n                    renderButton($(this));\r\n                });\r\n            }\r\n\r\n            // Observer on action.\r\n            let observerNodeTargets = document.querySelectorAll('.section'),\r\n                observerConfig = {attributes: false, childList: true, subtree: false};\r\n\r\n            observerNodeTargets.forEach(function(target) {\r\n                new MutationObserver(function(type) {\r\n                    var nodes = type[0].addedNodes;\r\n                    nodes.forEach((node) => {\r\n                        let elem = $(node).find('*[data-region=\"' + SELECTORS.shareActivityButton + '\"]');\r\n                        renderButton(elem);\r\n                    });\r\n                }).observe(target, observerConfig);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Clone and add the button for copying section.\r\n         *\r\n         * @method addCopySectionButtonInline\r\n         * @param {jquery} root The root element.\r\n         */\r\n        addCopySectionButtonInline: function() {\r\n            let string = M.util.get_string('eventsectioncopy', 'community_sharewith'),\r\n                self = this;\r\n\r\n            const renderButton = target => {\r\n                let shareBtn = self.addSharedBtn(string);\r\n                let sectionid = target.data(\"sectionid\");\r\n\r\n                shareBtn\r\n                    .addClass('mr-2 ml-2')\r\n                    .attr('data-handler', 'selectCourseForSection')\r\n                    .attr('data-sectionid', sectionid)\r\n                    .attr('data-inview', 'done');\r\n                target.append(shareBtn);\r\n            };\r\n\r\n            // On load.\r\n            $('*[data-region=\"' + SELECTORS.shareSectionButton + '\"]').each(function() {\r\n                renderButton($(this));\r\n            });\r\n\r\n            // Inview.\r\n            inView('*[data-region=\"' + SELECTORS.shareSectionButton + '\"]').on(\"enter\", function(e) {\r\n                if ($(e).find('button').data('inview') !== 'done') {\r\n                    renderButton($(e));\r\n                }\r\n            });\r\n\r\n            // Observer on action.\r\n            let observerNodeTargets = document.querySelectorAll('.flexsections'),\r\n                observerConfig = {attributes: false, childList: true, subtree: false};\r\n\r\n            observerNodeTargets.forEach(function(target) {\r\n                new MutationObserver(function(type) {\r\n                    var nodes = type[0].addedNodes;\r\n                    nodes.forEach((node) => {\r\n                        let elem = $(node).find('*[data-region=\"' + SELECTORS.shareSectionButton + '\"]');\r\n                        renderButton(elem);\r\n                    });\r\n                }).observe(target, observerConfig);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Clone and add the button for copying section.\r\n         *\r\n         * @method addCopySectionButtonCollegueTeacher\r\n         * @param {jquery} root The root element.\r\n         */\r\n        addCopySectionButtonCollegueTeacher: function() {\r\n            var string = M.util.get_string('eventsectioncopy', 'community_sharewith'),\r\n                sectionTitle,\r\n                self = this;\r\n\r\n            if (this.courseFormat === 'tiles') {\r\n                sectionTitle = $(document).find(SELECTORS.sectionTitleTiles);\r\n                sectionTitle.each(function() {\r\n                    var shareBtn = self.addSharedBtn(string),\r\n                        str = $(this).parents('li.tile-clickable').data('section'),\r\n                        sectionid = $(this).parents('.tile').data('sectionidshare');\r\n                    if (sectionid) {\r\n                        shareBtn\r\n                            .attr('data-handler', 'selectCourseForSection')\r\n                            .attr('data-firstcmid', str)\r\n                            .attr('data-sectionid', sectionid);\r\n                        shareBtn.insertAfter($(this));\r\n                    }\r\n                });\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Clone and add the button for copying section.\r\n         *\r\n         * @method addCopySectionButtonCollegueTeacherInView\r\n         * @param {jquery} root The root element.\r\n         */\r\n        addCopySectionButtonCollegueTeacherInView: function() {\r\n            var string = M.util.get_string(\"eventsectioncopy\", \"community_sharewith\"),\r\n                sectionTitle,\r\n                self = this;\r\n\r\n            if (this.courseFormat === \"tiles\") {\r\n                setInterval(function() {\r\n                    $('.tiles_section_inview').each(function() {\r\n\r\n                        if ($(this).length && $(this).is(\":visible\")) {\r\n\r\n                            if (!$(this).hasClass(\"inview-selectCourseForSection-done\")) {\r\n                                var shareBtn = self.addSharedBtn(string);\r\n                                var sectionid = $(this).data('sectionid');\r\n\r\n                                shareBtn\r\n                                    .attr(\"data-handler\", \"selectCourseForSection\")\r\n                                    .attr(\"data-sectionid\", sectionid)\r\n                                    .attr(\"data-amit\", \"true\");\r\n                                shareBtn.addClass('ml-auto mr-2');\r\n\r\n                                // $(this).addClass('ml-2');\r\n\r\n                                shareBtn.appendTo($(this));\r\n\r\n                                $(this).addClass(\"inview-selectCourseForSection-done\");\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    });\r\n\r\n                }, 500);\r\n            }\r\n\r\n            if (this.courseFormat === \"grid\") {\r\n                inView(\".grid_section_inview\").on(\"enter\", function(e) {\r\n                    setTimeout(() => {\r\n                        var sectiontitle = $(e);\r\n\r\n                        if (!sectiontitle.hasClass(\"inview-selectCourseForSection-done\")) {\r\n                            var shareBtn = self.addSharedBtn(string);\r\n                            var sectionid = sectiontitle.data('sectionid');\r\n                            shareBtn\r\n                                .attr(\"data-handler\", \"selectCourseForSection\")\r\n                                .attr(\"data-sectionid\", sectionid)\r\n                                .attr(\"data-amit\", \"true\");\r\n                            shareBtn.addClass('ml-auto mr-2');\r\n                            sectiontitle.find(\"div.content h2.sectionname\").addClass('w-100 d-flex align-items-center');\r\n                            shareBtn.appendTo(sectiontitle.find(\"div.content h2.sectionname\"));\r\n                            sectiontitle.addClass(\"inview-selectCourseForSection-done\");\r\n\r\n                        }\r\n                    }, 500);\r\n                });\r\n            } else if (this.courseFormat === \"topic\") {\r\n                inView(\".topics_section_inview\").on(\"enter\", function(e) {\r\n                    setTimeout(() => {\r\n                        var sectiontitle = $(e);\r\n\r\n                        if (!sectiontitle.hasClass(\"inview-selectCourseForSection-done\")) {\r\n                            var shareBtn = self.addSharedBtn(string);\r\n\r\n                            var sectionid = sectiontitle.data('sectionid');\r\n\r\n                            shareBtn\r\n                                .attr(\"data-handler\", \"selectCourseForSection\")\r\n                                .attr(\"data-sectionid\", sectionid)\r\n                                .attr(\"data-amit\", \"true\");\r\n\r\n                            shareBtn.addClass('ml-auto mr-2');\r\n                            sectiontitle.closest('li.section').find(\"div.content h2.sectionname span\").addClass('w-100 d-flex align-items-center');\r\n                            shareBtn.appendTo(sectiontitle.closest('li.section').find(\"div.content h2.sectionname span\"));\r\n                            sectiontitle.addClass(\"inview-selectCourseForSection-done\");\r\n                        }\r\n                    }, 500);\r\n                });\r\n            } else if (this.courseFormat === \"flexsections\") {\r\n                inView(\".flexsections_section_inview\").on(\"enter\", function(e) {\r\n                    setTimeout(() => {\r\n                        var sectiontitle = $(e);\r\n                        let sectionID = sectiontitle.data(sectionid).sectionid;\r\n                        let element = $(`[data-sectionidshare=\"${sectionID}\"]`);\r\n                        if (!sectiontitle.hasClass(\"inview-selectCourseForSection-done\")) {\r\n                            var shareBtn = self.addSharedBtn(string);\r\n\r\n                            var sectionid = sectiontitle.data('sectionid');\r\n\r\n                            shareBtn\r\n                                .attr(\"data-handler\", \"selectCourseForSection\")\r\n                                .attr(\"data-sectionid\", sectionid)\r\n                                .attr(\"data-amit\", \"true\");\r\n\r\n\r\n                            shareBtn.addClass('ml-auto mr-2');\r\n                            if ($(sectiontitle).children('ul.section').find('li').length > 0) {\r\n                                sectiontitle.closest('.content').find(\"h2.sectionname\").parent().addClass('w-100 d-flex align-items-center');\r\n                                shareBtn.appendTo(sectiontitle.closest('.content').find(\"h2.sectionname\").parent());\r\n                            } else if ($(sectiontitle).siblings('.flexsections-level-1').length > 0) {\r\n                                $(sectiontitle).addClass('w-100 d-flex align-items-center');\r\n                                shareBtn.appendTo(sectiontitle);\r\n                            } else {\r\n                                // $(sectiontitle).siblings('.d-flex.align-items-center.justify-content-between').find('h2.sectionname').addClass('w-100 d-flex align-items-center');\r\n                                shareBtn.appendTo($(sectiontitle).siblings('.d-flex.align-items-center.justify-content-between'));\r\n                            }\r\n\r\n                            sectiontitle.addClass(\"inview-selectCourseForSection-done\");\r\n\r\n                        }\r\n                    }, 500);\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Insert modal markup on the page.\r\n         *\r\n         * @method insertTemplates\r\n         * @return {Promise|boolean}\r\n         */\r\n        insertTemplates: function() {\r\n            var context = {},\r\n                self = this;\r\n\r\n            return Templates.render('community_sharewith/modalwrapper', context)\r\n                .done(function(html, js) {\r\n                    if (!self.modalInit) {\r\n                        Templates.appendNodeContents('body', html, js);\r\n                        self.modalInit = true;\r\n                        self.modalWrapper = document.querySelector(SELECTORS.modalWrapper);\r\n                        self.modalContent = document.querySelector(SELECTORS.modalContent);\r\n                        self.triggerBtn = document.querySelector(SELECTORS.triggerBtn);\r\n                    }\r\n                })\r\n                .fail(Notification.exception);\r\n        },\r\n\r\n        /**\r\n         * Insert modal markup on the page.\r\n         *\r\n         * @method render\r\n         * @param {string} template The template name.\r\n         * @param {object} context The context for template.\r\n         * @return {Promise}\r\n         */\r\n        render: function(template, context) {\r\n            var self = this;\r\n            context.wwwroot = M.cfg.wwwroot;\r\n            self.modalContent.innerHTML = '';\r\n            return Templates.render(template, context)\r\n                .done(function(html, js) {\r\n                    Templates.replaceNodeContents(self.modalContent, html, js);\r\n                })\r\n                .fail(Notification.exception);\r\n        },\r\n\r\n        /**\r\n         * Add necessary nodes to the DOM.\r\n         *\r\n         * @method addActionNode\r\n         * @param {object} actions The context for template.\r\n         * @return {boolean}\r\n         */\r\n        addActionNode: function(actions) {\r\n            this.checkCourseFormat();\r\n\r\n            // TODO show buttons depending on all conditions\r\n            var result = 0;\r\n            // if (actions.sectioncopyenable) {\r\n            //     this.addCopySectionButtonInline();\r\n            //     result++;\r\n            // }\r\n            if (actions.activitycopyenable && !actions.teachercolleague) {\r\n                /* Adding share btn for each activity on the page */\r\n                this.addShareActivityButton();\r\n                result++;\r\n            }\r\n            if (actions.teachercolleague) {\r\n                var attr = {amit: true},\r\n                    self = this;\r\n                this.addShareActivityButton(attr);\r\n                //this.addCopySectionButtonCollegueTeacher();\r\n\r\n                if (this.courseFormat === 'tiles') {\r\n                    var observerNodeTargets = document.querySelectorAll('.section.moveablesection'),\r\n                        observerConfig = {attributes: false, childList: true, subtree: false};\r\n\r\n                    observerNodeTargets.forEach(function(target) {\r\n                        new MutationObserver(function(type) {\r\n                            var nodes = type[0].addedNodes;\r\n                            nodes.forEach((node) => {\r\n                                if ($(node).hasClass('content')) {\r\n                                    self.addShareActivityButton(attr);\r\n                                }\r\n                            });\r\n                        }).observe(target, observerConfig);\r\n                    });\r\n                }\r\n                result++;\r\n            }\r\n            return result ? true : false;\r\n        },\r\n\r\n        /**\r\n         * Show spinner.\r\n         *\r\n         * @method addSpinner\r\n         */\r\n        addBtnSpinner: function() {\r\n            let obj = $('#modalspinner');\r\n            obj.removeClass('d-none').addClass('loading');\r\n            obj.parent().prop('disabled', true);\r\n        },\r\n\r\n        /**\r\n         * Remove spinner.\r\n         *\r\n         * @method addSpinner\r\n         */\r\n        removeBtnSpinner: function() {\r\n            let obj = $('#modalspinner');\r\n            obj.removeClass('loading').addClass('d-none');\r\n            obj.parent().prop('disabled', false);\r\n        },\r\n\r\n        /**\r\n         * Create sharedBtn.\r\n         *\r\n         * @method addSharedBtn\r\n         * @param {string} string button text or default value.\r\n         * @return {jquery} shareBtn.\r\n         */\r\n        addSharedBtn: function(string = null) {\r\n            var text = string || M.util.get_string('share', 'community_sharewith'),\r\n                shareBtn = $(`<button><i class=\"fa-light fa-share-nodes\"></i></button>`);\r\n            shareBtn\r\n                .addClass('sharebtn')\r\n                .attr('data-sharebtn', true);\r\n            shareBtn\r\n                .find('.icon')\r\n                .attr('title', text)\r\n                .attr('aria-label', text);\r\n            return shareBtn;\r\n        },\r\n\r\n        /**\r\n         * Check and set course format.\r\n         *\r\n         * @method checkCourseFormat\r\n         */\r\n        checkCourseFormat: function() {\r\n            if ($('body').hasClass('format-tiles')) {\r\n                this.courseFormat = 'tiles';\r\n            }\r\n            if ($('body').hasClass('format-grid')) {\r\n                this.courseFormat = 'grid';\r\n            }\r\n            if ($('body').hasClass('format-topic')) {\r\n                this.courseFormat = 'topic';\r\n            }\r\n            if ($('body').hasClass('format-flexsections')) {\r\n                this.courseFormat = 'flexsections';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Return to the main window.\r\n         *\r\n         * @method goBack\r\n         */\r\n        goBack: function() {\r\n            var context = {amit: St.amit, haveviewlink: St.haveviewlink};\r\n            this.render(this.template.selector, context);\r\n        },\r\n    };\r\n});\r\n"],"names":["define","$","Templates","Notification","St","inView","SELECTORS","template","modalwrapper","chain","selector","copyinstance","subornot","error","empty","confirm","confirm2","shareteacher","sharecommunity","uploadactivity","modalInit","triggerBtn","modalContent","modalWrapper","courseFormat","addShareActivityButton","attr","node","self","this","renderButton","target","shareBtn","addSharedBtn","cmid","data","cmlink","prop","html","amit","setTimeout","each","observerNodeTargets","document","querySelectorAll","observerConfig","attributes","childList","subtree","forEach","MutationObserver","type","addedNodes","elem","find","observe","addCopySectionButtonInline","string","M","util","get_string","sectionid","addClass","append","on","e","addCopySectionButtonCollegueTeacher","str","parents","insertAfter","addCopySectionButtonCollegueTeacherInView","setInterval","length","is","hasClass","appendTo","sectiontitle","closest","sectionID","children","parent","siblings","insertTemplates","render","done","js","appendNodeContents","querySelector","fail","exception","context","wwwroot","cfg","innerHTML","replaceNodeContents","addActionNode","actions","checkCourseFormat","result","activitycopyenable","teachercolleague","addBtnSpinner","obj","removeClass","removeBtnSpinner","text","goBack","haveviewlink"],"mappings":"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"}