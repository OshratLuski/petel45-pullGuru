{"version":3,"file":"message.min.js","sources":["../src/message.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for the \"Actions\" panel at the bottom of the page.\n *\n * @module     community_sharewith/message\n * @package\n * @copyright  2018 Devlion <info@devlion.co>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.6\n */\n\ndefine([\n    'jquery',\n    'core/str',\n    'core/notification'\n], function ($, Str, Notification) {\n\n    var message = {\n\n        /**\n         * Type a message on the specific page .\n         *\n         * @method typeMessage\n         */\n        type: function () {\n            var urlString = window.location.href,\n                url = new URL(urlString),\n                param = url.searchParams.get('mess');\n\n            if (param) {\n                var input = document.querySelector('textarea[data-region=\"send-message-txt\"]'),\n                    speed = 30, /* The speed/duration of the effect in milliseconds */\n                    data = {\n                        modname: url.searchParams.get('modname'),\n                        coursename: url.searchParams.get('coursename')\n                    };\n                Str.get_string('ask_question_before_copying', 'community_sharewith', data).done(function (message) {\n                    var i = 0;\n                    (function typeWriter() {\n                        if (i < message.length) {\n                            input.innerHTML += message.charAt(i);\n                            i++;\n                            setTimeout(typeWriter, speed);\n                        } else {\n                            input.focus();\n                        }\n                    })();\n                }).fail(Notification.exception);\n            }\n        },\n    };\n\n    return message;\n});\n"],"names":["define","$","Str","Notification","type","urlString","window","location","href","url","URL","searchParams","get","input","document","querySelector","data","modname","coursename","get_string","done","message","i","typeWriter","length","innerHTML","charAt","setTimeout","focus","fail","exception"],"mappings":";;;;;;;;;AAyBAA,qCAAO,CACH,SACA,WACA,sBACD,SAAUC,EAAGC,IAAKC,oBAEH,CAOVC,KAAM,eACEC,UAAYC,OAAOC,SAASC,KAC5BC,IAAM,IAAIC,IAAIL,cACNI,IAAIE,aAAaC,IAAI,QAEtB,KACHC,MAAQC,SAASC,cAAc,4CAE/BC,KAAO,CACHC,QAASR,IAAIE,aAAaC,IAAI,WAC9BM,WAAYT,IAAIE,aAAaC,IAAI,eAEzCV,IAAIiB,WAAW,8BAA+B,sBAAuBH,MAAMI,MAAK,SAAUC,aAClFC,EAAI,YACEC,aACFD,EAAID,QAAQG,QACZX,MAAMY,WAAaJ,QAAQK,OAAOJ,GAClCA,IACAK,WAAWJ,WAXX,KAaAV,MAAMe,cAGfC,KAAK1B,aAAa2B"}