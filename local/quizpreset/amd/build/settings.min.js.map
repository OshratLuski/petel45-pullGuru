{"version":3,"file":"settings.min.js","sources":["../src/settings.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript settings handler.\n *\n * @module     local_quizpreset/settings\n * @package\n * @copyright  2019 Devlionco <info@devlion.co>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.6\n */\n\ndefine([\n    'jquery', 'local_jsoneditor/usage'\n], function($, JSONEditor) {\n\n    var Selector = {\n        BODY_QUIZ: 'body#page-admin-setting-local_quizpreset',\n        NUM_OF_TYPES: '#id_s_local_quizpreset_numberoftypes',\n        QUIZ_PRESET_SRC: '#id_s_local_quizpreset_quizpreset_',\n        JSON_FIELD1: '#admin-quizpreset_',\n        JSON_FIELD2: ' .form-textarea',\n        QUIZ_PRESET_SRC_DEF: '#id_s_local_quizpreset_quizdefaultsettings',\n        JSON_FIELD_DEF: '#admin-quizdefaultsettings .form-textarea',\n    };\n\n    return {\n        init: function() {\n            for (var i = 1; i <= 6; i++) {\n                if ($(Selector.QUIZ_PRESET_SRC + i).val() !== undefined) {\n                    var json = $(Selector.QUIZ_PRESET_SRC + i).val().trim();\n                    if (!$(Selector.QUIZ_PRESET_SRC + i).val().trim()) {\n                        $(Selector.QUIZ_PRESET_SRC + i).text(json);\n                    }\n\n                    let count = i;\n                    var options = {\n                        onChangeText: function(jsonString) {\n                            $(Selector.QUIZ_PRESET_SRC + count).text(jsonString);\n                        }\n                    };\n\n                    var divEditorId = 'jsoneditor_' + i;\n                    $(Selector.QUIZ_PRESET_SRC + i).hide();\n                    $(Selector.JSON_FIELD1 + i + Selector.JSON_FIELD2).attr('id', divEditorId);\n                    $('#' + divEditorId).css({'width': '100%', 'height': '400px'});\n\n                    if (json.length === 0) {\n                        json = '{}';\n                    }\n\n                    new JSONEditor.init(document.getElementById(divEditorId), JSON.parse(json), options);\n                }\n            }\n        }\n    };\n});\n"],"names":["define","$","JSONEditor","Selector","init","i","undefined","val","json","trim","text","count","options","onChangeText","jsonString","divEditorId","hide","attr","css","length","document","getElementById","JSON","parse"],"mappings":";;;;;;;;;AAyBAA,mCAAO,CACH,SAAU,2BACX,SAASC,EAAGC,gBAEPC,yBAGiB,qCAHjBA,qBAIa,qBAJbA,qBAKa,wBAKV,CACHC,KAAM,eACG,IAAIC,EAAI,EAAGA,GAAK,EAAGA,YAC0BC,IAA1CL,EAAEE,yBAA2BE,GAAGE,MAAqB,KACjDC,KAAOP,EAAEE,yBAA2BE,GAAGE,MAAME,OAC5CR,EAAEE,yBAA2BE,GAAGE,MAAME,QACvCR,EAAEE,yBAA2BE,GAAGK,KAAKF,UAGrCG,MAAQN,MACRO,QAAU,CACVC,aAAc,SAASC,YACnBb,EAAEE,yBAA2BQ,OAAOD,KAAKI,cAI7CC,YAAc,cAAgBV,EAClCJ,EAAEE,yBAA2BE,GAAGW,OAChCf,EAAEE,qBAAuBE,EAAIF,sBAAsBc,KAAK,KAAMF,aAC9Dd,EAAE,IAAMc,aAAaG,IAAI,OAAU,cAAkB,UAEjC,IAAhBV,KAAKW,SACLX,KAAO,UAGPN,WAAWE,KAAKgB,SAASC,eAAeN,aAAcO,KAAKC,MAAMf,MAAOI"}