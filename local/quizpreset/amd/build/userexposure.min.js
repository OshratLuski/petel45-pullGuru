/**
 * Javascript to initialise the myoverview block.
 *
 * @package
 * @copyright  2018 Bas Brands <bas@moodle.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_quizpreset/userexposure",["jquery","core/ajax","core/notification","core/str"],(function($,Ajax,Notification,Str){return{selector:{button:"#quiz-grade-button",hidden:"#quiz-grade"},init:function(){var root=$(this.selector.button),self=this;root.on("click",(function(e){self.changeGrades()}))},changeGrades:function(){var self=this;Str.get_strings([{key:"buttondisablegrades",component:"local_quizpreset"},{key:"buttonenablegrades",component:"local_quizpreset"}]).done((function(strings){var grade=$(self.selector.hidden).val();0==grade&&($(self.selector.hidden).val(1),$(self.selector.button).html(strings[0]),$(self.selector.button).removeClass("btn-primary").addClass("btn-secondary"),$("#id_marksduring").prop("checked",!0),$("#id_marksimmediately").prop("checked",!0),$("#id_marksopen").prop("checked",!0),$("#id_marksclosed").prop("checked",!0),$("#id_timeclose_day").prop("disabled",!1),$("#id_timeclose_month").prop("disabled",!1),$("#id_timeclose_year").prop("disabled",!1),$("#id_timeclose_hour").prop("disabled",!1),$("#id_timeclose_minute").prop("disabled",!1),$("#id_timeclose_enabled").is(":checked")||$("#id_timeclose_enabled").click(),self.setDateTime("timeclose")),1==grade&&($(self.selector.hidden).val(0),$(self.selector.button).html(strings[1]),$(self.selector.button).removeClass("btn-secondary").addClass("btn-primary"),$("#id_marksduring").prop("checked",!1),$("#id_marksimmediately").prop("checked",!1),$("#id_marksopen").prop("checked",!1),$("#id_marksclosed").prop("checked",!1),$("#id_timeclose_enabled").is(":checked")&&$("#id_timeclose_enabled").click())})).fail(Notification.exception)},setDateTime:function(name){var dt=new Date,month=dt.getMonth()+1;$('[name="'+name+'[hour]"] option[value='+dt.getHours()+"]").prop("selected","selected"),$('[name="'+name+'[minute]"] option[value='+dt.getMinutes()+"]").prop("selected","selected"),$('[name="'+name+'[year]"] option[value='+dt.getFullYear()+"]").prop("selected","selected"),$('[name="'+name+'[month]"] option[value='+month+"]").prop("selected","selected"),$('[name="'+name+'[day]"] option[value='+dt.getDate()+"]").prop("selected","selected")}}}));

//# sourceMappingURL=userexposure.min.js.map