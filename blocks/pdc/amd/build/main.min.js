/**
 * Javascript to initialise the myoverview block.
 *
 * @package    block_pdc
 * @copyright  2018 Bas Brands <bas@moodle.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_pdc/main",["jquery","core/ajax","core/notification","local_petel/inview"],(function($,Ajax,Notification,inView){return{selector:{wrapper:"#block-pdc-selectSort",mainBlock:".block-pdc-content-courses",selectItems:"#block-pdc-selectSort .dropdown-item",spinner:"#block-pdc-selectSort .spinner-border"},init:function(){var root=$(this.selector.wrapper),self=this;inView(".block-pdc-inview").on("enter",(function(e){if(!$(e).hasClass("inview-done")){$(e).addClass("inview-done");var sort=$("#block-pdc-selectSort .dropdown-menu .active").data("value");self.renderBlock(sort)}})).on("exit",(function(el){})),root.on("click",(function(e){for(var target=$(e.target);$.contains(root[0],target[0]);){if("setSorting"===target.data("handler"))return $(self.selector.selectItems).removeClass("active"),$(target).addClass("active"),void self.renderBlock(target.data("value"));target=target.parent()}}))},renderBlock:function(sort){var self=this;this.toggleSpinner(!0),Ajax.call([{methodname:"block_pdc_render_courses_block",args:{sort:sort},done:function(response){self.toggleSpinner(!1),response.status&&$(self.selector.mainBlock).html(response.content)},fail:Notification.exception}])},toggleSpinner:function(status){var borderColor=status?"":"transparent";$(this.selector.spinner).css("border-color",borderColor)}}}));

//# sourceMappingURL=main.min.js.map