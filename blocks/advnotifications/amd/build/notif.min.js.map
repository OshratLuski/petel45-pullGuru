{"version":3,"file":"notif.min.js","sources":["../src/notif.js"],"sourcesContent":["/* eslint no-console: [\"error\", { allow: [\"error\"] }], max-nested-callbacks: [\"error\", 7] */\n/**\n * @package    block_advnotifications\n * @copyright  2019 onwards LearningWorks Ltd {@link https://learningworks.co.nz/}\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author     Zander Potgieter <zander.potgieter@learningworks.co.nz>\n */\n\n/**\n * @module block_advnotifications/notif\n */\ndefine(['jquery'], function($) {\n    // JQuery is available via $.\n\n    return {\n        initialise: function() {\n            // Module initialised.\n            $(document).ready(function() {\n                // USER DISMISSING/CLICKING ON A NOTIFICATION.\n                $('.block_advnotifications').on('click', '.dismissible', function() {\n\n                    var dismiss = $(this).attr('data-dismiss');\n\n                    $(this).slideUp('150', function() {\n                        $(this).remove();\n                    });\n\n                    // TODO - Move ajax call to Moodle's ajax/webservice call.\n                    var senddata = {}; // Data Object.\n                    senddata.call = 'ajax';\n                    senddata.dismiss = dismiss;\n\n                    var callpath = M.cfg.wwwroot + \"/blocks/advnotifications/pages/process.php?sesskey=\" + M.cfg.sesskey;\n\n                    // Update user preferences.\n                    $.post(callpath, senddata).fail(function() {\n                        console.error(\"No 'dismiss' response received.\");\n                    }).done(function() {\n                        // User dismissed notification. Do something maybe...\n                        document.location.reload();\n                    });\n                });\n            });\n        }\n    };\n});"],"names":["define","$","initialise","document","ready","on","dismiss","this","attr","slideUp","remove","senddata","callpath","M","cfg","wwwroot","sesskey","post","fail","console","error","done","location","reload"],"mappings":";;;;;;AAWAA,sCAAO,CAAC,WAAW,SAASC,SAGjB,CACHC,WAAY,WAERD,EAAEE,UAAUC,OAAM,WAEdH,EAAE,2BAA2BI,GAAG,QAAS,gBAAgB,eAEjDC,QAAUL,EAAEM,MAAMC,KAAK,gBAE3BP,EAAEM,MAAME,QAAQ,OAAO,WACnBR,EAAEM,MAAMG,gBAIRC,SAAW,CACfA,KAAgB,QAChBA,SAASL,QAAUA,YAEfM,SAAWC,EAAEC,IAAIC,QAAU,sDAAwDF,EAAEC,IAAIE,QAG7Ff,EAAEgB,KAAKL,SAAUD,UAAUO,MAAK,WAC5BC,QAAQC,MAAM,sCACfC,MAAK,WAEJlB,SAASmB,SAASC"}