{"version":3,"file":"editor.min.js","sources":["../src/editor.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * JavaScript to add popup sql hints in the editor\n *\n * @package block_configurable_reports\n * @copyright 2021 Marcus Green\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport CodeMirror from 'block_configurable_reports/codemirror/lib/codemirror';\nimport showhint from 'block_configurable_reports/codemirror/addon/hint/show-hint';\nimport hint from 'block_configurable_reports/codemirror/addon/hint/sql-hint';\nimport mode from 'block_configurable_reports/codemirror/mode/sql/sql';\n\nexport const init = () => {\n    var tablejson = document.getElementById('tablejson');\n    var AUTOCOMPLETE_TABLES = JSON.parse(tablejson.value);\n    var editor = CodeMirror.fromTextArea(document.getElementById('id_querysql'), {\n        mode: 'text/x-mysql',\n        styleActiveLine: true,\n        lineNumbers: true,\n        extraKeys: { \"Ctrl-Space\": \"autocomplete\" }\n    });\n    editor.setSize('100%', 400);\n\n    var editor_remote = CodeMirror.fromTextArea(document.getElementById('id_remotequerysql'), {\n        mode: 'text/x-mysql',\n        styleActiveLine: true,\n        lineNumbers: true,\n        extraKeys: { \"Ctrl-Space\": \"autocomplete\" }\n    });\n    editor_remote.setSize('100%', 400);\n\n    CodeMirror.commands.autocomplete = function (cm) {\n        CodeMirror.showHint(cm, CodeMirror.hint.sql, {\n            tables: AUTOCOMPLETE_TABLES,\n            disableKeywords: true\n        });\n    }\n};\n"],"names":["_interopRequireDefault","e","__esModule","default","_codemirror","_showHint","_sqlHint","_sql","_exports","init","tablejson","document","getElementById","AUTOCOMPLETE_TABLES","JSON","parse","value","CodeMirror","fromTextArea","mode","styleActiveLine","lineNumbers","extraKeys","setSize","commands","autocomplete","cm","showHint","hint","sql","tables","disableKeywords"],"mappings":"oVAyBsE,SAAAA,uBAAAC,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,EAAA;;;;;;;kFAHtEG,YAAAJ,uBAAAI,aACAC,UAAAL,uBAAAK,WACAC,SAAAN,uBAAAM,UACAC,KAAAP,uBAAAO,MA2BEC,SAAAC,KAzBkBA,KAChB,IAAIC,UAAYC,SAASC,eAAe,aACpCC,oBAAsBC,KAAKC,MAAML,UAAUM,OAClCC,YAAUd,QAACe,aAAaP,SAASC,eAAe,eAAgB,CACzEO,KAAM,eACNC,iBAAiB,EACjBC,aAAa,EACbC,UAAW,CAAE,aAAc,kBAExBC,QAAQ,OAAQ,KAEHN,YAAUd,QAACe,aAAaP,SAASC,eAAe,qBAAsB,CACtFO,KAAM,eACNC,iBAAiB,EACjBC,aAAa,EACbC,UAAW,CAAE,aAAc,kBAEjBC,QAAQ,OAAQ,KAE9BN,YAAAA,QAAWO,SAASC,aAAe,SAAUC,IACzCT,YAAUd,QAACwB,SAASD,GAAIT,oBAAWW,KAAKC,IAAK,CACzCC,OAAQjB,oBACRkB,iBAAiB,IAExB,CACH"}